<html>
<head>
    <title></title>
</head>
<body>
<div hidden><polymer-element name="ceci-alternating-gate" attributes="countbeforeswitch" extends="ceci-element" assetpath="component-alternating-gate/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px;
  background: #555;
  text-align: center;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
}

:host .output-channel {
  padding: 5px 10px;
  background: #999;
  margin: 0 3px;
  display: inline-block;
  border: solid 2px #555;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
}

:host .next-up {
  background: white;
  border: solid 2px white;
  font-weight: bold;
}
</style>
    <div id="channels"></div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["alternating-gate", "low-level"],
      "thumbnail": "./thumbnail.png",
      "name": "Alternating Gate",
      "description": "Alternates output between set broadcasts from a single input",
      "broadcasts": {
        "A": {
          "label": "Output A",
          "description": "The first broadcast in the rotation.",
          "default": "green"
        },
        "B": {
          "label": "Output B",
          "description": "The second broadcast in the rotation.",
          "default": "yellow"
        },
        "C": {
          "label": "Output C",
          "description": "The third broadcast in the rotation."
        },
        "D": {
          "label": "Output D",
          "description": "The fourth broadcast in the rotation."
        },
        "E": {
          "label": "Output E",
          "description": "The fifth broadcast in the rotation."
        }
      },
      "listeners": {
        "input": {
          "description": "The input that alternates out the broadcasts.",
          "label": "Input",
          "default": true
        }
      },
      "attributes": {
        "countbeforeswitch": {
          "label": "Count Before Switch",
          "description": "How many events to send on each channel before switching",
          "editable": "number",
          "min" : 1
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-alternating-gate', {
      nextBroadcast : "",
      ready: function() {
        this.countbeforeswitch = Number(this.countbeforeswitch) || 1;
        this.lastBroadcast = null;
        this.count = 0;
        this.super();
      },
      countbeforeswitch: 1,
      attached : function(){
        this.super();
      },
      domReady: function() {
        var that = this;
        this.onChannelUpdate = function(){
          that.updateChannels();
          that.updateUI();
        };
        window.addEventListener("channelUpdate", this.onChannelUpdate);
        this.updateChannels();
        this.nextBroadcast = this.activeBroadcasts[0];
        this.lastBroadcast = this.activeBroadcasts[0];
        this.updateUI();
      },
      detached: function() {
        window.removeEventListener("channelUpdate", this.onChannelUpdate);
      },
      updateUI : function(){
        Array.prototype.forEach.call(this.$.channels.querySelectorAll(".output-channel"), function(c) {
          c.classList.remove("next-up");
        });
        var selected = this.$.channels.querySelector("." + this.nextBroadcast);
        if(selected){
          selected.classList.add("next-up");
        }
      },
      updateChannels: function(){
        var that = this;
        this.activeBroadcasts = [];
        that.$.channels.textContent = "";
        Array.prototype.forEach.call(this.querySelectorAll("ceci-broadcast"), function(broadcast) {
          that.activeBroadcasts.push(broadcast.getAttribute("from"));
          var channel = document.createElement("div");
          channel.classList.add("output-channel");
          channel.classList.add(broadcast.getAttribute("from"));
          channel.textContent = broadcast.getAttribute("from");
          that.$.channels.appendChild(channel);
        });
      },
      input: function(value) {
        this.broadcast(this.nextBroadcast, value);
        this.count += 1;
        this.count = this.count % this.countbeforeswitch || 0;

        // Only switch broadcaster if we've hit this one {{this.countbeforeswitch}} times
        if (this.count == 0) {
          this.nextBroadcast = this.activeBroadcasts.indexOf(this.lastBroadcast) + 1;
          this.nextBroadcast %= this.activeBroadcasts.length;
          this.nextBroadcast = this.activeBroadcasts[this.nextBroadcast];
          this.lastBroadcast = this.nextBroadcast;
          this.updateUI();
        }
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-audio" attributes="source speed label value tapecolor volume" extends="ceci-element" label="dogs.wav" volume=".5" source="http://soundjax.com/reddo/21812%5Edog_bark_x.mp3" tapecolor="#2181cb" speed="1.0" assetpath="component-audio/">
  <ceci-definition>
    {
      "tags": ["sound", "audio", "music"],
      "thumbnail": "./thumbnail.png",
      "description": "Plays an audio clip using a URL or data-uri as input.",
      "name": "Audio Clip",
      "broadcasts": {},
      "listeners": {
        "play": {
          "description": "Play the audio clip.",
          "label": "Play",
          "default": true
        },
        "pause": {
          "description": "Pause the audio clip.",
          "label": "Pause"
        },
        "stopsound": {
          "description": "Stop the audio clip.",
          "label": "Stop"
        }
      },
      "attributes": {
        "source": {
          "label": "Audio source URL",
          "description": "The URL for the sound clip you want to play",
          "editable": "text",
          "listener": true
        },
        "volume": {
          "label": "Volume",
          "editable": "number",
          "step" : ".1",
          "min" : 0,
          "max" : 1
        },
        "speed": {
          "label": "Audio playback rate",
          "description": "1 for normal speed, 2 for twice speed, -1 for reverse, etc.",
          "editable": "number"
        },
        "label": {
          "label": "Label",
          "description": "Text shown on the button.",
          "editable": "text"
        },
        "tapecolor": {
          "label": "Value",
          "description": "Color of the tape",
          "editable": "color"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .wrapper {
  cursor: pointer;
  background: orange;
  height: 75px;
  position: relative;
  overflow: hidden;
}

:host .wrapper .label {
  background: white;
  position: absolute;
  top: 8px;
  width: 218px;
  height: 30px;
  left: 45px;
  -webkit-border-radius: 2px;
  border-radius: 2px;
}

:host .wrapper .text {
  position: absolute;
  top: 3px;
  width: 100%;
  height: 30px;
  text-align:center;
  font-size: 18px;
}

:host .wrapper .circles {
  position: absolute;
  bottom: -40px;
  height: 70px;
  width: 230px;
  -webkit-border-radius: 60px;
  border-radius: 60px;
  -webkit-transform: rotate(0deg);
  transform: rotate(0deg);
  left: 40px;
  overflow: hidden;
  background-color: white;
  border-top: solid 5px black;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}

:host .circle {
  background-image: url(/bundles/components/component-audio/images/circle.png);
  background-size: 50px;
  background-repeat: no-repeat;
  background-position: center;
  position: absolute;
  top: 5px;
  background-color: black;
  -webkit-border-radius: 100px;
  border-radius: 100px;
}

:host .cantplay .right,
:host .cantplay .left {
  -webkit-animation: cantplay linear .075s 5;
  animation: cantplay linear .075s 5;
}

@-webkit-keyframes cantplay {
  0% { -webkit-transform: rotate(0deg);}
  50% { -webkit-transform: rotate(15deg);}
  100% { -webkit-transform: rotate(0deg);}
}

@keyframes cantplay {
  0% { transform: rotate(0deg);}
  50% { transform: rotate(15deg);}
  100% { transform: rotate(0deg);}
}


@-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg);}
  100% { -webkit-transform: rotate(360deg);}
}

@keyframes spin {
  0% { transform: rotate(0deg);}
  100% { transform: rotate(360deg);}
}
:host .left {
  left: -40px;
  top: -45px;
  height: 150px;
  width: 150px;

}

:host .playing .left {
  -webkit-animation: spin linear 1.5s infinite;
  animation: spin linear 1.5s infinite;
}



:host .right {
  right: -20px;
  top: -25px;
  height: 110px;
  width: 110px;
}

:host .playing .right {
    -webkit-animation: spin linear 1.3s infinite;
    animation: spin linear 1.3s infinite;
}

:host audio {
  display: none;
}
</style>
    <div id="wrapper" on-ceci-pressdown="{{play}}" class="wrapper">
      <div class="label">
        <div class="text">{{label}}</div>
      </div>
      <div class="circles">
        <div class="circle left"></div>
        <div class="circle right"></div>
      </div>
    </div>
    <audio id="sound" src="component-audio/sounds/snare.mp3" preload="auto"></audio>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-audio', {
      ready: function() {
        this.super();
        var that = this;
        this.$.sound.addEventListener("ended",function(){
          that.stopsound();
        });
      },
      state : "stopped",
      stopsound : function(){
        this.$.sound.pause();
        this.$.sound.currentTime = 0;
        this.$.wrapper.classList.remove("playing");
        this.state = "stopped";
      },
      play: function() {
        var readyState = this.$.sound.readyState;
        if(readyState != 0) {
          this.$.wrapper.classList.add("playing");
          if(this.state == "paused") {
            this.$.sound.play();
            this.state = "playing";
          } else {
            this.$.sound.pause();
            this.$.sound.currentTime = 0;
            this.$.sound.play();
            this.state = "playing";
          }
        } else {
          this.$.wrapper.classList.remove("cantplay");
          this.$.wrapper.offsetWidth = this.$.wrapper.offsetWidth;
          this.$.wrapper.classList.add("cantplay");
        }
      },
      pause : function(){
        this.$.wrapper.classList.remove("playing");
        this.$.sound.pause();
        this.state = "paused";
      },
      sourceChanged: function(oldValue, newValue) {
        this.$.sound.src = newValue;
      },
      setSpeed: function(channel, value) {
        this.speedChanged(this.$.sound.playbackRate || 1, value);
      },
      volumeChanged : function(oldValue, newValue){
        this.$.sound.volume = newValue;
      },
      tapecolorChanged: function (oldValue, newValue) {
        this.$.wrapper.style.background = newValue;
      },
      speedChanged: function(oldValue, newValue) {
        try  {
          var f = parseFloat(newValue);
          if (f) {
            this.$.sound.playbackRate = parseFloat(newValue);
          }
        } catch (e) {}
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-bool" extends="ceci-element" attributes="checkif" checkif="hello" assetpath="component-boolean/">
  <ceci-definition>
    {
      "name": "Boolean Gate",
      "thumbnail": "./thumbnail.png",
      "description": "Compares input to a value you choose and reports \"true\" or \"false\".",
      "broadcasts": {
        "true": {
          "label": "True",
          "description": "The signal matches the condition.",
          "default" : true
        },
        "false": {
          "label": "False",
          "description": "The signal doesn't match the condition."
        }
      },

      "listeners": {
        "signal": {
          "description": "The signal to match",
          "label": "Signal",
          "default" : true
        }
      },
      "attributes": {
        "checkif": {
          "description": "Check if the incoming signal matches this string.",
          "label": "Check If",
          "editable": "Text",
          "default" : true
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  box-sizing: border-box;
  background: #DDD;
  padding: 5px 10px;
  text-align: center;
}

:host span.checkif {
  display: inline-block;
  background-color: white;
  padding: 4px 5px;
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;
  border-bottom-right-radius: 5px;
  border-bottom-left-radius: 5px;
  border-style: solid;
  border-color: rgb(204, 204, 204);
  border-width: 1px 1px 2px;
}</style>

    <div class="rule">
      Does the signal equal <span class="checkif">"{{checkif}}"</span> ?
    </div>

    <shadow></shadow>
  </template>
  <tags>starter,math</tags>

    <script>
      Polymer("ceci-bool", {
        ready: function() {
          this.super();
        },
        attached : function(){
          this.super();
        },
        signal : function(value){
          if (value.toString().toLowerCase() === this.checkif.toLowerCase()) {
            this.broadcast("true", "true");
          }
          else {
            this.broadcast("false", "false");
          }
        }
      });
    </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-boolean-gate" attributes="" extends="ceci-element" assetpath="component-boolean-gate/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px;
  background: #555;
  text-align: center;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
}

:host .output-channel {
  padding: 5px 10px;
  background: #999;
  margin: 0 3px;
  display: inline-block;
  border: solid 2px #555;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  cursor: pointer;
}

:host #state.open {
  background: red;
  border: solid 2px white;
  font-weight: bold;
}

:host #state {
  background: white;
  border: solid 2px white;
  font-weight: bold;
}
</style>
    <div id="state">OPEN</div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["boolean-gate", "low-level"],
      "thumbnail": "./thumbnail.png",
      "name": "Channel Filter",
      "description": "Allows or stops a signal from passing through.",
      "broadcasts": {
        "Out": {
          "label": "Output",
          "description": "Broadcasts the message, if allowed",
          "default": "green"
        }
      },
      "listeners": {
        "input": {
          "description": "The input that is to be broadcast",
          "label": "Input",
          "default": true
        },
        "open": {
          "description": "Open the gate",
          "label": "Open"
        },
        "close": {
          "description": "Close the gate",
          "label": "Close"
        }
      },
      "attributes": {}
    }
  </ceci-definition>
  <script>
    Polymer('ceci-boolean-gate', {
      isOpen: true,
      ready: function() {
        this.super();
        this.isOpen = true;
      },
      attached: function(){
        var that = this;
        this.addEventListener("channelUpdated",function(){
          this.updateUI();
        });
        this.updateUI();
        this.super();
      },
      updateUI: function(){
        if(this.isOpen){
          this.$.state.classList.remove("open");
        } else {
          this.$.state.classList.add("open");
        }
      },
      open: function() {
        this.isOpen = true;
        this.updateUI();
      },
      close: function() {
        this.isOpen = false;
        this.updateUI();
      },
      input:function(value) {
        if ( this.isOpen ) {
          this.broadcast("Out", value);
        }
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-button" attributes="textcolor buttoncolor label value" value="Press" extends="ceci-element" label="Press Me" textcolor="#ffffff" buttoncolor="#4DB227" assetpath="component-button/">
  <ceci-definition>
    {
      "tags": ["button", "click", "tap"],
      "thumbnail": "./thumbnail.png",
      "description": "Responds to your clicks and taps.",
      "name": "Button",
      "broadcasts": {
        "click": {
          "label": "Press",
          "description": "Occurs when button is clicked.",
          "default": true
        }
      },
      "listeners": {},
      "attributes": {
        "label": {
          "label": "Label",
          "description": "Text shown on the button.",
          "editable": "text",
          "listener": true
        },
        "value": {
          "label": "Broadcast Value",
          "description": "Value sent by the button.",
          "editable": "text"
        },
        "textcolor": {
          "label": "Text Color",
          "description": "Color of the text on the button's label.",
          "editable": "color"
        },
        "buttoncolor": {
          "label": "Button Color",
          "description": "Background color of the button.",
          "editable": "color",
          "listener": true
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .button-wrapper {
  position: relative;
}

:host #buttonwrapper {
  cursor: pointer;
}

:host #button {

  border-bottom: 2px solid rgba(0,0,0,.1);
  display: block;
  text-align: center;
  padding: 12px 0 10px 0;
  text-overflow: ellipsis;
  overflow: hidden;
  font-weight: 300;
  font-size: 1.8rem;
  line-height: 1.8rem;
}

:host .overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  opacity: 0;
}

:host .active-overlay {
  background: black;
}

:host .hover-overlay {
  background: white;
}

:host .pressdown .active-overlay {
  opacity: .1;
}

:host .pressdown #button {
  border-top: solid 2px rgba(0,0,0,.1);
  border-bottom: none;
}

:host button {
  border: none;
}
</style>
    <div id="buttonwrapper" on-ceci-pressdown="{{pressdown}}" on-ceci-pressup="{{pressup}}" class="button-wrapper">
      <div id="button">{{label}}</div>
      <div class="overlay active-overlay"></div>
    </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-button', {
      ready: function () {
        this.super();
      },
      attached : function(){
        this.super();
      },
      pressup : function(){
        this.$.buttonwrapper.classList.remove("pressdown");
      },
      pressdown : function(){
        this.$.buttonwrapper.classList.add("pressdown");
        this.broadcast('click', this.getAttribute('value'));
      },
      textcolorChanged: function (oldValue, newValue) {
        this.$.button.style.color = newValue;
      },
      buttoncolorChanged: function (oldValue, newValue) {
        this.$.button.style.backgroundColor = newValue;
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-button-with-confirmation" attributes="textcolor buttoncolor buttonactivecolor label confirmationmessage value" extends="ceci-element" label="Click and Confirm Me" textcolor="#ffffff" buttoncolor="#4DB227" buttonactivecolor="#358915" confirmationmessage="Are you sure?" assetpath="component-button-with-confirmation/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  height: 50px;
}

:host button {
  font-family: "FiraSans", sans-serif;
  cursor: pointer;
  position: relative;
  text-decoration: none;
  outline: none;
  border-top: 1px solid rgba(255,255,255,.3);
  border-bottom: 2px solid rgba(0,0,0,.2);
  background-color: #4DB227;
  text-align: center;
  display: block;
  padding-top: 5px;
  padding-bottom: 3px;
  text-overflow: ellipsis;
  overflow: hidden;
  border-radius: 0.2rem;
  font-weight: 600;
  font-size: 1.8rem;
  line-height: 3.8rem;
  color: #ffffff;
  width: 100%;
  margin: 0;
}

:host button {
  border: none;
}

</style>
    <button id="button" on-ceci-pressdown="{{click}}">{{label}}</button>
    <shadow></shadow>

  </template>
  <ceci-definition>
    {
      "tags": ["button", "click", "tap"],
      "thumbnail": "./thumbnail.png",
      "name": "Button with Confirmation",
      "description": "Responds to your clicks and taps by asking you \"Are you sure?\"",
      "broadcasts": {
        "click": {
          "label": "Click",
          "description": "Occurs when button is clicked.",
          "default": true
        },
        "cancelClick": {
          "label": "Cancel Click",
          "description": "Occurs when button is clicked and the user denies the confirmation message."
        }
      },
      "listeners": {},
      "attributes": {
        "label": {
          "label": "Label",
          "description": "Text shown on the button.",
          "editable": "text",
          "listener": true
        },
         "confirmationmessage": {
          "label": "Confirmation Message",
          "description": "Confirmation message that is displayed to the user before executing action.",
          "editable": "text"
        },
        "value": {
          "label": "Value",
          "description": "Value sent by the button.",
          "editable": "text"
        },
        "textcolor": {
          "label": "Text Color",
          "description": "Color of the text on the button's label.",
          "editable": "color"
        },
        "buttoncolor": {
          "label": "Button Color",
          "description": "Background color of the button.",
          "editable": "color",
          "listener" : "true"
        },
        "buttonactivecolor": {
          "label": "Button Active Color",
          "description": "Background color of the button while it is being clicked or tapped.",
          "editable": "color"
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-button-with-confirmation', {
      ready: function () {
        this.super();

        var that = this;
        this.$.button.addEventListener('mousedown', function (e) {
          var valueBefore = that.buttoncolor;
          if (that.buttonactivecolor) {
            that.$.button.style.backgroundColor = that.buttonactivecolor;
            window.addEventListener('mouseup', function (e) {
              that.$.button.style.backgroundColor = valueBefore;
            }, false);
          }
        }, false);

        this.confirmationmessage = this.getAttribute('confirmationmessage') || "extra default";
      },
      confirmationmessage: (this.confirmationmessage || "default thingy"),
      click: function () {
        if (window.confirm(this.confirmationmessage)) {
            this.broadcast('click', this.getAttribute('value'));
        } else {
            this.broadcast('cancelClick', this.getAttribute('value'));
        }
      },
      textcolorChanged: function (oldValue, newValue) {
          this.$.button.style.color = newValue;
      },
      buttoncolorChanged: function (oldValue, newValue) {
        this.$.button.style.backgroundColor = newValue;
      },
      confirmationmessageChanged: function(oldValue, newValue) {
        this.confirmationmessage = newValue;

      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-camera-button" attributes="textcolor buttoncolor buttonactivecolor label value imageheight imagewidth" extends="ceci-element" label="Enable Camera" textcolor="#ffffff" buttoncolor="#4DB227" buttonactivecolor="#358915" imageheight="160" imagewidth="160" assetpath="component-camera-button/">
  <template>
    <style>:host {
  position: relative;
  display: block;
  width: 100%;
  background: #555;
}

:host .mode-content img {
  width: 80px;
  opacity: .5;
}

/* Pending Mode */

:host .mode-pending .mode-content {
  padding-top: 30px;
}

:host .mode-pending img {
  width: 120px;
}


/* Disabled Mode */

:host .mode-disabled {
  background-position: center 10px;
  background-repeat: no-repeat;
  background-size: 100px;
}

:host .mode-disabled img {
  margin-bottom: 5px;
}

:host .mode-disabled .mode-content {
  padding-top: 30px;
}

:host .mode-disabled img {
  width: 120px;
}

/* File Mode */

:host .mode-file .mode-content {
  padding: 15px 15px 20px 15px;
  min-height: 0;
}

:host .mode-content h2 {
  color: #EEE;
  font-size: 18px;
  padding: 0;
  margin: 0 0 0 0;
}

:host .mode-content p {
  color: #CCC;
  font-size: 16px;
  padding: 0 40px;
  margin: 0 0 20px 0;
}

/* Enabled Mode */

:host .mode-enabled .shutter-bar {
  opacity: 1;
}

/* From File Mode */

:host .mode-file p {
  top: 0;
}

:host .mode {
  text-align: center;
  position: relative;
}

:host .mode-content {
  min-height: 180px;
}

:host  .shutter-bar {
  background: #333;
  padding: 10px 0 12px 0px;
  width: 100%;
  opacity: .2;
  border-top: solid 2px #666;
}

:host .shutter-button {
  margin: 0 auto;
  bottom: 0px;
  background: #DDD;
  height: 35px;
  width: 35px;
  border-radius: 35px;
  background: #4DB227 -webkit-linear-gradient(#DDD,white);
  border: solid 3px #777;
}

:host .mode-enabled .shutter-button {
  cursor: pointer;
}

:host button {
  display: block;
  margin: 0 auto;
  padding: 8px 14px;
  border: 1px solid rgba(0,0,0,.35) ;
  border-bottom: 2px solid rgba(0,0,0,.35);
  border-radius: 0.2rem;
  text-shadow: 0px -1px 0px rgba(0,0,0,.3);
  background: #4DB227 -webkit-linear-gradient(#58c82d,#4DB227);
  color: #ffffff;
  font-family: "FiraSans", sans-serif;
  font-weight: 400;
  font-size: 16px;
  -webkit-border-radius: 3px;
  text-align: center;
  text-decoration: none;
  text-overflow: ellipsis;
  cursor: pointer;
  position: relative;
  outline: rgba(0,0,0,.2) 5px solid;
  overflow: hidden;
  position: realtive;
}

:host button:active {
  background: #4DB227 -webkit-linear-gradient(#4DB227,#58c82d);
  background: #4DB227 -moz-linear-gradient(#4DB227,#58c82d);
  background: #4DB227 linear-gradient(#4DB227,#58c82d);
}

:host #camerainput {
  display: none;
}

:host #videoinput {
  width: 100%;
  display: block;
}

:host #canvasinput {
  display: none;
  height: 200px;
}
</style>

    <div class="mode mode-disabled">
      <div class="mode-content">
        <img src="component-camera-button/images/camera-asleep.png">
        <button id="enable-camera" on-click="{{enableCamera}}">Enable Camera</button>
      </div>
      <div class="shutter-bar">
        <div class="shutter-button"></div>
      </div>
    </div>

    <div class="mode mode-pending">
      <div class="mode-content">
        <img src="component-camera-button/images/arrow-up.png">
        <p>Please allow your device to use your camera.</p>
      </div>
      <div class="shutter-bar">
        <div class="shutter-button"></div>
      </div>
    </div>

    <div class="mode mode-file">
      <div class="mode-content">
        <img src="component-camera-button/images/folder-photo.png">
        <h2>Oops!</h2>
        <p>This device doesn't have a camera but you can...</p>
        <button on-click="{{pickFile}}">Choose an Image File</button>
      </div>
    </div>

    <div class="mode mode-enabled">
      <div class="mode-content">
        <video id="videoinput"></video>
      </div>
      <div class="shutter-bar">
        <div class="shutter-button" on-click="{{takePhoto}}"></div>
      </div>
    </div>

    <canvas id="canvasinput"></canvas>

    <input id="camerainput" type="file" accept="image/*">
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["camera","photo","image"],
      "thumbnail": "./thumbnail.png",
      "name": "Camera",
      "description": "Takes a picture.",
      "broadcasts": {
        "photo": {
          "label": "Photo",
          "description": "Broadcasts the photo image data.",
          "default": true
        }
      },
      "listeners": {}
    }
  </ceci-definition>
  <script>
    Polymer('ceci-camera-button', {
      ready: function () {
        this.super();
        // do we have getMedia available?
        navigator.getMedia = (navigator.getUserMedia ||
          navigator.webkitGetUserMedia ||
          navigator.mozGetUserMedia ||
          navigator.msGetUserMedia);
      },
      attached : function(){
        if (!navigator.getMedia) {
          this.cameraMode("file");
        } else {
          this.cameraMode("disabled");
        }
        this.super();
      },
      cameraMode : function(mode) {
        var modes = this.shadowRoot.querySelectorAll(".mode");
        modes = Array.prototype.slice.call(modes);
        var fn = function(e) {
          e.style.display = "none";
        };
        modes.forEach(fn);
        this.shadowRoot.querySelector(".mode-" + mode).style.display = "block";
      },
      enableCamera: function() {
        if (navigator.getMedia) {

          this.cameraMode("pending");

          this.streaming = false;
          var that = this;
          var video = this.video = this.$.videoinput;
          var cameraPurpose = {
            video: true,
            audio: false
          };

          var streamHandler = function(stream) {
            that.videoStream = stream;
            if (navigator.mozGetUserMedia) {
              video.mozSrcObject = stream;
            } else {
              var vendorURL = window.URL || window.webkitURL;
              video.src = vendorURL.createObjectURL(stream);
            }
            video.play();
          };

          var errorHandler = function(err) {
            console.log("An error occured! " + err);
            that.cameraMode("disabled");
          };

          navigator.getMedia(cameraPurpose, streamHandler, errorHandler);

          video.addEventListener('canplay', function(ev) {

            if (!that.streaming) {
              that.cameraMode("enabled");
              that.streaming = true;
            }
          }, false);
        }
        // end of ready() code
      },

      takePhoto : function(){
        if ("mozActivity" in navigator) {
          return this.ffosClick();
        }

        var that = this;

        if (navigator.getMedia) {
          var canvas = this.$.canvasinput;
          var video = this.$.videoinput;
          var width = parseInt(this.imagewidth,10);
          var height = video.videoHeight / (video.videoWidth/width);
          canvas.width = width;
          canvas.height = height;
          canvas.getContext('2d').drawImage(video, 0, 0, width, height);
          var data = canvas.toDataURL('image/png');
          console.log("broadcasting");
          this.broadcast('photo', data);

          // Stops the video stream and resets camera
          video.src = "";
          this.videoStream.stop();
          this.cameraMode("disabled");
        }
      },
      ffosClick: function() {
        var activity = new MozActivity({
          // Ask for the "pick" activity
          name: "pick",

          // Provide the data required by the filters of the activity
          data: {
            type: ["image/jpeg", "image/png"]
          }
        });

        var that = this;

        activity.onsuccess = function() {
          var data =  window.URL.createObjectURL(this.result.blob);
          console.log("A picture has been retrieved");
          that.broadcast("photo", data);
        };

        activity.onerror = function() {
          console.log(this.error);
        };
      },
      pickFile : function(){
        var that = this;
        function selectImageFile() {
          var reader = new FileReader();
          var file = that.$.camerainput.files[0];

          reader.onloadend = function() {
            console.log("File", reader.result);
            that.broadcast("photo", reader.result);
          };

          if (file) {
            reader.readAsDataURL(file);
          }
        }

        this.$.camerainput.addEventListener("change", selectImageFile, false);
        this.$.camerainput.click();
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-component-canvas" extends="ceci-element" attributes="height pensize readonly imageurl generateonchange" assetpath="component-canvas/">
  <ceci-definition>
    {
      "name": "Drawing Canvas",
      "tags": ["canvas","drawing"],
      "thumbnail": "./thumbnail.png",
      "description": "Lets you draw simple images.",
      "broadcasts": {
        "imageGenerated": {
          "label": "Image Generated",
          "description": "A portable image URL was generated",
          "default": "green"
        }
      },
      "listeners": {
        "generateImage": {
          "label": "Generate Image",
          "description": "Generates a portable image URL from the drawing"
        },
        "reset": {
          "label": "Reset",
          "description": "Description for reset"
        }
      },
      "attributes": {
        "generateonchange": {
          "label": "Generate on Change",
          "description": "Generate image when canvas is changed",
          "editable": "boolean"
        },
        "pensize": {
          "label": "Pen Size",
          "description": "Width of pen used for drawing",
          "editable": "number",
          "min": 1
        },
        "readonly": {
          "label": "Read Only",
          "description": "Locks/unlocks drawn content",
          "editable": "boolean"
        },
        "height": {
          "label": "Height",
          "description": "Height of canvas",
          "editable": "number"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  position: relative;
  background-color: #fff;
  background-image: linear-gradient(rgba(201, 210, 248, 0.4) .1em, transparent .1em);
  background-size: 100% 1.2em;
}

:host canvas {
  width: 100%;
  height: 100%;
  cursor: none;
}

:host #cursor {
  background: #000;
  position: absolute;
  cursor: none;
  pointer-events: none;
}
</style>
    <canvas id="canvas"></canvas>
    <div id="cursor" hidden="true"></div>
    <shadow></shadow>
  </template>
    <script>
      function getMousePositionOffset(e, canvas) {
        var rect = canvas.getBoundingClientRect();

        if (e.touches) {
          return [e.touches[0].clientX - rect.left, e.touches[0].clientY - rect.top];
        }
        else if (e.offsetX) {
          return [e.offsetX, e.offsetY];
        }
        else {
          // recover from PointerEvents bug... :/
          return [e.clientX - rect.left, e.clientY - rect.top];
        }
      }

      function enableCanvas (canvas, changedCallback) {
        changedCallback = changedCallback || function () {};

        return function (eMouseDown) {
          var canvas = eMouseDown.target;
          var ctx = canvas.getContext('2d');

          var moved = false;

          var canvasRect = canvas.getBoundingClientRect();
          var startPos = getMousePositionOffset(eMouseDown, canvas);

          ctx.beginPath();
          ctx.moveTo(startPos[0], startPos[1]);

          function onCanvasMouseMove (eMouseMove) {
            var movedPos = getMousePositionOffset(eMouseMove, canvas);
            ctx.lineTo(movedPos[0], movedPos[1]);
            ctx.stroke();
            moved = true;
            eMouseMove.preventDefault();
          }

          function onCanvasMouseUp (eMouseUp) {
            canvas.removeEventListener('mousemove', onCanvasMouseMove, false);
            window.removeEventListener('mouseup', onCanvasMouseUp, false);
            canvas.removeEventListener('touchmove', onCanvasMouseMove, false);
            window.removeEventListener('touchend', onCanvasMouseUp, false);

            if (!moved) {
              ctx.lineTo(startPos[0] + ctx.lineWidth, startPos[1] + ctx.lineWidth);
              ctx.stroke();
            }
            ctx.closePath();
            changedCallback();
          }

          canvas.addEventListener('mousemove', onCanvasMouseMove, false);
          window.addEventListener('mouseup', onCanvasMouseUp, false);
          canvas.addEventListener('touchmove', onCanvasMouseMove, false);
          window.addEventListener('touchend', onCanvasMouseUp, false);
        }
      }

      Polymer("ceci-component-canvas", {
        readonly: 'false',
        pensize: 5,
        height: 100,
        generateonchange: 'false',
        heightChanged: function () {
          this.style.height = this.height + 'px';
          this.async(function () {
            var rect = this.getBoundingClientRect();
            this.$.canvas.width = rect.width;
            this.$.canvas.height = rect.height;
          });
        },
        ready: function() {
          this.super();

          var that = this;
          var cursor = this.$.cursor;
          this.$.canvas.addEventListener('mousemove', function (e) {
            var pos = getMousePositionOffset(e, that.$.canvas);
            cursor.style.left = pos[0] + 'px';
            cursor.style.top = pos[1] + 'px';
          }, false);

          this.$.canvas.addEventListener('mouseenter', function (e) {
            cursor.hidden = false;
          }, false);

          this.$.canvas.addEventListener('mouseleave', function (e) {
            cursor.hidden = true;
          }, false);

          if (this.imageurl && this.imageurl.indexOf('data:image/png;base64,') === 0) {
            var img = new Image();
            var canvas = this.$.canvas;
            img.onload = function () {
              canvas.getContext('2d').drawImage(img,0,0);
            };
            img.src = this.imageurl;
          }

          this.readonlyChanged();
          this.pensizeChanged();
        },
        readonlyChanged: function () {
          var that = this;
          if (this.readonly === 'false') {
            this._onCanvasMouseDown = enableCanvas(this.$.canvas, function () {
              that.imageurl = that.$.canvas.toDataURL();
              if (that.generateonchange === 'true') {
                that.broadcast('imageGenerated', that.$.canvas.toDataURL());
              }
            });
            this.$.canvas.addEventListener('mousedown', this._onCanvasMouseDown, false);
            this.$.canvas.addEventListener('touchstart', this._onCanvasMouseDown, false);
          }
          else {
            if (this._onCanvasMouseDown) {
              this.$.canvas.removeEventListener('mousedown', this._onCanvasMouseDown, false);
              this.$.canvas.removeEventListener('touchdown', this._onCanvasMouseDown, false);
            }
          }
        },
        pensizeChanged: function () {
          var size = parseInt(this.pensize);
          this.$.canvas.getContext('2d').lineWidth = parseInt(this.pensize);
          this.$.cursor.style.width = size + 'px';
          this.$.cursor.style.height = size + 'px';
          this.$.cursor.style.marginTop = -(size/2) + 'px';
          this.$.cursor.style.marginLeft = -(size/2) + 'px';
        },
        generateImage: function () {
          this.broadcast('imageGenerated', this.$.canvas.toDataURL());
        },
        attached: function () {
          var rect = this.getBoundingClientRect();
          this.$.canvas.width = rect.width;
          this.$.canvas.height = rect.height;
          this.super();
        },
        reset: function() {
          var c = this.$.canvas;
          c.getContext('2d').clearRect(0, 0, c.width, c.height);
          this.broadcast('reset');
        }
      });
    </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-channel-gate" attributes="" extends="ceci-element" assetpath="component-channel-gate/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px;
  background: #555;
  text-align: center;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
}

:host .output-channel {
  padding: 5px 10px;
  background: #999;
  margin: 0 3px;
  display: inline-block;
  border: solid 2px #555;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  cursor: pointer;
}

:host .output-channel:not(.next-up):hover {
  background: #AAA;
}

:host .next-up {
  background: white;
  border: solid 2px white;
  font-weight: bold;
}
</style>
    <div id="channels"></div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["alternating-gate", "low-level"],
      "thumbnail": "./thumbnail.png",
      "name": "Channel Gate",
      "description": "Sends an incoming signal on a broadcast channel of your choosing.",
      "broadcasts": {
        "A": {
          "label": "Output A",
          "description": "The first broadcast in the rotation.",
          "default": "green"
        },
        "B": {
          "label": "Output B",
          "description": "The second broadcast in the rotation.",
          "default": "yellow"
        },
        "C": {
          "label": "Output C",
          "description": "The third broadcast in the rotation."
        },
        "D": {
          "label": "Output D",
          "description": "The fourth broadcast in the rotation."
        },
        "E": {
          "label": "Output E",
          "description": "The fifth broadcast in the rotation."
        }
      },
      "listeners": {
        "input": {
          "description": "The input that alternates out the broadcasts.",
          "label": "Input",
          "default": true
        }
      },
      "attributes": {}
    }
  </ceci-definition>
  <script>
    Polymer('ceci-channel-gate', {
      nextBroadcast : "",
      ready: function() {
        this.super();
        this.lastBroadcast = null;
      },
      attached : function(){
        this.super();
      },
      domReady: function() {
        var that = this;
        this.onChannelUpdate = function(){
          that.updateChannels();
          that.updateUI();
        };
        window.addEventListener("channelUpdate", this.onChannelUpdate);
        this.updateChannels();
        this.nextBroadcast = this.activeBroadcasts[0];
        this.updateUI();
      },
      detached: function() {
        window.removeEventListener("channelUpdate", this.onChannelUpdate);
      },
      updateUI : function(){
        Array.prototype.forEach.call(this.$.channels.querySelectorAll(".output-channel"), function(c) {
          c.classList.remove("next-up");
        });
        var selected = this.$.channels.querySelector("." + this.nextBroadcast);
        if(selected){
          selected.classList.add("next-up");
        }
      },
      channelClick : function(from){
        this.nextBroadcast = from;
        this.updateUI();
      },
      updateChannels: function(){
        var that = this;
        this.activeBroadcasts = [];
        that.$.channels.textContent = "";
        Array.prototype.forEach.call(this.querySelectorAll("ceci-broadcast"), function(broadcast) {
          that.activeBroadcasts.push(broadcast.getAttribute("from"));
          var channel = document.createElement("div");
          channel.classList.add("output-channel");
          channel.classList.add(broadcast.getAttribute("from"));
          channel.textContent = broadcast.getAttribute("from");
          var from = broadcast.getAttribute("from");
          channel.addEventListener("click",function(){
            that.channelClick(from);
          });
          that.$.channels.appendChild(channel);
        });
      },
      input: function(value) {
        this.broadcast(this.nextBroadcast, value);
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-chart" collectionname="times" extends="ceci-element" attributes="unit increment value collectionname" assetpath="component-chart/">
  <script src="component-chart/vendor/chartjs/Chart.min.js"></script>
  <ceci-definition>
    {
      "name": "Line Graph",
      "thumbnail": "./thumbnail.png",
      "description": "Shows a line graph of a data set over time.",
      "tags": ["asdf"],
      "broadcasts": {
      },
      "listeners": {
        "graph": {
          "description": "Graphs available data.",
          "label": "Graph",
          "default": true
        }
      },
      "attributes": {
        "collectionname": {
          "description": "The name of the collection to store the value",
          "label": "Collection Name",
          "editable": "text"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .wrapper {
  width: 100%;
  min-height: 400px;
}

:host canvas {
  height: 400px;
  width: 100%;
}
</style>
    <div class="wrapper">
      <canvas id="canvas" width="310" height="400"></canvas>
    </div>
    <shadow></shadow>
  </template>
  <tags></tags>
  <script>
    Polymer("ceci-chart", {
      ready: function() {
        this.super();
        var canvas = this.$.canvas;
        var ctx = canvas.getContext('2d');
        this.chart = new Chart(ctx);

        localStorage['hack-collection-times'] = JSON.stringify({
          "6/2/2014":20,
          "6/3/2014":20,
          "6/4/2014":23,
          "6/5/2014":25,
          "6/6/2014":30,
          "6/7/2014":32,
          "6/8/2014":35,
          "6/9/2014":36,
          "6/10/2014":33,
          "6/11/2014":25,
          "6/12/2014":34,
          "6/13/2014":60
        });

        this.graph();

      },
      getData: function() {
        var data = JSON.parse(localStorage['hack-collection-' + this.collectionname]);

        var values = [];
        var keys = Object.keys(data);

        for (var i in keys){
          values.push(data[keys[i]]);
        }

        return {
          labels: keys,
          datasets: [
            {
              fillColor: "rgba(54, 171, 42, .6)",
              strokeColor: "rgba(30, 151, 29, 1.0000)",
              data: values
            }
          ]
        };
      },
      getIntegerScaleParameters: function(data) {
        var maxValue = false;
        for (datasetIndex = 0; datasetIndex < data.datasets.length; ++datasetIndex) {
           var setMax = Math.max.apply(null, data.datasets[datasetIndex].data);
           if (maxValue === false || setMax > maxValue) maxValue = setMax;
        }

        var steps = new Number(maxValue);
        var stepWidth = new Number(1);
        if (maxValue > 10) {
           stepWidth = Math.floor(maxValue / 10);
           steps = Math.ceil(maxValue / stepWidth);
        }
        return { animation: false, scaleOverride: true, scaleSteps: steps, scaleStepWidth: stepWidth, scaleStartValue: 0 };
      },
      graph: function() {
        var data = this.getData();
        this.chart.Line(data, this.getIntegerScaleParameters(data));
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-chat-window" attributes="username room" extends="ceci-element" username="Anonymous" room="Mozilla" assetpath="component-chat-window/">
  <ceci-definition>
    {
      "tags": ["chat", "social"],
      "thumbnail": "./thumbnail.png",
      "description": "Connects you to a simple chat room.",
      "name": "Chat Room",
      "broadcasts": {
        "messageposted": {
          "label": "Message posted",
          "description": "Occurs when a message is posted in the chatroom.",
          "default": "green"
        }
      },
      "listeners": {
        "clear": {
          "description": "Clear all messages from the chat room",
          "label": "Clear"
        },
        "sendMessage": {
          "default": true,
          "description": "Send a message to the chat room",
          "label": "Send message"
        }
      },
      "attributes": {
        "username": {
          "description": "A username to send messages as",
          "editable": "text",
          "label": "Username",
          "listener": true
        },
        "room": {
          "description": "A chat room to send messages to",
          "editable": "text",
          "label": "Room",
          "listener": true
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  position: relative;
}

:host header {
  background: #333;
  padding: 1.5rem;
  color: white;
}

:host header h1 {
  text-align: left;
  font-size: 1.6rem;
  color: #DDD;
  font-weight: 400;
}

:host header .room-name-wrapper {
  float: right;
  color: #999;
  font-size: 1.4rem;
}

:host ul {
  margin: 0;
  padding: 1rem 1.5rem;
  list-style-type: none;
  border-top: 1px solid #ccc;
  height: 200px;
  top: 7.5rem;
  bottom: 0;
  left: 1rem;
  right: 1rem;
  overflow-y: auto;
  overflow-x: hidden;
}

:host li {
  font-size: 1.2rem;
  font-family: "FiraSans", sans-serif;
  padding: 0.1rem 0rem;
  color: #777;
}

:host li:last-child {
  border: none;
}
</style>
    <header>
      <h1><span id="chatRoom"></span><span class="room-name-wrapper"><span id="roomName"></span> <span class="room-name">{{room}}</span></span></h1>
    </header>
    <ul id="messages"></ul>
    <shadow></shadow>
  </template>
  <script>
    var defaultAppID = 'appmaker';

    Polymer("ceci-chat-window", {
      "chatRoom": "Chat Room",
      "roomName": "Room:",
      ready: function() {
        this.super();

        this.$.chatRoom.textContent = this.gettext("ceci-chat-window/chatRoom") || this.chatRoom;
        this.$.roomName.textContent = this.gettext("ceci-chat-window/roomName") || this.roomName;

        if (!window.Firebase) {
          var script = document.createElement("script");
          script.onload = this._connect.bind(this);
          script.src = "https://cdn.firebase.com/v0/firebase.js";
          document.head.appendChild(script);
          return;
        }

        this._db = null;
        this._connect();
      },
      clear: function () {
        this._clear();
      },
      usernameChanged: function(oldValue, newValue) {
        if (oldValue && oldValue != 'null'){
          this._sendMessage(
            oldValue + " " +
            this.gettext("ceci-chat-window/is now known as") + " " +
            newValue
          );
        }
      },
      roomChanged: function(oldValue, newValue) {
        this._connect();
      },
      sendMessage: function(event) {
        this._sendMessage(this.username + ": " + event);
      },
      _clear: function() {
        if (!window.Firebase) {
          return;
        }

        this._db.remove();
      },
      _connect: function() {
        if (!window.Firebase) {
          return;
        }
        if(this.__prevQuery) {
          this.__prevQuery.off("child_added");
          this.__prevQuery.off("child_removed");
        }

        this._db = new Firebase("https://appmaker.firebaseio.com/" + defaultAppID + "/chat-window/" + this.room);

        var query = this._db.limit(20);
        query.on("child_added", function(snapshot) {
          var li = document.createElement("li");
          li.textContent = snapshot.val().message;
          li.setAttribute("id", "chat-message-" + snapshot.name().substr(1));
          this.$.messages.appendChild(li);
          this.broadcast('messageposted', snapshot.val().message);
          this.$.messages.scrollTop = this.$.messages.scrollHeight;
        }.bind(this));
        query.on("child_removed", function(snapshot) {
          var messageElement = document.getElementById("chat-message-" + snapshot.name().substr(1));
          if (messageElement) {
            messageElement.remove();
            this.$.messages.scrollTop = this.$.messages.scrollHeight;
          }
        }.bind(this));
        this.__prevQuery = query;
      },
      _sendMessage: function(msg) {
        if (!window.Firebase) {
          return;
        }

        this._db.push({message: msg});
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-combiner" extends="ceci-element" assetpath="component-combiner/">
  <template>
    <style>:host, :host .combiner {
  display: block;
  width: 100%;
  height: 50px;
}

:host .combiner {
  background: url(component-combiner/thumbnail.png) black no-repeat center;
}
</style>
    <div class="combiner"></div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["component-combiner", "combiner"],
      "thumbnail": "./thumbnail.png",
      "description": "Combines signals from multiple channels and broadcasts them on a single channel.",
      "name": "Channel Combiner",
      "broadcasts": {
        "output": {
          "label": "Output",
          "description": "Repeats input",
          "default": true
        }
      },
      "listeners": {
        "input1": {
          "description": "Input 1",
          "label": "Input 1",
          "default": "green"
        },
        "input2": {
          "description": "Input 2",
          "label": "Input 2",
          "default": "red"
        },
        "input3": {
          "description": "Input 3",
          "label": "Input 3"
        },
        "input4": {
          "description": "Input 4",
          "label": "Input 4"
        },
        "input5": {
          "description": "Input 5",
          "label": "Input 5"
        },
        "input6": {
          "description": "Input 6",
          "label": "Input 6"
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-combiner', {
      ready: function () {
        this.super();

        var i = 0;
        while (i++ < Object.keys(this.ceci.listeners).length) {
          this['input' + i] = this.input;
        }
      },
      input: function(val) {
        this.broadcast('output', val);
      }
    });
  </script>
</polymer-element>

</div>
<div hidden><polymer-element name="ceci-counter" extends="ceci-element" attributes="unit increment value startingvalue" startinvalue="0" increment="1" assetpath="component-counter/">
  <ceci-definition>
    {
      "name": "Counter",
      "thumbnail": "./thumbnail.png",
      "description": "Counts up and down by any increment.",
      "broadcasts": {
        "currentCount": {
          "label": "Current Count",
          "description": "Broadcasts the current count."
        }
      },
      "listeners": {
        "countUp": {
          "description": "Increment the total by the increment value",
          "label": "Count Up!",
          "default" : true
        },
        "countDown": {
          "description": "Decrement the total by the increment value",
          "label": "Count Down"
        },
        "resetCount": {
          "description": "Reset the total to 0.",
          "label": "Reset Count"
        },
        "setValue": {
          "description": "Set the counter value to a specific number.",
          "label": "Set Value"
        },
        "setIncrement": {
          "description": "Set the counter increment to a specific number.",
          "label": "Set Increment"
        }
      },
      "attributes": {
        "unit": {
          "description": "Name for items which are being counted.",
          "label": "Unit",
          "editable": "text"
        },
        "increment": {
          "description": "Count up or down with this number.",
          "label": "Increment By",
          "editable": "number",
          "min" : 1
        },
        "startingvalue": {
          "description": "The starting value of the counter.",
          "label": "Starting Value",
          "editable": "number",
          "min" : 1
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .counter {
  text-align: center;
  font-size: 16px;
  padding: 8px 0px;
  background: #DDD;
  color: #666;
}

:host .counter .count-wrapper {
  display: inline-block;
  background: white;
  padding: 5px 12px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  border: solid 1px #CCC;
  border-width: 1px 1px 2px 1px;
}
</style>
    <div class="counter">
      <div class="count-wrapper">
        <span class="count">{{value}}</span>
        <span class="count-label">{{displayUnit}}</span>
      </div>
    </div>
    <shadow></shadow>
  </template>
  <tags>starter,math</tags>
    <script>
      Polymer("ceci-counter", {
        ready: function() {
          this.increment = Number(this.increment) || 1;
          this.startingvalue = Number(this.startingvalue) || 0;
          this.value = Number(this.value) || 0;
          this.super();
          this.displayUnit = this.unit;
          this.updateUnit();
        },
        value: 0,
        increment: 1,
        unit: 'Sprocket',
        incrementChanged: function(oldValue, newValue) {
          this.increment = Number(this.increment) || 0;
          console.log("new increment " + this.increment);
        },
        startingvalueChanged : function(){
          this.value = this.startingvalue;
        },
        updateUnit : function(){
          if (this.unit) {
            var unit = this.unit.trim();
            if (unit.length > 0) {

              var pluralChar = "";
              if((Number(this.value) !== 1) && (unit[unit.length - 1] !== 's')){
                pluralChar = "s";
              }

              if(unit[unit.length - 1] === unit[unit.length - 1].toUpperCase()) {
                pluralChar = pluralChar.toUpperCase()
              }
              this.displayUnit = " " + unit + pluralChar;
            }
          }
        },
        unitChanged: function() {
          this.updateUnit();
        },
        valueChanged: function() {
          this.broadcast("currentCount", this.value);
          this.updateUnit();
        },
        setIncrement : function(value){
          this.increment = value;
        },
        setValue : function(value){
          this.value = value;
        },
        countUp: function() {
          this.value = Number(this.value) + Number(this.increment, 10);
        },
        countDown: function() {
          this.value = Number(this.value) - Number(this.increment, 10);
        },
        resetCount: function() {
          this.value = 0;
        }
      });
    </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-cowbell" attributes="bellcolor volume backgroundcolor" bellcolor="#FFFFFF" backgroundcolor="#4DB227" volume=".5" extends="ceci-element" assetpath="component-cowbell/">
  <ceci-definition>
    {
      "tags": ["music", "audio", "cowbell"],
      "thumbnail": "./thumbnail.png",
      "description": "Plays a cowbell.",
      "name": "Cowbell",
      "broadcasts": {},
      "listeners": {
        "kick": {
          "description": "Hits the cowbell!",
          "label": "More",
          "default": true
        }
      },
      "attributes": {
        "backgroundcolor": {
          "label": "Background Color",
          "editable": "color"
        },
        "volume": {
          "label": "Volume",
          "editable": "number",
          "min" : 0,
          "max" : 1
        },
        "bellcolor": {
          "label": "Cowbell Color",
          "description": "Color of the drum.",
          "editable": "color"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  background: orange;
}

:host #wrapper {
  height: 75px;
  display: block;
  cursor: pointer;
  overflow: hidden;
  width: 100%;
  position: relative;
}

:host #bell {
  position: absolute;
  left: calc(50% - 75px);
  width: 50px;
  top: -20px;
  border-bottom: 100px solid white;
  border-left: 50px solid transparent;
  border-right: 50px solid transparent;
}

:host .hit #bell {
  -webkit-transform: scale(1.2);
  -moz-transform: scale(1.2);
  transform: scale(1.2);
}

:host audio {
  display: none;
}
</style>
    <div id="wrapper" class="off" on-ceci-pressdown="{{kickon}}" on-ceci-pressup="{{kickoff}}">
      <div id="bell"></div>
    </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-cowbell', {
      audioBuffer: null,
      ready: function () {
        this.super();

        this.ctx = window.AudioContext || window.webkitAudioContext;

        if (!this.ctx) {
          console.error('Could not get AudioContext for kickdrum.');
          return;
        }

        this.ctx = new this.ctx();
        var that = this;
        var xhr = new XMLHttpRequest();
        xhr.open("GET", this.resolvePath('sounds/sound.mp3'), true);
        xhr.responseType = "arraybuffer";
        xhr.onload = function () {
          if (xhr.response.byteLength) {
            that.ctx.decodeAudioData(xhr.response, function(data) {
              that.audioBuffer = data;
            },
            function (e) {
              console.error('Error decoding the audio buffer for kickdrum.', arguments);
            });
          }
        };
        xhr.send();
      },
      kickon: function () {
        var src = this.ctx.createBufferSource();
        var gain = this.ctx.createGain();
        gain.gain.value = this.volume;
        src.buffer = this.audioBuffer;
        src.loop = false;
        src.connect(gain);
        gain.connect(this.ctx.destination);
        src.start(0);
        this.$.wrapper.classList.add("hit");
      },
      kick : function(){
        this.kickon();
        var that = this;
        window.setTimeout(function(){
          that.kickoff();
        },100);
      },
      kickoff : function(){
        this.$.wrapper.classList.remove("hit");
      },
      backgroundcolorChanged: function (oldValue, newValue) {
        this.$.wrapper.style.background = newValue;
      },
      bellcolorChanged: function (oldValue, newValue) {
        this.$.bell.style.borderBottom = "solid 100px " + newValue;
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-daily-counter" collectionname="times" extends="ceci-element" attributes="unit increment collectionname" assetpath="component-daily-counter/">
  <ceci-definition>
    {
      "name": "Daily Counter",
      "thumbnail": "./thumbnail.png",
      "description": "Counts daily progress toward your goals. Tells you how much time you have left and resets at the end of the day.",
      "broadcasts": {
        "currentCount": {
          "label": "Current Count",
          "description": "Broadcasts the current count."
        }
      },
      "listeners": {
        "countUp": {
          "description": "Increment the total by the increment value",
          "label": "Count Up!",
          "default" : false
        },
        "countDown": {
          "description": "Decrement the total by the increment value",
          "label": "Count Down"
        },
        "resetCount": {
          "description": "Reset the total to 0.",
          "label": "Reset Count"
        }
      },
      "attributes": {
        "unit": {
          "description": "Name for items which are being counted.",
          "label": "Unit",
          "editable": "text"
        },
        "collectionname": {
          "description": "The name of the collection to store the value",
          "label": "Collection Name",
          "editable": "text"
        },
        "increment": {
          "description": "Count up or down with this number.",
          "label": "Increment By",
          "editable": "number",
          "min" : 1
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  background: #DDD;
  text-align: center;
  padding: 5px ;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}

:host .timer {
  text-align: center;
  font-size: 16px;
  padding: 5px 0;
}

:host .counter {
  font-size: 16px;
  color: #666;
  margin: 5px auto;
  text-align: center;
  padding: 10px 12px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  border: 1px #CCC solid;
  border-bottom-width: 2px;
  background: white;
  display: inline-block;
  font-weight: bold;
}
</style>
      <div class="timer">
        <span>{{dayCountDown}}</span>
        <span class="label">left Today</span>
      </div>
      <div class="counter">
        <span>{{value}}</span>
        <span class="label">{{displayUnit}}</span>
      </div>
    <shadow></shadow>
  </template>
  <tags></tags>
  <script>
    Polymer("ceci-daily-counter", {
      ready: function() {
        this.dayCountDown = '00:00';
        this.increment = Number(this.increment) || 1;
        this.value = this.getTodaysValue() || 0;
        this.displayUnit = this.unit;
        this.updateUnit();
        var t = this;
        this.countdownInterval = setInterval(function(){
          t.updateCountdown();
        }, 2000);
        t.updateCountdown();
        this.super();
      },
      value: 0,
      increment: 1,
      unit: 'Times',
      updateCountdown: function(){
        function minutesUntilMidnight() {
          var midnight = new Date();
          midnight.setHours(24);
          midnight.setMinutes(0);
          midnight.setSeconds(0);

          var hours = Math.floor(
            (midnight.getTime() - new Date().getTime()) / 1000 / 60 / 60
          );

          if (hours < 10) {
            hours = "0" + hours;
          }

          var minutes = Math.ceil(
            (midnight.getTime() - new Date().getTime()) / 1000 / 60 % 60
          );

          if (minutes < 10) {
            minutes = "0" + minutes;
          }

          return [hours, minutes].join(":");
        }

        this.dayCountDown = minutesUntilMidnight();
      },
      incrementChanged: function(oldValue, newValue) {
        this.increment = Number(this.increment) || 0;
      },
      updateUnit : function(){
        if (this.unit) {
          var unit = this.unit.trim();
          if (unit.length > 0) {

            var pluralChar = "";
            if((Number(this.value) !== 1) && (unit[unit.length - 1] !== 's')){
              pluralChar = "s";
            }

            if(unit[unit.length - 1] === unit[unit.length - 1].toUpperCase()) {
              pluralChar = pluralChar.toUpperCase()
            }
            this.displayUnit = " " + unit + pluralChar;
          }
        }
      },
      unitChanged: function() {
        this.updateUnit();
      },
      getTodaysValue: function(){
        var collection = localStorage['hack-collection-' + this.collectionname];

        // This will go away when collections are redone
        if (!collection){
          localStorage['hack-collection-' + this.collectionname] = JSON.stringify({});
        }

        var data = JSON.parse(localStorage['hack-collection-' + this.collectionname]);

        return data[new Date().toLocaleDateString()];
      },
      storeValue: function(val) {
        var collection = localStorage['hack-collection-' + this.collectionname];

        // This will go away when collections are redone
        if (!collection){
          localStorage['hack-collection-' + this.collectionname] = JSON.stringify({});
        }

        var data = JSON.parse(localStorage['hack-collection-' + this.collectionname]);

        data[new Date().toLocaleDateString()] = val;
        localStorage['hack-collection-' + this.collectionname] = JSON.stringify(data);
      },
      valueChanged: function() {
        this.broadcast("currentCount", this.value);
        this.storeValue(this.value);
        this.updateUnit();
      },
      countUp: function() {
        this.value = Number(this.value) + Number(this.increment, 10);
      },
      countDown: function() {
        this.value = Number(this.value) - Number(this.increment, 10);
      },
      resetCount: function() {
        this.value = 0;
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-double-button" attributes="textcolor rightbuttoncolor leftbuttoncolor leftlabel rightlabel value" value="Click" extends="ceci-element" leftlabel="OK" rightlabel="Cancel" textcolor="#ffffff" leftbuttoncolor="#4DB227" rightbuttoncolor="#bd400a" assetpath="component-double-button/">
  <ceci-definition>
    {
      "tags": ["button", "click", "tap"],
      "thumbnail": "./thumbnail.png",
      "description": "Responds to your clicks and taps.",
      "name": "Double Button",
      "broadcasts": {
        "clickleft": {
          "label": "Left Button",
          "description": "Occurs when left button is clicked.",
          "default": "blue"
        },
        "clickright": {
          "label": "Right Button",
          "description": "Occurs when right button is clicked.",
          "default": "blue-two"
        }
      },
      "listeners": {},
      "attributes": {
        "leftlabel": {
          "label": "Left Button Label",
          "description": "Text shown on the left button.",
          "editable": "text"
        },
        "leftbuttoncolor": {
          "label": "Left Button Color",
          "description": "Background color of the left button.",
          "editable": "color"
        },
        "rightlabel": {
          "label": "Right Button Label",
          "description": "Text shown on the right button.",
          "editable": "text"
        },
        "rightbuttoncolor": {
          "label": "Right Button Color",
          "description": "Background color of the right button.",
          "editable": "color"
        },
        "textcolor": {
          "label": "Text Color",
          "description": "Color of the text on the button's label.",
          "editable": "color"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  word-spacing: -1;
}

:host .buttons-wrapper {
  line-height: 0px;
  font-size: 0px;
}

:host .button-wrapper {
  position: relative;
  display: inline-block;
  width: 50%;
}

:host .button {
  cursor: pointer;
  border-bottom: 2px solid rgba(0,0,0,.1);
  display: block;
  text-align: center;
  padding: 12px 0 10px 0;
  text-overflow: ellipsis;
  overflow: hidden;
  font-weight: 300;
  font-size: 1.8rem;
  line-height: 1.8rem;
  width: 100%;
  display: inline-block;
  -webkit-box-sizing: border-box;
}

:host #leftbutton {
 border-right: 2px solid rgba(0,0,0,.1);
}

:host #rightbutton {
  border-left: 2px solid rgba(255,255,255,.1);
}

:host .overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  opacity: 0;
}

:host .active-overlay {
  background: black;
}

:host .hover-overlay {
  background: white;
}

:host .button-wrapper:hover .hover-overlay {
  opacity: .1;
}

:host .button-wrapper:active .active-overlay {
  opacity: .1;
}
:host .button-wrapper:active .hover-overlay {
  opacity: 0;
}

:host .button-wrapper:active .button {
  border-top: solid 2px rgba(0,0,0,.1);
  border-bottom: none;
}

:host button {
  border: none;
}
</style>
    <div class="buttons-wrapper">
      <div class="button-wrapper" on-ceci-pressdown="{{clickleft}}">
        <div class="button" id="leftbutton">{{leftlabel}}</div>
        <div class="overlay active-overlay"></div>
        <div class="overlay hover-overlay"></div>
      </div>
      <div class="button-wrapper" on-ceci-pressdown="{{clickright}}">
        <div class="button" id="rightbutton">{{rightlabel}}</div>
        <div class="overlay active-overlay"></div>
        <div class="overlay hover-overlay"></div>
      </div>
    </div>
    <shadow></shadow></template>
  <script>
    Polymer('ceci-double-button', {
      ready: function () {
        this.super();
        var that = this;
      },
      clickleft: function () {
        this.broadcast('clickleft', this.getAttribute('value'));
      },
      clickright: function () {
        this.broadcast('clickright', this.getAttribute('value'));
      },
      textcolorChanged: function (oldValue, newValue) {
        this.$.leftbutton.style.color = newValue;
        this.$.rightbutton.style.color = newValue;
      },
      leftbuttoncolorChanged: function (oldValue, newValue) {
        this.$.leftbutton.style.backgroundColor = newValue;
      },
      rightbuttoncolorChanged: function (oldValue, newValue) {
        this.$.rightbutton.style.backgroundColor = newValue;
      }

    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-fireworks" attributes="fireworksound" extends="ceci-element" fireworksound="Kaboom!" assetpath="component-fireworks/">
  <template>
    <style>:host {
  display: block;
  background: black;
}

:host .app-fireworks {
  background-color: #0e1012;
  display: inline-block;
}

:host canvas {
  height: 100%;
  width: 100%;
}
</style>
    <div class="fireworks-wrapper">
      <canvas id="canvas" class="fireworks-canvas" on-click="{{click}}">Canvas is not supported in your browser.</canvas>
    </div>
    <shadow></shadow>
  </template>
  <ceci-definition>
      {
        "tags": ["animated", "starter", "fun"],
        "thumbnail": "./thumbnail.png",
        "description": "Celebrates with fireworks whenever input is received.",
        "name": "Fireworks",
        "broadcasts": {
          "kaboom": {
            "label": "Kaboom",
            "description": "Occurs when a rocket explodes"
          }
        },
        "listeners": {
          "shootRocket": {
            "description": "Causes a rocket to launch",
            "label": "Shoot Rocket",
            "default": true
          },
          "shootThisManyRockets": {
            "description": "Shoot a number of rockets",
            "label": "Shoot This Many Rockets"
          }
        },
        "attributes": {
          "fireworksound": {
            "label": "Firework Sound",
            "description": "Tell the fireworks what to broadcast every shot.",
            "editable": "text",
            "listener": true
          }
        }
      }
    </ceci-definition>
  <script>
    Polymer('ceci-fireworks', {
      ready: function () {
        this.super();
        // when animating on canvas, it is best to use requestAnimationFrame instead of setTimeout or setInterval
        // not supported in all browsers though and sometimes needs a prefix, so we need a shim
        window.requestAnimFrame = ( function() {
          return window.requestAnimationFrame ||
                window.webkitRequestAnimationFrame ||
                window.mozRequestAnimationFrame ||
                function( callback ) {
                  window.setTimeout( callback, 1000 / 60 );
                };
        })();

        this.setAttribute('fireworksound', this.getAttribute("fireworksound") || 'Kapow!');

        // now we will setup our basic variables for the demo
        var canvas = this.$.canvas,
            ctx = canvas.getContext( '2d' ),

            // firework collection
            fireworks = [],
            // particle collection
            particles = [],
            // when launching fireworks with a click, too many get launched at once without a limiter, one launch per 5 loop ticks
            limiterTotal = 5,
            limiterTick = 0,
            mousedown = false,
            // mouse x coordinate,
            mx,
            // mouse y coordinate
            my;

        // starting hue
        this.hue = 120;
        // this will time the auto launches of fireworks, one launch per 80 loop ticks
        this.timerTotal = 80,
        this.timerTick = 0,

        this.ctx = ctx;

        // now we are going to setup our function placeholders for the entire demo

        // get a random number within a range
        function random( min, max ) {
          return Math.random() * ( max - min ) + min;
        }
        this.random = random;

        // calculate the distance between two points
        function calculateDistance( p1x, p1y, p2x, p2y ) {
          var xDistance = p1x - p2x,
              yDistance = p1y - p2y;
          return Math.sqrt( Math.pow( xDistance, 2 ) + Math.pow( yDistance, 2 ) );
        }

        var t = this;
        // create firework
        function Firework( sx, sy, tx, ty, hue ) {
          // actual coordinates
          this.x = sx;
          this.y = sy;
          // starting coordinates
          this.sx = sx;
          this.sy = sy;
          // target coordinates
          this.tx = tx;
          this.ty = ty;
          this.hue = hue;
          // distance from starting point to target
          this.distanceToTarget = calculateDistance( sx, sy, tx, ty );
          this.distanceTraveled = 0;
          // track the past coordinates of each firework to create a trail effect, increase the coordinate count to create more prominent trails
          this.coordinates = [];
          this.coordinateCount = 3;
          // populate initial coordinate collection with the current coordinates
          while( this.coordinateCount-- ) {
            this.coordinates.push( [ this.x, this.y ] );
          }
          this.angle = Math.atan2( ty - sy, tx - sx );
          this.speed = 2;
          this.acceleration = 1.05;
          this.brightness = random( 50, 70 );
        }
        // update firework
        Firework.prototype.update = function( index ) {
          // remove last item in coordinates array
          this.coordinates.pop();
          // add current coordinates to the start of the array
          this.coordinates.unshift( [ this.x, this.y ] );

          // speed up the firework
          this.speed *= this.acceleration;

          // get the current velocities based on angle and speed
          var vx = Math.cos( this.angle ) * this.speed,
              vy = Math.sin( this.angle ) * this.speed;
          // how far will the firework have traveled with velocities applied?
          this.distanceTraveled = calculateDistance( this.sx, this.sy, this.x + vx, this.y + vy );

          // if the distance traveled, including velocities, is greater than the initial distance to the target, then the target has been reached
          if( this.distanceTraveled >= this.distanceToTarget ) {
            t.broadcast('kaboom', t.getAttribute('fireworksound'));
            createParticles( this.tx, this.ty, this.hue );
            // remove the firework, use the index passed into the update function to determine which to remove
            fireworks.splice( index, 1 );
          } else {
            // target not reached, keep traveling
            this.x += vx;
            this.y += vy;
          }
        }
        // draw firework
        Firework.prototype.draw = function() {
          ctx.beginPath();
          // move to the last tracked coordinate in the set, then draw a line to the current x and y
          ctx.moveTo( this.coordinates[ this.coordinates.length - 1][ 0 ], this.coordinates[ this.coordinates.length - 1][ 1 ] );
          ctx.lineTo( this.x, this.y );
          ctx.strokeStyle = 'hsl(' + this.hue + ', 100%, ' + this.brightness + '%)';
          ctx.stroke();

          ctx.beginPath();
          // draw the target for this firework with a pulsing circle
          ctx.arc( this.tx, this.ty, this.targetRadius, 0, Math.PI * 2 );
        }
        // create particle
        function Particle( x, y, hue ) {
          this.x = x;
          this.y = y;
          // track the past coordinates of each particle to create a trail effect, increase the coordinate count to create more prominent trails
          this.coordinates = [];
          this.coordinateCount = 5;
          while( this.coordinateCount-- ) {
            this.coordinates.push( [ this.x, this.y ] );
          }
          // set a random angle in all possible directions, in radians
          this.angle = random( 0, Math.PI * 2 );
          this.speed = random( 1, 10 );
          // friction will slow the particle down
          this.friction = 0.95;
          // gravity will be applied and pull the particle down
          this.gravity = 1;
          // set the hue to a random number +-20 of the overall hue variable
          this.hue = random( hue - 20, hue + 20 );
          this.brightness = random( 50, 80 );
          this.alpha = 1;
          // set how fast the particle fades out
          this.decay = random( 0.015, 0.03 );
        }
        // update particle
        Particle.prototype.update = function( index ) {
          // remove last item in coordinates array
          this.coordinates.pop();
          // add current coordinates to the start of the array
          this.coordinates.unshift( [ this.x, this.y ] );
          // slow down the particle
          this.speed *= this.friction;
          // apply velocity
          this.x += Math.cos( this.angle ) * this.speed;
          this.y += Math.sin( this.angle ) * this.speed + this.gravity;
          // fade out the particle
          this.alpha -= this.decay;
          // remove the particle once the alpha is low enough, based on the passed in index
          if( this.alpha <= this.decay ) {
            particles.splice( index, 1 );
          }
        }
        // draw particle
        Particle.prototype.draw = function() {
          ctx.beginPath();
          // move to the last tracked coordinates in the set, then draw a line to the current x and y
          ctx.moveTo( this.coordinates[ this.coordinates.length - 1 ][ 0 ], this.coordinates[ this.coordinates.length - 1 ][ 1 ] );
          ctx.lineTo( this.x, this.y );
          ctx.strokeStyle = 'hsla(' + this.hue + ', 100%, ' + this.brightness + '%, ' + this.alpha + ')';
          ctx.stroke();
        }
        // create particle group/explosion
        function createParticles( x, y, hue ) {
          // increase the particle count for a bigger explosion, beware of the canvas performance hit with the increased particles though
          var particleCount = 30;
          while( particleCount-- ) {
            particles.push( new Particle( x, y, hue ) );
          }
        }
        this.Firework = Firework;
        this.Particle = Particle;
        this.fireworks = fireworks;
        this.particles = particles;

        (function loop() {
          // this function will run endlessly with requestAnimationFrame
          requestAnimFrame( loop );
          // increase the hue to get different colored fireworks over time
          t.hue += t.random(0,20)
          // normally, clearRect() would be used to clear the canvas
          // we want to create a trailing effect though
          // setting the composite operation to destination-out will allow us to clear the canvas at a specific opacity, rather than wiping it entirely
          t.ctx.globalCompositeOperation = 'destination-out';
          // decrease the alpha property to create more prominent trails
          t.ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
          t.ctx.fillRect( 0, 0, t.cw, t.ch );
          // change the composite operation back to our main mode
          // lighter creates bright highlight points as the fireworks and particles overlap each other
          t.ctx.globalCompositeOperation = 'lighter';
          // loop over each firework, draw it, update it
          var i = t.fireworks.length;
          while( i-- ) {
            t.fireworks[ i ].draw();
            t.fireworks[ i ].update( i );
          }
          // loop over each particle, draw it, update it
          var i = t.particles.length;
          while( i-- ) {
            t.particles[ i ].draw();
            t.particles[ i ].update( i );
          }
        })();

      },
      launchRocket: function() {
        this.fireworks.push( new this.Firework( this.cw / 2, this.ch,
        this.random( 0, this.cw ), this.random( 0, this.ch / 2 ), this.hue));
      },
      shootRocket: function (count, channel) {
        this.launchRocket();
      },
      shootThisManyRockets: function (count, channel) {
        var intRegex = /^\d+$/;
        if (intRegex.test(count)) {

          var n = Number(count);
          if (n > 15){
            n = 15;
          }
          for (var i=0; i < n; i++) {
            this.launchRocket();
          }
        } else {
          this.launchRocket();
        }
      },
      attached: function() {
        var rect = this.getBoundingClientRect();
        this.$.canvas.width = this.cw = rect.width;
        this.$.canvas.height = this.ch = rect.width;
        this.super();
      }
    });
  </script>
</polymer-element>

</div>
<div hidden><polymer-element name="ceci-game-controller" extends="ceci-element" attributes="leftbuttonvalue upbuttonvalue downbuttonvalue rightbuttonvalue selectbuttonvalue startbuttonvalue abuttonvalue bbuttonvalue" leftbuttonvalue="left" upbuttonvalue="up" downbuttonvalue="down" rightbuttonvalue="right" selectbuttonvalue="select" startbuttonvalue="start" abuttonvalue="a" bbuttonvalue="b" assetpath="component-game-controller/">
  <ceci-definition>
    {
      "name": "Game Controller",
      "thumbnail": "./thumbnail.png",
      "description": "A classic NES game controller",
      "broadcasts": {
        "press": {
          "label": "Any Button Pressed",
          "description": "Any button was pressed",
          "default": true
        },
        "release": {
          "label": "Any Button Released",
          "description": "Any button was released"
        },
        "left": {
          "label": "Left Button",
          "description": "Left button was pressed"
        },
        "up": {
          "label": "Up Button",
          "description": "Up button was pressed"
        },
        "down": {
          "label": "Down Button",
          "description": "Down button was pressed"
        },
        "right": {
          "label": "Right Button",
          "description": "Right button was pressed"
        },
        "select": {
          "label": "Select Button",
          "description": "Select button was pressed"
        },
        "start": {
          "label": "Start Button",
          "description": "Start button was pressed"
        },
        "abutton": {
          "label": "A Button",
          "description": "A button was pressed"
        },
        "bbutton": {
          "label": "B Button",
          "description": "B button was pressed"
        },
        "konami": {
          "label": "Konami code triggered!",
          "description": "A classic easter egg to add to your app"
        }
      },
      "attributes": {
        "leftbuttonvalue": {
          "label": "Left Button Value",
          "description": "Value to send when this button is clicked",
          "editable": "text"
        },
        "upbuttonvalue": {
          "label": "Up Button Value",
          "description": "Value to send when this button is clicked",
          "editable": "text"
        },
        "downbuttonvalue": {
          "label": "Down Button Value",
          "description": "Value to send when this button is clicked",
          "editable": "text"
        },
        "rightbuttonvalue": {
          "label": "Right Button Value",
          "description": "Value to send when this button is clicked",
          "editable": "text"
        },
        "selectbuttonvalue": {
          "label": "Select Button Value",
          "description": "Value to send when this button is clicked",
          "editable": "text"
        },
        "startbuttonvalue": {
          "label": "Start Button Value",
          "description": "Value to send when this button is clicked",
          "editable": "text"
        },
        "abuttonvalue": {
          "label": "A Button Value",
          "description": "Value to send when this button is clicked",
          "editable": "text"
        },
        "bbuttonvalue": {
          "label": "B Button Value",
          "description": "Value to send when this button is clicked",
          "editable": "text"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  position: relative;
}

:host .game-controller {
  height: 120px;
  border: 5px solid lightgrey;
  background-color: lightgrey;
  border-top-width: 15px;
  border-radius: 5px;
}

:host .game-controller:after {
  content: "";
  display: block;
  border-radius: 5px;
  background-color: black;
  height: 100%;
}

:host .d-pad-container {
  position: absolute;
  left: 0px;
  top: 0px;
  bottom: 0px;
  width: 33%;
}

:host .start-select-container {
  position: absolute;
  left: 33%;
  top: 0px;
  bottom: 0px;
  width: 33%;
}

:host .a-b-buttons-container {
  position: absolute;
  right: 0;
  top: 0px;
  bottom: 0px;
  width: 33%;
}

:host .d-pad {
  position: absolute;
  left: 0;
  right: 0;
  height: 50%;
  bottom: 20%;
}

:host .left-button {
  position: absolute;
  border-radius: 5px 0 0 5px;
  border-style: solid;
  border-color: lightgrey;
  height: 20px;
  width: 20px;
  border-width: 5px;
  border-right-width: 0;
  left: 15px;
  top: 20px;
  cursor: pointer;
}
:host .up-button {
  position: absolute;
  border-style: solid;
  border-radius: 5px 5px 0 0;
  border-color: lightgrey;
  height: 20px;
  width: 20px;
  border-width: 5px;
  border-bottom-width: 0;
  top: 0;
  left: 35px;
  cursor: pointer;
}
:host .down-button {
  position: absolute;
  border-radius: 0 0 5px 5px;
  border-style: solid;
  border-color: lightgrey;
  height: 20px;
  width: 20px;
  border-width: 5px;
  border-top-width: 0;
  bottom: 0;
  left: 35px;
  cursor: pointer;
}
:host .right-button {
  position: absolute;
  border-radius: 0 5px 5px 0;
  border-style: solid;
  border-color: lightgrey;
  height: 20px;
  width: 20px;
  border-width: 5px;
  border-left-width: 0;
  right: 17px;
  top: 20px;
  cursor: pointer;
}

:host .start-select {
  position: absolute;
  left: 0;
  right: 0;
  background-color: lightgrey;
  border-radius: 5px;
  height: 30%;
  bottom: 20%;
}

:host .select-button {
  background-color: black;
  border-radius: 5px;
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  right: 50%;
  margin: 16% 5% 16% 10%;
  cursor: pointer;
}

:host .start-button {
  background-color: black;
  border-radius: 5px;
  position: absolute;
  left: 50%;
  top: 0;
  bottom: 0;
  right: 0;
  margin: 16% 10% 16% 5%;
  cursor: pointer;
}

:host .a-b-buttons {
  position: absolute;
  left: 0;
  right: 0;
  height: 30%;
  bottom: 20%;
}

:host .a-button {
  background-color: #D3D3D3;
  border-radius: 5px;
  position: absolute;
  left: 0px;
  top: 0px;
  bottom: 0px;
  margin: 0px 4%;
  width: 40%;
  cursor: pointer;
}

:host .b-button {
  background-color: #D3D3D3;
  border-radius: 5px;
  position: absolute;
  left: 43%;
  top: 0px;
  bottom: 0px;
  margin: 0px 5%;
  width: 40%;
  cursor: pointer;
}

:host .a-button:after,
:host .b-button:after {
  content: "";
  display: block;
  border-radius: 50%;
  background-color: red;
  top: 10%;
  bottom: 10%;
  left: 10%;
  right: 10%;
  position: absolute;
}

</style>
    <div class="game-controller">
      <div class="d-pad-container">
        <div class="d-pad">
          <div class="left-button" on-mousedown="{{onMouseDown}}" on-mouseup="{{onMouseUp}}" on-touchstart="{{onTouchStart}}" on-touchend="{{onTouchEnd}}" on-click="{{leftClicked}}"></div>
          <div class="up-button" on-mousedown="{{onPress}}" on-mouseup="{{onRelease}}" on-touchstart="{{onTouchStart}}" on-touchend="{{onTouchEnd}}" on-click="{{upClicked}}"></div>
          <div class="down-button" on-mousedown="{{onPress}}" on-mouseup="{{onRelease}}" on-touchstart="{{onTouchStart}}" on-touchend="{{onTouchEnd}}" on-click="{{downClicked}}"></div>
          <div class="right-button" on-mousedown="{{onPress}}" on-mouseup="{{onRelease}}" on-touchstart="{{onTouchStart}}" on-touchend="{{onTouchEnd}}" on-click="{{rightClicked}}"></div>
        </div>
      </div>
      <div class="start-select-container">
        <div class="start-select">
          <div class="select-button" on-mousedown="{{onPress}}" on-mouseup="{{onRelease}}" on-touchstart="{{onTouchStart}}" on-touchend="{{onTouchEnd}}" on-click="{{selectClicked}}"></div>
          <div class="start-button" on-mousedown="{{onPress}}" on-mouseup="{{onRelease}}" on-touchstart="{{onTouchStart}}" on-touchend="{{onTouchEnd}}" on-click="{{startClicked}}"></div>
        </div>
      </div>
      <div class="a-b-buttons-container">
        <div class="a-b-buttons">
          <div class="a-button" on-mousedown="{{onPress}}" on-mouseup="{{onRelease}}" on-touchstart="{{onTouchStart}}" on-touchend="{{onTouchEnd}}" on-click="{{aButtonClicked}}"></div>
          <div class="b-button" on-mousedown="{{onPress}}" on-mouseup="{{onRelease}}" on-touchstart="{{onTouchStart}}" on-touchend="{{onTouchEnd}}" on-click="{{bButtonClicked}}"></div>
        </div>
      </div>
    </div>
    <shadow></shadow>
  </template>
  <tags>game</tags>
    <script>
      Polymer("ceci-game-controller", {
        ready: function() {
          this.super();

          // Looking for ↑ ↑ ↓ ↓ ← → ← → B A
          this.sequence = [];
          this.KONAMI_CODE = "up,up,down,down,left,right,left,right,b,a";

          var that = this;
          function detechTouch() {
            // Disable mouse events
            that.onMouseDown = function() {};
            that.onMouseUp = function() {};
            this.removeEventListener("touchstart", detechTouch);
          }
          this.addEventListener("touchstart", detechTouch);
        },
        onPress: function(e) {
          var button = e.target.classList[0].split("-")[0];
          this.sequence.push(button);

          if (this.sequence.length > 10) {
            this.sequence.shift();
          }

          if (this.sequence.join(",") == this.KONAMI_CODE) {
            this.broadcast("konami", this.KONAMI_CODE);
          }

          this.broadcast("press", e.target.classList[0]);
        },
        onRelease: function(e) {
          this.broadcast("release", e.target.classList[0]);
        },
        onMouseDown: function(e) {
          this.onPress(e);
        },
        onMouseUp: function(e) {
          this.onRelease(e);
        },
        onTouchStart: function(e) {
          this.onPress(e);
        },
        onTouchEnd: function(e) {
          this.onRelease(e);
        },
        leftClicked: function(e) {
          this.broadcast("left", this.leftbuttonvalue);
        },
        upClicked: function(e) {
          this.broadcast("up", this.upbuttonvalue);
        },
        downClicked: function(e) {
          this.broadcast("down", this.downbuttonvalue);
        },
        rightClicked: function(e) {
          this.broadcast("right", this.rightbuttonvalue);
        },
        selectClicked: function(e) {
          this.broadcast("select", this.selectbuttonvalue);
        },
        startClicked: function(e) {
          this.broadcast("start", this.startbuttonvalue);
        },
        aButtonClicked: function(e) {
          this.broadcast("abutton", this.abuttonvalue);
        },
        bButtonClicked: function(e) {
          this.broadcast("bbutton", this.bbuttonvalue);
        }
      });
    </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-header" attributes="header" extends="ceci-element" header="Header" assetpath="component-header/">
  <ceci-definition>
    {
      "tags": ["starter", "layout", "navigation"],
      "thumbnail": "./thumbnail.png",
      "description": "Displays a title for a page in your app and lets you navigate to that page.",
      "name": "Header",
      "broadcasts": {},
      "listeners": {
        "navigateHere": {
          "description": "navigateHere",
          "label": "Navigate Here"
        }
      },
      "attributes": {
        "header": {
          "label": "Header Label",
          "description": "Text for header label",
          "editable": "text",
          "listener": true
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

header {
  background-color: #212429;
  width: 100%;
  padding: 0;
  min-height: 5rem;
  line-height: 5rem;
  color: #FFF;
  font-size: 2.4rem;
  text-align: center;
}
</style>
    <header id="headerText">{{header}}</header>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-header', {
      ready: function () {
        this.super();
      },
      navigateHere: function () {
        var parent = this.parentNode;
        while (parent.nodeName !== "CECI-CARD") {
          parent = parent.parentNode;
        }
        if (parent) {
          parent.show();
        }
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-hot-potato" extends="ceci-element" attributes="min max" min="10" max="15" assetpath="component-hot-potato/">
  <ceci-definition>
    {
      "name" : "Hot Potato",
      "tags" : ["game","timer","time"],
      "thumbnail": "./thumbnail.png",
      "description": "Sends out a signal at a random time between two numbers.",
      "broadcasts": {
        "finish": {
          "label": "Game over",
          "description": "Sends a message that the game is over.",
          "default" : "true"
        }
      },
      "listeners": {
        "start": {
          "description": "Starts a new game.",
          "label": "New Game",
          "default" : "true"
        }
      },
      "attributes": {
        "min": {
          "description": "Minimum",
          "label": "Min",
          "editable": "number"
        },
        "max": {
          "description": "Maximum",
          "label": "Max",
          "editable": "number"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .timer {
  font-family: "FiraSans", sans-serif;
  cursor: pointer;
  position: relative;
  text-decoration: none;
  outline: none;
  border-top: 1px solid rgba(255,255,255,.3);
  border-bottom: 2px solid rgba(0,0,0,.2);
  background-color: #4DB227;
  text-align: center;
  display: block;
  padding-top: 5px;
  padding-bottom: 3px;
  text-overflow: ellipsis;
  overflow: hidden;
  border-radius: 0.2rem;
  font-weight: 600;
  font-size: 1.8rem;
  line-height: 3.8rem;
  color: #ffffff;
  width: 100%;
  margin: 0;
}

:host button {
  border: none;
}


</style>
    <div class="timer">{{diffTime}}</div>
    <shadow></shadow>
  </template>
  <tags>starter,math</tags>
    <script>
      Polymer("ceci-hot-potato", {
        ready: function() {
          this.super();
          this.startTime = 0;
          this.randomTimeBetweenRange = 0;
          this.diffTime = 0;
        },
        start: function() {
          this.startTime = Date.now();
          var max = Number(this.max);
          var min = Number(this.min);
          this.randomTimeBetweenRange = Math.floor(Math.random() * (max - min + 1)) + min;
          this.timer();
        },
        timer: function() {
          var nowTime = Date.now();
          this.diffTime = ( nowTime - this.startTime ) / 1000;
          var that = this;
          if (this.diffTime >= this.randomTimeBetweenRange) {
            this.broadcast("finish", this.diffTime);
            return;
          }
          setTimeout(function() {
            that.timer();
          }, 200);
        }
      });
    </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-image" source="//www.placekitten.com/150/150" attributes="height source" extends="ceci-element" height="160" assetpath="component-image/">
  <template>
    <style>:host {
  display: block;
  text-align: center;
  width: 100%;
}

:host img {
  margin: 0;
  padding: 0;
  display: inline-block;
}

:host .image-container {
  overflow: hidden;
  width: 100%;
  line-height: 0px;
}
</style>
    <div class="image-container">
      <img id="image">
    </div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["image", "photo", "picture"],
      "thumbnail": "./thumbnail.png",
      "name": "Image",
      "description": "Displays an image using a simple web URL or data-uri.",
      "broadcasts": {
        "click": {
          "label": "Click",
          "description": "Occurs when the image is clicked.",
          "default": false
        }
      },
      "listeners": {
        "setImageSource": {
          "description": "changes the image tags src attribute.",
          "label": "Set Image Source",
          "default": true
        }
      },
      "attributes": {
        "height": {
          "label": "Image Height",
          "description": "Image Height",
          "editable": "number",
          "listener": true
        },
        "source": {
          "label": "Image Source",
          "description": "The Image to Show",
          "editable": "text"
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-image', {
      ready: function () {
        this.super();

        var that = this;

        // User-configurable Properties
        // A component's user-configurable properties are stored as attributes.
        // Here they are set to a remembered value, or to a default starting.
        // The attribute name must match the name of the editable property in the 'editables' section.
        this.setAttribute("imageUrl", this.getAttribute("imageUrl") || "");
        this.img = this.$.image;
        this.img.style.height = this.getAttribute( "height" ) + "px";

        this.onclick = function () {
          that.broadcast("click", this.img.getAttribute( "src" ));
        };
      },
      setValue : function(v) {
        this.setImageSource(v);
      },
      sourceChanged : function(oldValue, newValue){
        this.setImageSource(this.source);
      },
      setImageSource : function (val) {
        this.source = val;
        this.img.setAttribute('src', val);
      },
      heightChanged: function( oldValue, newValue ) {
        this.img.style.height = ( newValue || newValue === 0 ? newValue : "160" ) + "px";
      }
    });
  </script>
</polymer-element>

</div>
<div hidden><polymer-element name="ceci-jazzhands" attributes="backgroundcolor" backgroundcolor="#ff9900" extends="ceci-element" assetpath="component-jazzhands/">
  <ceci-definition>
    {
      "tags": ["music", "instrument", "tap"],
      "thumbnail": "./thumbnail.png",
      "description": "Waves at you when pressed or input is received.",
      "name": "Jazz Hands",
      "broadcasts": {},
      "listeners": {
        "both": {
          "description": "Jazz both hands",
          "label": "Both Hands",
          "default": true
        },
        "left": {
          "description": "Jazz the left hand",
          "label": "Left Hand"
        },
        "right": {
          "description": "Jazz the right hand",
          "label": "Right Hand"
        }
      },
      "attributes": {
        "backgroundcolor": {
          "label": "Background Color",
          "editable": "color"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  background: orange;
}

:host #kick {
  height: 75px;
  display: block;
  cursor: pointer;
  overflow: hidden;
  width: 100%;
  position: relative;
}

:host #kick, :host #kick * {

}

:host .hand {
  height: 100px;
  width: 100px;
  background-size: 100px;
  position: absolute;

}

:host .one {
  left: 40px;
  top: -15px;
  background-image: url(/bundles/components/component-jazzhands/images/handone.png);
}

:host .two {
  right: 40px;
  background-image: url(/bundles/components/component-jazzhands/images/handtwo.png);
}

:host .both .one {
  -webkit-animation: waveone .6s linear;
  -moz-animation: waveone .6s linear;
}
:host .both .two {
  -webkit-animation: wavetwo .6s linear;
  -moz-animation: waveone .6s linear;
}



:host .left .one {
  -webkit-animation: waveone .6s linear;
  -moz-animation: wavetwo .6s linear;
}

:host .right .two {
  -webkit-animation: wavetwo .6s linear;
  -moz-animation: wavetwo .6s linear;
}



@-moz-keyframes waveone {
  0% {   -moz-transform: rotate(0deg);}
  10% {  -moz-transform: rotate(-12deg) scaleX(.9);}
  20% {  -moz-transform: rotate(0deg);}
  30% {  -moz-transform: rotate(-12deg) scaleX(.9);}
  40% {  -moz-transform: rotate(0deg);}
  50% {  -moz-transform: rotate(-12deg) scaleX(.9);}
  60% {  -moz-transform: rotate(0deg);}
  70% {  -moz-transform: rotate(-12deg) scaleX(.9);}
  80% {  -moz-transform: rotate(0deg);}
  90% {  -moz-transform: rotate(-12deg) scaleX(.9) ;}
  100% { -moz-transform: rotate(0deg);}
}

@-moz-keyframes wavetwo {
  0% {   -moz-transform: rotate(12deg) scaleX(.9);}
  10% {  -moz-transform: rotate(0deg);}
  20% {  -moz-transform: rotate(12deg) scaleX(.9);}
  30% {  -moz-transform: rotate(0deg);}
  40% {  -moz-transform: rotate(12deg) scaleX(.9);}
  50% {  -moz-transform: rotate(0deg);}
  60% {  -moz-transform: rotate(12deg) scaleX(.9);}
  70% {  -moz-transform: rotate(0deg);}
  80% {  -moz-transform: rotate(12deg) scaleX(.9);}
  90% {  -moz-transform: rotate(0deg);}
  100% { -moz-transform: rotate(12deg) scaleX(.9) ;}
}

@-webkit-keyframes waveone {
  0% { -webkit-transform: rotate(0deg);}
  10% { -webkit-transform: rotate(-12deg) scaleX(.9);}
  20% { -webkit-transform: rotate(0deg);}
  30% { -webkit-transform: rotate(-12deg) scaleX(.9);}
  40% { -webkit-transform: rotate(0deg);}
  50% { -webkit-transform: rotate(-12deg) scaleX(.9);}
  60% { -webkit-transform: rotate(0deg);}
  70% { -webkit-transform: rotate(-12deg) scaleX(.9);}
  80% { -webkit-transform: rotate(0deg);}
  90% { -webkit-transform: rotate(-12deg) scaleX(.9) ;}
  100% { -webkit-transform: rotate(0deg);}
}

@-webkit-keyframes wavetwo {
  0% { -webkit-transform: rotate(12deg) scaleX(.9);}
  10% { -webkit-transform: rotate(0deg);}
  20% { -webkit-transform: rotate(12deg) scaleX(.9);}
  30% { -webkit-transform: rotate(0deg);}
  40% { -webkit-transform: rotate(12deg) scaleX(.9);}
  50% { -webkit-transform: rotate(0deg);}
  60% { -webkit-transform: rotate(12deg) scaleX(.9);}
  70% { -webkit-transform: rotate(0deg);}
  80% { -webkit-transform: rotate(12deg) scaleX(.9);}
  90% { -webkit-transform: rotate(0deg);}
  100% { -webkit-transform: rotate(12deg) scaleX(.9) ;}
}


:host audio {
  display: none;
}
</style>
    <div id="kick" on-ceci-pressdown="{{both}}">
      <div id="two" class="hand two"></div>
      <div id="one" class="hand one"></div>
    </div>
    <!-- <audio id="kicksound" src="sounds/snare.mp3" preload=preload></audio> -->
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-jazzhands', {
      ready: function () {
        this.super();
        var that = this;
      },
      both : function(){
        this.kickoff();
        this.$.kick.classList.add("both");
      },
      left : function(){
        this.kickoff();
        this.$.kick.classList.add("left");
      },
      right : function(){
        this.kickoff();
        this.$.kick.classList.add("right");
      },
      kickoff : function(){
        this.$.kick.classList.remove("both");
        this.$.kick.classList.remove("right");
        this.$.kick.classList.remove("left");
        this.$.one.offsetWidth = this.$.one.offsetWidth;
        this.$.two.offsetWidth = this.$.two.offsetWidth;
      },
      backgroundcolorChanged: function (oldValue, newValue) {
        this.$.kick.style.background = newValue;
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-kickdrum" attributes="stickcolor backgroundcolor drumcolor volume" drumcolor="#d60e0e" stickcolor="#000000" backgroundcolor="#FFFFFF" volume=".5" extends="ceci-element" assetpath="component-kickdrum/">
  <ceci-definition>
    {
      "tags": ["kick", "drum"],
      "thumbnail": "./thumbnail.png",
      "description": "Plays a kickdrum.",
      "name": "Kick Drum",
      "broadcasts": {},
      "listeners": {
        "kick": {
          "description": "Hits the kick drum!",
          "label": "Kick",
          "default": true
        }
      },
      "attributes": {
        "stickcolor": {
          "label": "Stick Color",
          "editable": "color"
        },
        "volume": {
          "label": "Volume",
          "editable": "number",
          "min" : 0,
          "max" : 1
        },
        "backgroundcolor": {
          "label": "Background Color",
          "editable": "color"
        },
        "drumcolor": {
          "label": "Drum Color",
          "description": "Color of the drum.",
          "editable": "color"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host #kick {
  overflow: hidden;
  height: 75px;
  display: block;
  cursor: pointer;
  width: 100%;
  position: relative;
}

:host #drum {
  position: absolute;
  background: red;
  left: 0;
  top:0;
  height: 100%;
  width: 50%;
}

:host #face {
  position: absolute;
  background: white;
  width: 200px;
  height: 200px;
  top: calc(50% - 100px);
  -webkit-border-radius: 200px;
     -moz-border-radius: 200px;
          border-radius: 200px;
  right: -100px;
  -webkit-transform: scaleX(.5);
  -moz-transform: scaleX(.5);
  transform: scaleX(.5);
  border: solid 25px red;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

:host #stick {
  position: absolute;
  width: 8px;
  background: black;
  height: 50px;
  bottom: -4px;
  left: calc(50% + 5px);
  -webkit-transform-origin: bottom;
  -moz-transform-origin: bottom;
  transform-origin: bottom;
  -webkit-transform: rotate(15deg);
  -moz-transform: rotate(15deg);
  transform: rotate(15deg);
}

:host #ball {
  -webkit-border-radius: 20px;
  -moz-border-radius: 20px;
  border-radius: 20px;
  width: 20px;
  height: 20px;
  background: black;
  position: absolute;
  top: -4px;
  left: calc(50% - 10px);
}

:host .on #face {
  right: -95px;
}

:host .on #stick {
  -webkit-transform: rotate(0deg);
  -moz-transform: rotate(0deg);
  transform: rotate(0deg);
  left: 50%;
}

:host audio {
  display: none;
}
</style>
    <div id="kick" on-ceci-pressdown="{{kickon}}" on-ceci-pressup="{{kickoff}}">
      <div id="drum">
        <div id="face"></div>
      </div>
      <div id="stick">
        <div id="ball"></div>
      </div>
    </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-kickdrum', {
      audioBuffer: null,
      ready: function () {
        this.super();

        this.ctx = window.AudioContext || window.webkitAudioContext;

        if (!this.ctx) {
          console.error('Could not get AudioContext for kickdrum.');
          return;
        }

        this.ctx = new this.ctx();

        var that = this;

        var xhr = new XMLHttpRequest();
        xhr.open("GET", this.resolvePath('sounds/kick.ogg'), true);
        xhr.responseType = "arraybuffer";
        xhr.onload = function () {
          if (xhr.response.byteLength) {
            that.ctx.decodeAudioData(xhr.response, function(data) {
              that.audioBuffer = data;
            },
            function (e) {
              console.error('Error decoding the audio buffer for kickdrum.', arguments);
            });
          }
        };
        xhr.send();
      },
      kickon: function (e) {
        var src = this.ctx.createBufferSource();
        var gain = this.ctx.createGain();
        gain.gain.value = this.volume;
        src.buffer = this.audioBuffer;
        src.loop = false;
        src.connect(gain);
        gain.connect(this.ctx.destination);
        src.start(0);
        this.$.kick.classList.add("on");
      },
      kick : function(){
        this.kickon();
        var that = this;
        window.setTimeout(function(){
          that.kickoff();
        },100)
      },
      kickoff : function(e){
        this.$.kick.classList.remove("on");
      },
      stickcolorChanged: function (oldValue, newValue) {
        this.$.stick.style.background = newValue;
        this.$.ball.style.background = newValue;
      },
      drumcolorChanged: function (oldValue, newValue) {
        this.$.drum.style.background = newValue;
        this.$.face.style.borderColor = newValue;
      },
      backgroundcolorChanged: function (oldValue, newValue) {
        this.$.kick.style.background = newValue;
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-meatspaces-input" attributes="image text server mode" extends="ceci-element" assetpath="component-meatspaces-input/">
  <ceci-definition>
    {
      "tags": ["meatspaces", "input", "chat"],
      "thumbnail": "./thumbnail.png",
      "description": "Sends your picture and message to the Meatspaces chat room.",
      "name": "Meatspaces Chat Input",
      "listeners": {
        "send": {
          "label": "Send",
          "description": "Send message to chat server",
          "default": true
        }
      },
      "broadcasts": {
        "sent": {
          "label": "Message Sent",
          "description": "Message was sent to chat server"
        }
      },
      "attributes": {
        "image": {
          "label": "Image",
          "description": "Data-URL for image to be used",
          "listener": true
        },
        "server": {
          "label": "Server",
          "description": "URL for Appmaker Meatspaces Chat Server",
          "editable": "text"
        },
        "mode": {
          "label": "Message Mode",
          "description": "What kind of messages will be sent.",
          "editable": "select",
          "options": ["both", "text only", "image only"]
        }
      }
    }
  </ceci-definition>
  <template>
    <style>
      :host {
        display: block;
        width: 100%;
        min-height: 160px;
        position: relative;
      }

      :host img {
        width: 100px;
        height: 100px;
        float: left;
        margin-left: 5px;
        background-color: rgba(0, 0, 0, 0.2);
        display: block;
      }

      :host #container {
        padding: 5px 0;
      }

      :host #textarea-container {
        position: absolute;
        left: 110px;
        right: 10px;
        top: 5px;
        bottom: 10px;
      }

      :host textarea {
        width: 100%;
        height: 100%;
        resize: none;
      }

      :host #container[data-mode="text only"] img {
        display: none;
      }

      :host #container[data-mode="text only"] #textarea-container {
        left: 5px;
      }

      :host #container[data-mode="image only"] img {
        float: none;
        margin: 0 auto;
        width: 150px;
        height: 150px;
      }

      :host #container[data-mode="image only"] #textarea-container {
        display: none;
      }
    </style>
    <div id="container" data-mode="{{mode}}">
      <img src="{{image}}">
      <div id="textarea-container">
        <textarea placeholder="Type here">{{text}}</textarea>
      </div>
    </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-meatspaces-input', {
      text: '',
      image: 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==',
      server: 'http://appmaker-meatspaces-proxy.herokuapp.com/',
      mode: 'both',
      ready: function () {
        this.super();
      },
      send: function () {
        var payload = {
          image: this.image,
          text: this.text
        };
        var xhr = new XMLHttpRequest();
        xhr.open('POST', this.server + '/add/chat', true);
        xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
        xhr.onload = function (e) {
          console.log(xhr.response);
        };
        xhr.send(JSON.stringify(payload));
        this.text = '';
        this.image = 'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-meatspaces-messages" attributes="server mode height" extends="ceci-element" assetpath="component-meatspaces-messages/">
  <script src="component-meatspaces-messages/vendor/socketio.js"></script>
  <ceci-definition>
    {
      "tags": ["meatspaces", "chat"],
      "thumbnail": "./thumbnail.png",
      "name": "Meatspaces Chat Room",
      "description": "Connects you to a Meatspaces chat room.",
      "attributes": {
        "server": {
          "label": "Meatspaces Server",
          "description": "Meatspaces server to which this app should connect to receive messages.",
          "editable": "text"
        },
        "height": {
          "label": "Height",
          "description": "Height of this brick.",
          "editable": "number"
        },
        "mode": {
          "label": "Message Mode",
          "description": "What to display for each message",
          "editable": "select",
          "options": ["both", "text only", "image only"]
        }
      }
    }
  </ceci-definition>
  <template>
    <style>
      :host {
        display: block;
        width: 100%;
      }

      :host #container {
        overflow: scroll;
      }

      :host #container .message {
        font-size: 1em;
        clear: both;
        width: 100%;
        min-height: 60px;
        padding: .2em 0;
      }

      :host #container .message:nth-child(odd) {
        background: rgba(0, 0, 0, 0.1);
      }

      :host #container .message img {
        float: left;
        height: 50px;
        margin-right: .25em;
      }

      :host #status {
        text-align: center;
        padding: .25em 0;
      }

      :host #container[data-mode="text only"] {
        margin-left: 3%;
      }

      :host #container[data-mode="text only"] .message img {
        display: none;
      }

      :host #container[data-mode="text only"] .message .text {
      }

      :host #container[data-mode="image only"] {
        margin-left: 3%;
      }

      :host #container[data-mode="image only"] .message img {
        width: 100%;
        height: auto;
        float: none;
      }

      :host #container[data-mode="image only"] .message .text {
        display: none;
      }

      :host #container[data-mode="image only"] .message {
        display: inline-block;
        width: 48%;
        background: rgba(0, 0, 0, 0.1);
        padding: 0;
        margin-top: .25em;
      }
    </style>

    <div id="status">{{status}}</div>
    <div id="container" data-mode="{{mode}}">
      <template repeat="{{message in _messages}}">
        <div class="message"><img src="{{message.media}}"><span class="text">{{message.message}}</span></div>
      </template>
    </div>

    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-meatspaces-messages', {
      server: 'https://chat.meatspac.es:443',
      status: 'Connecting...',
      mode: 'both',
      height: 300,
      _messages: [],
      _boundMessageReceived: null,
      _messageReceived: function (data) {
        this._messages.push(data.chat.value);
        this.async(function () {
          this.$.container.scrollTop = this.$.container.scrollHeight + 1000;
        });
      },
      _connect: function () {
        var that = this;

        if (this._socket) { return; }

        var socket = this._socket = io.connect(this.server);
        socket.on('connect', function () {
          socket.emit('join');
          that.status = 'Connected';
        });

        this._boundMessageReceived = this._messageReceived.bind(this);
        socket.on('message', this._boundMessageReceived);
      },
      _disconnect: function () {
        this._socket.removeAllListeners('message');
        window.s = this._socket;
        if (this._socket.socket.connected) {
          this._socket.disconnect();
        }
        this.status = 'Disconnected';
        this._boundMessageReceived = null;
        this._socket = null;
      },
      ready: function () {
        this.super();
        this.heightChanged();
      },
      attached: function (e) {
        this._connect();
        this.super();
      },
      detached: function (e) {
        this._disconnect();
        this.super();
      },
      serverChanged: function (oldValue, newValue) {
        this._disconnect();
        this._messages = [];
        this.async(function () {
          this._connect();
        });
      },
      heightChanged: function () {
        this.$.container.style.height = this.height + 'px';
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><script src="//cdn.popcornjs.org/code/dist/popcorn.min.js"></script>
<polymer-element name="ceci-media" attributes="url autoplay starttime volume" extends="ceci-element" assetpath="component-media/">
  <ceci-definition>
    {
      "tags": ["media", "audio", "video", "youtube", "popcorn", "soundcloud"],
      "name": "Media Player",
      "thumbnail": "./thumbnail.png",
      "description": "Plays HTML5 media using the PopcornJS library.",
      "broadcasts": {
        "tick": {
          "label": "Tick",
          "description": "Media time progressed."
        },
        "ready": {
          "label": "Ready",
          "description": "Media is ready to play."
        },
        "ended": {
          "label": "Ended",
          "description": "Media reached its end."
        },
        "playing": {
          "label": "Playing",
          "description": "Media started to play."
        }
      },
      "listeners": {
        "play": {
          "label": "Start",
          "description": "Starts the selected media"
        },
        "pause": {
          "label": "Stop",
          "description": "Stops the selected media"
        },
        "rewind": {
          "label": "Rewind",
          "description": "Starts media from the beginning."
        }
      },
      "attributes": {
        "starttime": {
          "label": "Start Time",
          "description": "The desired starting point in the selected media.",
          "editable": "number",
          "listener": true
        },
        "url": {
          "label": "Media URL",
          "description": "Web URL for the desired media.",
          "editable": "text",
          "listener": true
        },
        "volume": {
          "label": "Volume",
          "description": "Volume of the playing media.",
          "editable": "number",
          "max": 1,
          "min": 0,
          "listener": true
        },
        "autoplay": {
          "label": "Play Automatically",
          "description": "Play the media as soon as its ready",
          "editable": "boolean"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>
      :host {
        display: block;
        min-height: 50px;
      }
      :host #mediaContainer {
        line-height: 0px;
      }
    </style>
    <div id="mediaContainer"></div>
    <shadow></shadow>
    <content></content>
  </template>
  <script>
    var popcornEvents = ['canplay', 'currentTime', 'ended', 'playing'];

    Polymer('ceci-media', {
      // some Beethoven
      url: 'https://www.youtube.com/watch?v=zucBfXpCA6s',
      starttime: 0,
      volume: 1,
      autoplay: 'false',
      ready: function () {
        this.super();

        // Make sure `this` scope never changes for these handlers...
        this.onPopcornCanplay = function () { this.broadcast('ready'); }.bind(this);
        this.onPopcornCurrentTime = function (e) { this.broadcast('tick', e.currentTime); }.bind(this);
        this.onPopcornEnded = function (e) { this.broadcast('ended'); }.bind(this);
        this.onPopcornPlaying = function (e) { this.broadcast('playing'); }.bind(this);

        if (this.url) {
          this.initPopcorn();
        }

      },
      urlChanged: function () {
        this.initPopcorn();
      },
      volumeChanged: function () {
        if (this._popcornPlayer) {
          this._popcornPlayer.volume = this.volume;
        }
      },
      play: function () {
        if (this._popcornPlayer) {
          this._popcornPlayer.play();
        }
      },
      pause: function () {
        if (this._popcornPlayer) {
          this._popcornPlayer.pause();
        }
      },
      rewind: function () {
        if (this._popcornPlayer) {
          this._popcornPlayer.currentTime(0);
        }
      },
      initPopcorn: function () {
        this.destroyPopcorn();
        this._popcornPlayer = Popcorn.smart(this.$.mediaContainer, this.url);
        popcornEvents.forEach(function (popcornEvent) {
          this._popcornPlayer.on(popcornEvent, this['onPopcorn' + popcornEvent.substr(0, 1).toUpperCase() + popcornEvent.substr(1)]);
        }.bind(this));
        this._popcornPlayer.volume = this.volume;
        if (this.autoplay === 'true') {
          this._popcornPlayer.play();
        }
      },
      destroyPopcorn: function () {
        if (this._popcornPlayer) {
          popcornEvents.forEach(function (popcornEvent) {
            this._popcornPlayer.off(popcornEvent, this['onPopcorn' + popcornEvent.substr(0, 1).toUpperCase() + popcornEvent.substr(1)]);
          }.bind(this));
          Popcorn.destroy(this._popcornPlayer);
          this.$.mediaContainer.innerHTML = '';
        }
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><!--TODO-->
<!--1. stop event-->
<!--2. Does this evaluate true / false  this.getAttribute('autostart')-->
<!--3. support tap / touch event? touchend-->
<!--4. cancel-->

<polymer-element name="ceci-metronome" attributes="changeby beatsperminute autostart" beatsperminute="60" autostart="false" extends="ceci-element" changeby="10" assetpath="component-metronome/">
  <template>
    <style>:host {
  display: block;
  position: relative;
  padding: 10px 0;
  -webkit-user-select: none;
  -moz-user-select: none;
}

:host .metronome-wrapper {
  margin: 0 auto;
  position: relative;
}

:host .speed-control {
  height: 50px;
  width: 50px;
  background: #63a6cc;
  position: absolute;
  border-radius: 30px;
  -webkit-border-radius: 30px;
  top: 10px;
  cursor: pointer;
  opacity: .8;
}

:host .speed-control .icon {
  position: absolute;
  font-size: 40px;
  color: white;
  font-weight: bold;
  width: 100%;
  text-align: center;
  text-shadow: 0px -1px 0px rgba(0,0,0,.25);
}

:host .speed-control:hover {
  opacity: 1;
}

:host .speed-control.up {
  right: 40px;
}

:host .down .icon {
  top: -4px;
}

:host .speed-control.down {
  left: 40px;
}

:host .metronome-body {
  background: #85560b;
  border-top: solid 2px #85560b;
  background: -webkit-linear-gradient(top, #a87018,#85560b);
  background: -moz-linear-gradient(top, #a87018,#85560b);
  width: 40px;
  margin: 0 auto;
  padding: 8px 0 12px 0;
  -webkit-border-radius: 15px 15px 5px 5px;
  border-radius: 15px 15px 5px 5px;
  position: relative;
  cursor: pointer;
}

:host  .metronome-hole {
  background: white;
  height: 50px;
  width: 10px;
  margin: 0 auto;
  border-radius: 3px 3px 10px  10px;
  border-top: solid 2px #85560b;
  border-left: solid 1px #85560b;
  border-right: solid 1px #85560b;
}

:host  .metronome-shadow {
  background: #DDD;
  width: 50px;
  height: 20px;
  margin: 0 auto;
  -webkit-border-radius: 12px;
  -webkit-transform: scaleY(.5);
  border-radius: 12px;
  transform: scaleY(.5);
  border-radius: 12px;
  position: absolute;
  left: calc(50% - 25px);
  top: 62px;
}

:host .metronome-arrow {
  background: black;
  height: 45px;
  width: 6px;
  border: solid 2px white;
  -webkit-transform-origin: center 45px;
  -webkit-border-radius: 0 0 5px 5px;
  transform-origin: center 45px;
  border-radius: 0 0 5px 5px;
  position: absolute;
  top: 10px;
  left: 15px;
}

:host .metronome-animation {
  -webkit-animation-name: metronome;
  -webkit-animation-timing-function: linear;
  -webkit-animation-iteration-count: infinite;
  animation-name: metronome;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
}

@-webkit-keyframes metronome {
  0% {-webkit-transform: rotate(0deg); }
  25% {-webkit-transform: rotate(-30deg); }
  50% {-webkit-transform: rotate(0deg); }
  75% {-webkit-transform: rotate(30deg); }
  100% {-webkit-transform: rotate(0deg); }
}

@keyframes metronome {
  0% {transform: rotate(0deg); }
  25% {transform: rotate(-30deg); }
  50% {transform: rotate(0deg); }
  75% {transform: rotate(30deg); }
  100% {transform: rotate(0deg); }
}
</style>
    <div class="metronome-wrapper">
      <div class="metronome-shadow"></div>
      <div class="metronome-body" on-click="{{click}}">
        <div class="metronome-hole"></div>
        <div class="metronome-arrow"></div>
      </div>
      <div class="speed-control up" on-click="{{faster}}">
        <span class="icon">+</span>
      </div>
      <div class="speed-control down" on-click="{{slower}}">
        <span class="icon">-</span>
      </div>
    </div>
    <shadow></shadow>
    <script type="text/json" id="ceci-definition"></script>
  </template>
  <ceci-definition>
    {
      "description": "Counts and sends out a beat at regular intervals.",
      "tags": ["fun","animated","starter"],
      "thumbnail": "./thumbnail.png",
      "name": "Metronome",
      "broadcasts": {
        "tick": {
          "label": "Tick",
          "description": "A tick of the metronome measured in Beats Per Minute(BPM)",
          "default": true
        }
      },
      "listeners": {
        "stop": {
          "description": "Stops metronome ticking.",
          "label": "Stop ticking"
        },
        "start": {
          "description": "Starts metronome ticking.",
          "label": "Start ticking"
        }
      },
      "attributes": {
        "beatsperminute": {
          "label": "Beats Per Minute (BPM)",
          "description": "Metronome ticks measured in beats per minute",
          "editable": "number",
          "min" : 0.1,
          "listener": true
        },
        "changeby" : {
          "label": "Button Increment",
          "description": "How much the + and - buttons change the speed by.",
          "editable": "number",
          "min" : 1,
          "listener": true
        },
        "autostart": {
          "label": "Autostart",
          "description": "Boolean value that controls if the metronome starts auto-playing when the component loads",
          "editable": "boolean",
          "listener": true
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-metronome', {
      ready: function () {
        this.super();
        this._count = 0;
        this._playing = false;
        this.timeout = null;
      },
      detached: function () {
        clearTimeout(this.timeout);
        this.timeout = null;
        this.super();
      },
      attached: function () {
        if (this._playing) {
          this._setTimeout();
        }
        this.super();
      },
      setArrowSpeed: function (v) {
        var animDuration = v * 2;
        var metronomeArrow = this.shadowRoot.querySelector('.metronome-arrow');
        metronomeArrow.classList.remove("metronome-animation");
        if (v > 0 && this._playing) {
          //force a reflow
          metronomeArrow.offsetWidth = metronomeArrow.offsetWidth;

          metronomeArrow.classList.add("metronome-animation");
          metronomeArrow.style.webkitAnimationDuration = animDuration + "s";
          metronomeArrow.style.animationDuration = animDuration + "s";
        }
      },
      autostartChanged : function(){
        if(this.autostart == "true") {
          if (!this._playing) {
            this.start();
          }
        } else {
          this.stop();
        }
      },
      click: function() {
        if(this._playing){
          this.stop();
        } else {
          this.start();
        }
      },
      faster : function(){
        this.beatsperminute = parseInt(this.beatsperminute,10) + parseInt(this.changeby,10);
      },
      slower : function(){
        this.beatsperminute = parseInt(this.beatsperminute,10) - parseInt(this.changeby,10);
      },
      beatsperminuteChanged: function (oldValue, newValue) {
        if (newValue <= 0) {
          this.beatsperminute = 0.1;
        }
        this._clearTimeout();
        this.setArrowSpeed((60 / this.beatsperminute));
        if (this._playing) {
          this._setTimeout();
        }
      },
      start: function (oldValue, newValue) {
        this._playing = true;
        this.setArrowSpeed((60 / this.beatsperminute));
        this.tick();
      },
      stop: function () {
        this._playing = false;
        this.setArrowSpeed(0);
        this._clearTimeout(this.timeout);
      },
      _setTimeout: function () {
        this.timeout = setTimeout(function () {
          this.timeout = null;
          this._count++;
          this.broadcast('tick', this._count);
          this.tick();
        }.bind(this), (60 / this.beatsperminute) * 1000);
      },
      _clearTimeout: function () {
        clearTimeout(this.timeout);
        this.timeout = null;
      },
      tick: function () {
        if (!this._playing || this.timeout) {
          return;
        }
        this._setTimeout();
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-microphone-button" attributes="textcolor record done" extends="ceci-element" record="Record" done="Done" textcolor="#ffffff" assetpath="component-microphone-button/">
  <ceci-definition>
    {
      "tags": ["microphone", "button", "audio"],
      "thumbnail": "./thumbnail.png",
      "description": "Records sounds.",
      "name": "Microphone",
      "broadcasts": {
        "clip": {
          "label": "clip",
          "description": "An audio clip from your microphone.",
          "default": true
        }
      },
      "listeners": {
        "start": {
          "description": "Start a microphone recording.",
          "label": "start"
        },
        "stop": {
          "description": "Stop a microphone recording.",
          "label": "stop"
        }
      },
      "attributes": {}
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px 0;
  text-align: center;
  background: #EEE;
}

:host .buttonwrapper {
  display: inline-block;
}

:host .button {
  font-family: "FiraSans", sans-serif;
  cursor: pointer;
  position: relative;
  text-decoration: none;
  outline: none;
  background-color: #4DB227;
  text-align: center;
  border-radius: 0.2rem;
  font-weight: 600;
  font-size: 1.8rem;
  border: none;
  width: 80px;
  height: 42px;
  margin: 0 5px;
  position: relative;
  display: block;
  width: 100px;
  background: #CCC;

  border: solid 2px #BBB;
  border-top: solid 2px #CCC;
  border-bottom: solid 4px #AAA;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  background-image:  -webkit-linear-gradient(top, #EEE,#DDD);
  background-image:  -moz-linear-gradient(top, #EEE,#DDD);
  background-image:  linear-gradient(top, #EEE,#DDD);
}

:host .button:active {
  border-bottom: solid 2px #AAA;
  margin-top: 2px;
}

:host .icon {
  width: 20px;
  height: 20px;
}

:host #startButton .iconwrapper {
  position: absolute;
  top: calc(50% - 12px);
  left: calc(50% - 12px);
  padding: 2px;
  background-image: -moz-linear-gradient(top, #AAA,#FFF);
  background-image: -webkit-linear-gradient(top, #AAA,#FFF);
  background-image:  linear-gradient(top, #AAA,#FFF);
  -webkit-border-radius: 22px;
  -moz-border-radius: 22px;
  border-radius: 22px;
}

:host #stopButton .iconwrapper {
  position: absolute;
  top: calc(50% - 10px);
  left: calc(50% - 10px);
  -webkit-border-radius: 22px;
  -moz-border-radius: 22px;
  border-radius: 22px;
}

:host #startButton .icon {
  background: #a13333;
  -webkit-border-radius: 20px;*/
  -moz-border-radius: 20px;
  border-radius: 20px;
  height: 20px;
  width: 20px;
}

:host #stopButton .icon {
  background: #555;
}

:host #startButton.recording  {
  border-bottom: solid 2px #AAA;
  margin-top: 2px;
}

:host #startButton.recording .icon {
  background: #eb1919;
}

</style>
      <div class="buttonwrapper">
        <div class="button" id="startButton">
          <div class="iconwrapper">
            <div class="icon"></div>
          </div>
        </div>
      </div>
      <div class="buttonwrapper">
        <div class="button" id="stopButton">
          <div class="iconwrapper">
            <div class="icon"></div>
          </div>
        </div>
      </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-microphone-button', {
      ready: function () {
        this.super();
        this.startButton = this.shadowRoot.querySelector("#startButton");
        this.stopButton = this.shadowRoot.querySelector("#stopButton");
        this.bg = this.shadowRoot.querySelector(".button");
        this.bg.style.background = this.buttoncolor;
        navigator.getMedia = ( navigator.getUserMedia ||
                               navigator.webkitGetUserMedia ||
                               navigator.mozGetUserMedia ||
                               navigator.msGetUserMedia );
      },
      attached: function() {
        if(!window.MediaRecorder) {
          // alert(this.gettext("your browser does not support recording"));;
          window.MediaRecorder = function() {
            var noop = function(){};
            this.start = noop;
            this.stop = noop;
            this.ondataavailable = false
          };
        }

        this.super();

        var that = this;

        if (navigator.getMedia) {
          var audioCtx = new AudioContext();

          navigator.getMedia (
            {audio: true},

            function(stream) {

              var mediaRecorder = new MediaRecorder(stream);

              that.startButton.onclick = function() {
                console.log("starting recorder");
                mediaRecorder.start();
                that.startButton.classList.add("recording");
              };

              that.stopButton.onclick = function() {
                console.log("stopping recorder");
                mediaRecorder.stop();
                that.bg.style.background = that.buttoncolor;
                that.startButton.classList.remove("recording");
              };

              var processData = function(e) {
                console.log("data available after recording");
                var audioURL = window.URL.createObjectURL(e.data);
                that.broadcast('clip', audioURL);
                mediaRecorder = new MediaRecorder(stream);
                mediaRecorder.ondataavailable = processData;
              };

              mediaRecorder.ondataavailable = processData;
            },

            function(err) { console.log('The following gUM error occured: ' + err); }
          );
        }
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-pad-grid" extends="ceci-element" attributes="backgroundcolor textcolor numrows numcols labels palettenumber" backgroundcolor="#000000" textcolor="#ffffff" numrows="5" numcols="3" palettenumber="1" labels="cucumber,tomato,eggplant,,up,,left,,right,,down," assetpath="component-pad-grid/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 10px;
  text-align: center;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

:host .output-channel {
  padding: 5px 10px;
  background: #999;
  margin: 0 3px;
  display: block;
  border: solid 2px #555;
}

:host .beats {
  display: inline-block;
}

:host .next-up {
  background: white;
  border: solid 2px white;
  font-weight: bold;
}

:host #channels {
  display: inline-block;
  position: relative;
}



:host .channel {
  overflow: auto;
  margin-bottom: 4px;
}

:host .channel:last-child {
  margin-bottom: 0;
}

:host .channel .beat,
:host .channel .label
{
  display:block;
  float: left;
}

:host .channel .label:after {
  content: "1";
}

:host .channel .beat {
  background: #DDD;
  margin: 0;
  height: 40px;
  width: 68px;
  opacity: .2;
  margin: 0 4px 0px 0;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  position: relative;
}

:host .overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  background: white;
  opacity: 0;
}

:host .channel .beat:last-child {
  margin-right: 0px;
}

:host .channel .beat:hover {
  opacity: .8;
}

:host [data-beat="0"] .beat:first-child,
:host [data-beat="1"] .beat:nth-child(2),
:host [data-beat="2"] .beat:nth-child(3),
:host [data-beat="3"] .beat:nth-child(4)
{
  opacity: .25;
}

:host [data-beat="0"] .beat.on:first-child,
:host [data-beat="1"] .beat.on:nth-child(2),
:host [data-beat="2"] .beat.on:nth-child(3),
:host [data-beat="3"] .beat.on:nth-child(4)
{
  opacity: 1;
}


:host .indicator.top {
  top: -8px;
}

:host .indicator {
  position: absolute;
  width: 68px;
  height: 5px;
  background: white;
  opacity: .4;
  -webkit-transform: scaleX(.2);
  -webkit-transform-origin: center;
  -moz-transform: scaleX(.2);
  -moz-transform-origin: center;
}

:host .indicator.bottom {
  bottom: -8px;
}

:host [data-beat="0"] .indicator { left: 0px; }
:host [data-beat="1"] .indicator { left: 72px; }
:host [data-beat="2"] .indicator { left: 144px; }
:host [data-beat="3"] .indicator { left: 216px; }

:host .channel .beat.on {
  opacity: 1;
}

[data-color*="yellow"] .beat {
  background: rgba(229,210,0,1);
}

[data-color*="blue"] .beat {
  background: rgba(53,140,206,1);
}

[data-color*="red"] .beat {
  background: rgba(232,30,20,1);
}

[data-color*="pink"] .beat {
  background: rgba(255,84,167,1);
}

[data-color*="purple"] .beat {
  background: rgba(159,39,207,1);
}

[data-color*="green"] .beat {
  background: rgba(113,184,6,1);
}

[data-color*="orange"] .beat {
  background: rgba(255,123,0,1);
}

:host .box {
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  cursor: pointer;
  display: block;
}
:host .row {
  display: block;
  width: 100%;
  padding-bottom: .5em;
}
  
:host .push {
  position: relative;
  text-align: center;
  vertical-align: baseline;
  font-size: 18px;
  display: inline-block;
  border-radius: 5px;
  min-height: 4em;
  margin-right: 4%;
}

:host .push:last-child {
  margin-right: 0;
}
:host .label {
  display: inline;
  position: absolute;
  top: 50%;
  height: 1.2em;
  margin-top: -.6em;
  left: 0;
  right: 0;
  text-align: center;
}



.animation-target {
  -webkit-animation: animation 1000ms linear both;
  animation: animation 1000ms linear both;
}

/* Generated with Bounce.js. Edit at http://bouncejs.com/#{s:[{T:%22c%22,e:%22s%22,d:1000,D:0,f:{x:1,y:1},t:{x:2,y:2},s:1,b:4}]} */

@-webkit-keyframes animation { 
  0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  1.666667% { -webkit-transform: matrix3d(1.18318, 0, 0, 0, 0, 1.18318, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.18318, 0, 0, 0, 0, 1.18318, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  3.333333% { -webkit-transform: matrix3d(1.31571, 0, 0, 0, 0, 1.31571, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.31571, 0, 0, 0, 0, 1.31571, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  5% { -webkit-transform: matrix3d(1.40196, 0, 0, 0, 0, 1.40196, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.40196, 0, 0, 0, 0, 1.40196, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  6.666667% { -webkit-transform: matrix3d(1.44775, 0, 0, 0, 0, 1.44775, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.44775, 0, 0, 0, 0, 1.44775, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  8.333333% { -webkit-transform: matrix3d(1.4597, 0, 0, 0, 0, 1.4597, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.4597, 0, 0, 0, 0, 1.4597, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  10% { -webkit-transform: matrix3d(1.44478, 0, 0, 0, 0, 1.44478, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.44478, 0, 0, 0, 0, 1.44478, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  11.666667% { -webkit-transform: matrix3d(1.40977, 0, 0, 0, 0, 1.40977, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.40977, 0, 0, 0, 0, 1.40977, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  13.333333% { -webkit-transform: matrix3d(1.36102, 0, 0, 0, 0, 1.36102, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.36102, 0, 0, 0, 0, 1.36102, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  15% { -webkit-transform: matrix3d(1.30417, 0, 0, 0, 0, 1.30417, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.30417, 0, 0, 0, 0, 1.30417, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  16.666667% { -webkit-transform: matrix3d(1.24402, 0, 0, 0, 0, 1.24402, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.24402, 0, 0, 0, 0, 1.24402, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  18.333333% { -webkit-transform: matrix3d(1.18448, 0, 0, 0, 0, 1.18448, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.18448, 0, 0, 0, 0, 1.18448, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  20% { -webkit-transform: matrix3d(1.12856, 0, 0, 0, 0, 1.12856, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.12856, 0, 0, 0, 0, 1.12856, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  21.666667% { -webkit-transform: matrix3d(1.07837, 0, 0, 0, 0, 1.07837, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.07837, 0, 0, 0, 0, 1.07837, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  23.333333% { -webkit-transform: matrix3d(1.0353, 0, 0, 0, 0, 1.0353, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0353, 0, 0, 0, 0, 1.0353, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  25% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  26.666667% { -webkit-transform: matrix3d(0.9726, 0, 0, 0, 0, 0.9726, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9726, 0, 0, 0, 0, 0.9726, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  28.333333% { -webkit-transform: matrix3d(0.95278, 0, 0, 0, 0, 0.95278, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.95278, 0, 0, 0, 0, 0.95278, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  30% { -webkit-transform: matrix3d(0.93988, 0, 0, 0, 0, 0.93988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93988, 0, 0, 0, 0, 0.93988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  31.666667% { -webkit-transform: matrix3d(0.93303, 0, 0, 0, 0, 0.93303, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93303, 0, 0, 0, 0, 0.93303, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  33.333333% { -webkit-transform: matrix3d(0.93124, 0, 0, 0, 0, 0.93124, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93124, 0, 0, 0, 0, 0.93124, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  35% { -webkit-transform: matrix3d(0.93348, 0, 0, 0, 0, 0.93348, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93348, 0, 0, 0, 0, 0.93348, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  36.666667% { -webkit-transform: matrix3d(0.93871, 0, 0, 0, 0, 0.93871, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93871, 0, 0, 0, 0, 0.93871, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  38.333333% { -webkit-transform: matrix3d(0.946, 0, 0, 0, 0, 0.946, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.946, 0, 0, 0, 0, 0.946, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  40% { -webkit-transform: matrix3d(0.95451, 0, 0, 0, 0, 0.95451, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.95451, 0, 0, 0, 0, 0.95451, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  41.666667% { -webkit-transform: matrix3d(0.9635, 0, 0, 0, 0, 0.9635, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9635, 0, 0, 0, 0, 0.9635, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  43.333333% { -webkit-transform: matrix3d(0.97241, 0, 0, 0, 0, 0.97241, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.97241, 0, 0, 0, 0, 0.97241, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  45% { -webkit-transform: matrix3d(0.98077, 0, 0, 0, 0, 0.98077, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.98077, 0, 0, 0, 0, 0.98077, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  46.666667% { -webkit-transform: matrix3d(0.98828, 0, 0, 0, 0, 0.98828, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.98828, 0, 0, 0, 0, 0.98828, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  48.333333% { -webkit-transform: matrix3d(0.99472, 0, 0, 0, 0, 0.99472, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99472, 0, 0, 0, 0, 0.99472, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  50% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  51.666667% { -webkit-transform: matrix3d(1.0041, 0, 0, 0, 0, 1.0041, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0041, 0, 0, 0, 0, 1.0041, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  53.333333% { -webkit-transform: matrix3d(1.00706, 0, 0, 0, 0, 1.00706, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00706, 0, 0, 0, 0, 1.00706, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  55% { -webkit-transform: matrix3d(1.00899, 0, 0, 0, 0, 1.00899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00899, 0, 0, 0, 0, 1.00899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  56.666667% { -webkit-transform: matrix3d(1.01002, 0, 0, 0, 0, 1.01002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.01002, 0, 0, 0, 0, 1.01002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  58.333333% { -webkit-transform: matrix3d(1.01028, 0, 0, 0, 0, 1.01028, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.01028, 0, 0, 0, 0, 1.01028, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  60% { -webkit-transform: matrix3d(1.00995, 0, 0, 0, 0, 1.00995, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00995, 0, 0, 0, 0, 1.00995, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  61.666667% { -webkit-transform: matrix3d(1.00917, 0, 0, 0, 0, 1.00917, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00917, 0, 0, 0, 0, 1.00917, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  63.333333% { -webkit-transform: matrix3d(1.00808, 0, 0, 0, 0, 1.00808, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00808, 0, 0, 0, 0, 1.00808, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  65% { -webkit-transform: matrix3d(1.0068, 0, 0, 0, 0, 1.0068, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0068, 0, 0, 0, 0, 1.0068, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  66.666667% { -webkit-transform: matrix3d(1.00546, 0, 0, 0, 0, 1.00546, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00546, 0, 0, 0, 0, 1.00546, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  68.333333% { -webkit-transform: matrix3d(1.00413, 0, 0, 0, 0, 1.00413, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00413, 0, 0, 0, 0, 1.00413, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  70% { -webkit-transform: matrix3d(1.00288, 0, 0, 0, 0, 1.00288, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00288, 0, 0, 0, 0, 1.00288, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  71.666667% { -webkit-transform: matrix3d(1.00175, 0, 0, 0, 0, 1.00175, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00175, 0, 0, 0, 0, 1.00175, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  73.333333% { -webkit-transform: matrix3d(1.00079, 0, 0, 0, 0, 1.00079, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00079, 0, 0, 0, 0, 1.00079, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  75% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  76.666667% { -webkit-transform: matrix3d(0.99939, 0, 0, 0, 0, 0.99939, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99939, 0, 0, 0, 0, 0.99939, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  78.333333% { -webkit-transform: matrix3d(0.99894, 0, 0, 0, 0, 0.99894, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99894, 0, 0, 0, 0, 0.99894, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  80% { -webkit-transform: matrix3d(0.99866, 0, 0, 0, 0, 0.99866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99866, 0, 0, 0, 0, 0.99866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  81.666667% { -webkit-transform: matrix3d(0.9985, 0, 0, 0, 0, 0.9985, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9985, 0, 0, 0, 0, 0.9985, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  83.333333% { -webkit-transform: matrix3d(0.99846, 0, 0, 0, 0, 0.99846, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99846, 0, 0, 0, 0, 0.99846, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  85% { -webkit-transform: matrix3d(0.99851, 0, 0, 0, 0, 0.99851, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99851, 0, 0, 0, 0, 0.99851, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  86.666667% { -webkit-transform: matrix3d(0.99863, 0, 0, 0, 0, 0.99863, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99863, 0, 0, 0, 0, 0.99863, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  88.333333% { -webkit-transform: matrix3d(0.99879, 0, 0, 0, 0, 0.99879, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99879, 0, 0, 0, 0, 0.99879, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  90% { -webkit-transform: matrix3d(0.99898, 0, 0, 0, 0, 0.99898, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99898, 0, 0, 0, 0, 0.99898, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  91.666667% { -webkit-transform: matrix3d(0.99918, 0, 0, 0, 0, 0.99918, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99918, 0, 0, 0, 0, 0.99918, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  93.333333% { -webkit-transform: matrix3d(0.99938, 0, 0, 0, 0, 0.99938, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99938, 0, 0, 0, 0, 0.99938, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  95% { -webkit-transform: matrix3d(0.99957, 0, 0, 0, 0, 0.99957, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99957, 0, 0, 0, 0, 0.99957, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  96.666667% { -webkit-transform: matrix3d(0.99974, 0, 0, 0, 0, 0.99974, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99974, 0, 0, 0, 0, 0.99974, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  98.333333% { -webkit-transform: matrix3d(0.99988, 0, 0, 0, 0, 0.99988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99988, 0, 0, 0, 0, 0.99988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 
}

@keyframes animation { 
  0% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  1.666667% { -webkit-transform: matrix3d(1.18318, 0, 0, 0, 0, 1.18318, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.18318, 0, 0, 0, 0, 1.18318, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  3.333333% { -webkit-transform: matrix3d(1.31571, 0, 0, 0, 0, 1.31571, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.31571, 0, 0, 0, 0, 1.31571, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  5% { -webkit-transform: matrix3d(1.40196, 0, 0, 0, 0, 1.40196, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.40196, 0, 0, 0, 0, 1.40196, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  6.666667% { -webkit-transform: matrix3d(1.44775, 0, 0, 0, 0, 1.44775, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.44775, 0, 0, 0, 0, 1.44775, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  8.333333% { -webkit-transform: matrix3d(1.4597, 0, 0, 0, 0, 1.4597, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.4597, 0, 0, 0, 0, 1.4597, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  10% { -webkit-transform: matrix3d(1.44478, 0, 0, 0, 0, 1.44478, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.44478, 0, 0, 0, 0, 1.44478, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  11.666667% { -webkit-transform: matrix3d(1.40977, 0, 0, 0, 0, 1.40977, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.40977, 0, 0, 0, 0, 1.40977, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  13.333333% { -webkit-transform: matrix3d(1.36102, 0, 0, 0, 0, 1.36102, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.36102, 0, 0, 0, 0, 1.36102, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  15% { -webkit-transform: matrix3d(1.30417, 0, 0, 0, 0, 1.30417, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.30417, 0, 0, 0, 0, 1.30417, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  16.666667% { -webkit-transform: matrix3d(1.24402, 0, 0, 0, 0, 1.24402, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.24402, 0, 0, 0, 0, 1.24402, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  18.333333% { -webkit-transform: matrix3d(1.18448, 0, 0, 0, 0, 1.18448, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.18448, 0, 0, 0, 0, 1.18448, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  20% { -webkit-transform: matrix3d(1.12856, 0, 0, 0, 0, 1.12856, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.12856, 0, 0, 0, 0, 1.12856, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  21.666667% { -webkit-transform: matrix3d(1.07837, 0, 0, 0, 0, 1.07837, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.07837, 0, 0, 0, 0, 1.07837, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  23.333333% { -webkit-transform: matrix3d(1.0353, 0, 0, 0, 0, 1.0353, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0353, 0, 0, 0, 0, 1.0353, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  25% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  26.666667% { -webkit-transform: matrix3d(0.9726, 0, 0, 0, 0, 0.9726, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9726, 0, 0, 0, 0, 0.9726, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  28.333333% { -webkit-transform: matrix3d(0.95278, 0, 0, 0, 0, 0.95278, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.95278, 0, 0, 0, 0, 0.95278, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  30% { -webkit-transform: matrix3d(0.93988, 0, 0, 0, 0, 0.93988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93988, 0, 0, 0, 0, 0.93988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  31.666667% { -webkit-transform: matrix3d(0.93303, 0, 0, 0, 0, 0.93303, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93303, 0, 0, 0, 0, 0.93303, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  33.333333% { -webkit-transform: matrix3d(0.93124, 0, 0, 0, 0, 0.93124, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93124, 0, 0, 0, 0, 0.93124, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  35% { -webkit-transform: matrix3d(0.93348, 0, 0, 0, 0, 0.93348, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93348, 0, 0, 0, 0, 0.93348, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  36.666667% { -webkit-transform: matrix3d(0.93871, 0, 0, 0, 0, 0.93871, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.93871, 0, 0, 0, 0, 0.93871, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  38.333333% { -webkit-transform: matrix3d(0.946, 0, 0, 0, 0, 0.946, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.946, 0, 0, 0, 0, 0.946, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  40% { -webkit-transform: matrix3d(0.95451, 0, 0, 0, 0, 0.95451, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.95451, 0, 0, 0, 0, 0.95451, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  41.666667% { -webkit-transform: matrix3d(0.9635, 0, 0, 0, 0, 0.9635, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9635, 0, 0, 0, 0, 0.9635, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  43.333333% { -webkit-transform: matrix3d(0.97241, 0, 0, 0, 0, 0.97241, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.97241, 0, 0, 0, 0, 0.97241, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  45% { -webkit-transform: matrix3d(0.98077, 0, 0, 0, 0, 0.98077, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.98077, 0, 0, 0, 0, 0.98077, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  46.666667% { -webkit-transform: matrix3d(0.98828, 0, 0, 0, 0, 0.98828, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.98828, 0, 0, 0, 0, 0.98828, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  48.333333% { -webkit-transform: matrix3d(0.99472, 0, 0, 0, 0, 0.99472, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99472, 0, 0, 0, 0, 0.99472, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  50% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  51.666667% { -webkit-transform: matrix3d(1.0041, 0, 0, 0, 0, 1.0041, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0041, 0, 0, 0, 0, 1.0041, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  53.333333% { -webkit-transform: matrix3d(1.00706, 0, 0, 0, 0, 1.00706, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00706, 0, 0, 0, 0, 1.00706, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  55% { -webkit-transform: matrix3d(1.00899, 0, 0, 0, 0, 1.00899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00899, 0, 0, 0, 0, 1.00899, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  56.666667% { -webkit-transform: matrix3d(1.01002, 0, 0, 0, 0, 1.01002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.01002, 0, 0, 0, 0, 1.01002, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  58.333333% { -webkit-transform: matrix3d(1.01028, 0, 0, 0, 0, 1.01028, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.01028, 0, 0, 0, 0, 1.01028, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  60% { -webkit-transform: matrix3d(1.00995, 0, 0, 0, 0, 1.00995, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00995, 0, 0, 0, 0, 1.00995, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  61.666667% { -webkit-transform: matrix3d(1.00917, 0, 0, 0, 0, 1.00917, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00917, 0, 0, 0, 0, 1.00917, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  63.333333% { -webkit-transform: matrix3d(1.00808, 0, 0, 0, 0, 1.00808, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00808, 0, 0, 0, 0, 1.00808, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  65% { -webkit-transform: matrix3d(1.0068, 0, 0, 0, 0, 1.0068, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.0068, 0, 0, 0, 0, 1.0068, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  66.666667% { -webkit-transform: matrix3d(1.00546, 0, 0, 0, 0, 1.00546, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00546, 0, 0, 0, 0, 1.00546, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  68.333333% { -webkit-transform: matrix3d(1.00413, 0, 0, 0, 0, 1.00413, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00413, 0, 0, 0, 0, 1.00413, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  70% { -webkit-transform: matrix3d(1.00288, 0, 0, 0, 0, 1.00288, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00288, 0, 0, 0, 0, 1.00288, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  71.666667% { -webkit-transform: matrix3d(1.00175, 0, 0, 0, 0, 1.00175, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00175, 0, 0, 0, 0, 1.00175, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  73.333333% { -webkit-transform: matrix3d(1.00079, 0, 0, 0, 0, 1.00079, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1.00079, 0, 0, 0, 0, 1.00079, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  75% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  76.666667% { -webkit-transform: matrix3d(0.99939, 0, 0, 0, 0, 0.99939, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99939, 0, 0, 0, 0, 0.99939, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  78.333333% { -webkit-transform: matrix3d(0.99894, 0, 0, 0, 0, 0.99894, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99894, 0, 0, 0, 0, 0.99894, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  80% { -webkit-transform: matrix3d(0.99866, 0, 0, 0, 0, 0.99866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99866, 0, 0, 0, 0, 0.99866, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  81.666667% { -webkit-transform: matrix3d(0.9985, 0, 0, 0, 0, 0.9985, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.9985, 0, 0, 0, 0, 0.9985, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  83.333333% { -webkit-transform: matrix3d(0.99846, 0, 0, 0, 0, 0.99846, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99846, 0, 0, 0, 0, 0.99846, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  85% { -webkit-transform: matrix3d(0.99851, 0, 0, 0, 0, 0.99851, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99851, 0, 0, 0, 0, 0.99851, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  86.666667% { -webkit-transform: matrix3d(0.99863, 0, 0, 0, 0, 0.99863, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99863, 0, 0, 0, 0, 0.99863, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  88.333333% { -webkit-transform: matrix3d(0.99879, 0, 0, 0, 0, 0.99879, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99879, 0, 0, 0, 0, 0.99879, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  90% { -webkit-transform: matrix3d(0.99898, 0, 0, 0, 0, 0.99898, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99898, 0, 0, 0, 0, 0.99898, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  91.666667% { -webkit-transform: matrix3d(0.99918, 0, 0, 0, 0, 0.99918, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99918, 0, 0, 0, 0, 0.99918, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  93.333333% { -webkit-transform: matrix3d(0.99938, 0, 0, 0, 0, 0.99938, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99938, 0, 0, 0, 0, 0.99938, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  95% { -webkit-transform: matrix3d(0.99957, 0, 0, 0, 0, 0.99957, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99957, 0, 0, 0, 0, 0.99957, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  96.666667% { -webkit-transform: matrix3d(0.99974, 0, 0, 0, 0, 0.99974, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99974, 0, 0, 0, 0, 0.99974, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  98.333333% { -webkit-transform: matrix3d(0.99988, 0, 0, 0, 0, 0.99988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(0.99988, 0, 0, 0, 0, 0.99988, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); }
  100% { -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); } 
}

</style>
    <div id="box" class="box">
     <div class="row">
       <div class="push"></div>
       <div class="push"></div>
       <div class="push"></div>
       <div class="push"></div>
     </div>
    </div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["music", "touch", "button"],
      "thumbnail": "./thumbnail.png",
      "name": "Button Grid",
      "description": "Displays a grid of buttons, each capable of its own action.",
      "broadcasts": {
        "taplabel": {
          "label": "Tapped label",
          "description": "The label of the key tapped",
          "default": "green"
        },
        "tapnumber": {
          "label": "Tapped number",
          "description": "The number of the key tapped (starts at 1)",
          "default": "blue"
        },
        "tap1": {
          "label": "Button 1 tapped",
          "description": "The first button was tapped",
          "default": ""
        },
        "tap2": {
          "label": "Button 2 tapped",
          "description": "The first button was tapped",
          "default": ""
        },
        "tap3": {
          "label": "Button 3 tapped",
          "description": "The first button was tapped",
          "default": ""
        },
        "tap4": {
          "label": "Button 4 tapped",
          "description": "The first button was tapped",
          "default": ""
        },
        "tap5": {
          "label": "Button 5 tapped",
          "description": "The first button was tapped",
          "default": ""
        },
        "tap6": {
          "label": "Button 6 tapped",
          "description": "The first button was tapped",
          "default": ""
        },
        "tap7": {
          "label": "Button 7 tapped",
          "description": "The first button was tapped",
          "default": ""
        },
        "tap8": {
          "label": "Button 8 tapped",
          "description": "The first button was tapped",
          "default": ""
        },
        "tap9": {
          "label": "Button 9 tapped",
          "description": "The first button was tapped",
          "default": ""
        }
      },
      "listeners": {
      },
      "attributes": {
        "backgroundcolor": {
          "label": "Background Color",
          "editable": "color"
        },
        "textcolor": {
          "label": "Text Color",
          "editable": "color"
        },
        "labels": {
          "label": "Comma separated labels",
          "editable": "text"
        },
        "numcols": {
          "label": "Number of columns",
          "editable": "number"
        },
        "numrows": {
          "label": "Number of rows",
          "editable": "number"
        },
        "palettenumber": {
          "label": "Which palette? 1-6",
          "editable": "number"
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-pad-grid', {
      nextBroadcast : "",
      ready: function() {
        this.super();
        this.colors = [
          ["#578A71",
"#CA53D5",
"#D7552D",
"#95DF44",
"#692A3F",
"#CFA83B",
"#CD98BF",
"#68DB90",
"#C69D85",
"#7C70D0",
"#5D9335",
"#C54692",
"#CE5062",
"#719CC2",
"#C7D383",
"#884928",
"#525926",
"#534273",
"#9BD8CE",
"#3D3D3C"] ,
          ["#89FB21",
"#CD94FD",
"#F4701F",
"#3FD5B7",
"#32170D",
"#196F17",
"#D32458",
"#E3B21E",
"#6B3887",
"#B9C2F2",
"#D7FE76",
"#E48475",
"#283A46",
"#4A7AC5",
"#F174A2",
"#65470F",
"#57C4DE",
"#32D089",
"#A4FEF9",
"#2D2706"],
          ["#FEEBB5",
"#E299BE",
"#8EBCC8",
"#EE9C74",
"#ADD171",
"#8AD4AA",
"#DECFF4",
"#FEFAF1",
"#D0A399",
"#E8C972",
"#FBFE88",
"#C7FCF2",
"#EDFDAA",
"#9CBA8B",
"#CEFED8",
"#BFDBF0",
"#89E3CD",
"#8FC1BA",
"#F7C479",
"#ACC674"],
          ["#C8C3B3",
"#1A1B13",
"#8A6B58",
"#E6DA9B",
"#6E8476",
"#DEF2F1",
"#E7B68C",
"#D1EABA",
"#A38E67",
"#9D9B9A",
"#393A31",
"#9FBFA9",
"#F6FDE4",
"#89906D",
"#F0F6CA",
"#A07763",
"#B7C1B7",
"#343432",
"#DCB586",
"#8E7055"],
          ["#AB41BC",
"#BAA5F1",
"#755288",
"#8F5CF1",
"#F998ED",
"#F258F4",
"#BD91FF",
"#9155AA",
"#BF80C1",
"#E780FF",
"#7752C8",
"#766AB8",
"#9D3896",
"#CF69FD",
"#9A4F95",
"#A994EF",
"#B16FA5",
"#8F36B6",
"#9054E0",
"#6A5DAB"],
          ["#FFFFFF"],
          ["#FF3333", "#FFFFFF"],
          ["#BC4212",
"#D3A18A",
"#FE266A",
"#9B4047",
"#F54F4F",
"#896759",
"#C18058",
"#D45162",
"#F16941",
"#F79D92",
"#AD4436",
"#915C3D",
"#F90D4E",
"#CE1B3A",
"#AC2D4D",
"#F76856",
"#E29A6F",
"#EB5461",
"#F26E32",
"#CE450C"]
        ];
        var self = this;
        this.labelsList = this.getAttribute("labels").split(',');
      },
      attached : function(){
        this.super();
        var that = this;
      },
      updateChannels: function(){
        var that = this;
        this.activebroadcasts = [];
        Array.prototype.forEach.call(this.querySelectorAll("ceci-broadcast"), function(broadcast) {
          var item = {};
          item.channelcolor = broadcast.getAttribute("on");
          item.channelname = broadcast.getAttribute("from");
          that.activebroadcasts.push(item);
        });
      },
      input: function(value) {
        this.currentBeat = this.currentBeat + 1;
        if(this.currentBeat > 3) {
          this.currentBeat = 0;
        }
        var playChannels = this.playbeats[parseInt(this.currentBeat)];
        for(var i = 0; i < playChannels.length; i++){
          this.broadcast(playChannels[i],"tick");
        }
      },
      generateCells: function() {
        this.$.box.innerHTML = '';
        var that = this;
        var row;
        var cell;
        var counter = 0;
        for (var i=0; i < this.numrows; i++) {
          row = document.createElement("div");
          row.setAttribute('class', 'row');
          for (var j=0; j < this.numcols; j++) {
            cell = document.createElement("div");
            cell.setAttribute('class', 'push');
            cell.style.width =((100.0-this.numcols*4)/this.numcols).toString() + "%";
            label = document.createElement('div');
            label.setAttribute('class', 'label');
            var labelText = this.labelsList[counter] || "";
            cell.setAttribute('number', counter+1);
            cell.setAttribute('label', labelText);
            label.textContent = labelText
            cell.appendChild(label);
            cell.addEventListener("click", function(e) {
              var square= e.currentTarget;
              var label = square.getAttribute('label');
              if (label) {
                that.broadcast("taplabel", label);
              }
              var tapnumber = square.getAttribute('number');
              that.broadcast("tapnumber", tapnumber);
              if (Number(tapnumber) < 10) {
                if (label == '') label = "tap"
                that.broadcast('tap' + tapnumber, label);
              }

              // next two lines are sadly needed: http://css-tricks.com/restart-css-animation/
              square.classList.remove("animation-target");
              square.offsetWidth = square.offsetWidth;
              square.classList.add("animation-target");
            });
            var palette = this.colors[(this.palettenumber-1) % this.colors.length];
            cell.style.backgroundColor = palette[counter % palette.length];
            row.appendChild(cell);
            counter ++;
          }
          this.$.box.appendChild(row);
        }
      },
      palettenumberChanged: function (oldValue, newValue) {
        this.palettenumber = Number(newValue);
        this.generateCells();
      },
      labelsChanged: function (oldValue, newValue) {
        this.labelsList = newValue.split(',');
        this.generateCells();
      },
      numcolsChanged: function (oldValue, newValue) {
        if (newValue < 1) {
          this.numcols = "1"; // XXX not sure how to force the settings pane to refuse a value.
          return;
        }
        this.generateCells();
      },
      numrowsChanged: function (oldValue, newValue) {
        if (newValue < 1) {
          this.numrows = "1"; // XXX not sure how to force the settings pane to refuse a value.
          return;
        }
        this.generateCells();
      },
      backgroundcolorChanged: function (oldValue, newValue) {
        this.style.backgroundColor = newValue;
      },
      textcolorChanged: function (oldValue, newValue) {
        this.style.color = newValue;
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-paypal" attributes="amount account currency" extends="ceci-element" currency="BRL" amount="5" account="donate@mozilla.org" button="false" assetpath="component-paypal/">
  <ceci-definition>
    {
      "name": "PayPal",
      "description": "Donates to the cause of your choice through PayPal.",
      "tags": ["paypal", "donate"],
      "thumbnail": "./thumbnail.png",
      "broadcasts": {
        "donate": {
          "label": "Donate",
          "description": "Occurs when donation process begins."
        }
      },
      "listeners": {
        "submit": {
          "description": "Submits a donation once settings have been chosen.",
          "label": "Submit",
          "default": "orange"
        }
      },
      "attributes": {
        "amount": {
          "label": "Amount",
          "description": "Amount of money to donate.",
          "editable": "number",
          "listener": true,
          "max": 3,
          "min": 50
        },
        "account": {
          "label": "Account",
          "description": "PayPal account which will receive payment.",
          "editable": "text"
        },
        "currency": {
          "label": "Currency",
          "description": "Currency code for donation amount.",
          "editable": "text"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host img {
  width: 100%;
}

:host h3 {
  text-align: center;
}

:host #account {
  text-align: center;
}</style>
    <h3><span id="donationAmount">Donation Amount:</span> <span>{{amount}}</span> <span>{{currency}}</span></h3>
    <p id="account">{{account}}</p>
    <form id="form" method="post" action="https://www.paypal.com/cgi-bin/webscr">
      <input type="hidden" name="amount" id="pp_amount" value="{{amount}}">
      <input type="hidden" name="business" id="pp_business" value="{{account}}">
      <input type="hidden" name="currency_code" id="pp_currency_code" value="{{currency}}">
      <input type="hidden" name="item_name" id="fundrasingCampaignName" value="Donation from AppMaker App">
      <input type="hidden" name="no_shipping" value="1">
      <input type="hidden" name="rm" value="1">
      <input type="hidden" name="cmd" value="_donations"> <!-- TODO - could switch between donation and payments -->
      <input type="hidden" name="return" value=""> <!-- Return url is the current app url with query param to tell success -->
    </form>
    <img src="component-paypal/thumbnail.png">
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-paypal', {
      ready: function () {
        this.super();
        this.$.donationAmount.textContent = this.gettext(this.localName + "/donationAmount") || this.$.donationAmount.textContent;
      },
      submit: function (value) {
        this.$.form.submit();
        this.broadcast('donate');
      }
    });
  </script>
</polymer-element>

</div>
<div hidden><polymer-element name="ceci-popcorn-component" extends="ceci-element" make="https://mozteach.makes.org/popcorn/1boj" attributes="make starttime" starttime="0" assetpath="component-popcorn/">
  <ceci-definition>
    {
      "name": "Popcorn Maker Player",
      "tags": "media,popcorn",
      "thumbnail": "./thumbnail.png",
      "description": "Displays and controls a popcorn.webmaker.org make",
      "broadcasts": {
        "loaded": {
          "label": "Loaded",
          "description": "Popcorn make is ready to play"
        },
        "finished": {
          "label": "Finished",
          "description": "Popcorn make has finished"
        },
        "eventstart": {
          "label": "Track event start",
          "description": "Track event has started"
        },
        "eventend": {
          "label": "Track event end",
          "description": "Track event has ended"
        },
        "error": {
          "label": "Error",
          "description": "Popcorn make has an error"
        },
        "play": {
          "label": "Play",
          "description": "Popcorn make is playing"
        },
        "pause": {
          "label": "Pause",
          "description": "Popcorn make is now paused"
        },
        "timeupdate": {
          "label": "Time Update",
          "description": "Popcorn make's current time has changed"
        }
      },
      "listeners": {
        "play": {
          "description": "Play the make",
          "label": "Play make"
        },
        "pause": {
          "description": "Pause the make",
          "label": "Pause make"
        },
        "rewind": {
          "description": "Rewind the make back to the start",
          "label": "Rewind make"
        }
      },
      "attributes": {
        "make": {
          "description": "url to popcorn.webmaker.org make",
          "label": "Make",
          "editable": "text"
        },
        "starttime": {
          "description": "initial time of the popcorn make",
          "label": "Start Time",
          "editable": "number"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host iframe {
  border: none;
}

</style>
    <iframe id="make-iframe"></iframe>
    
    <shadow></shadow>
  </template>
    <script>
      Polymer("ceci-popcorn-component", {
        ready: function() {
          this.super();
        },
        makeChanged: function() {
          var iframe = this.$["make-iframe"],
              self = this;
          window.addEventListener( "message", function( e ) {
            if ( e.data.type === "loadedmetadata" ) {
              if ( self.make ) {
                self.$["make-iframe"].contentWindow.postMessage({
                  type: 'currentTime',
                  currentTime: parseInt(self.starttime, 10)
                }, self.make);
              }
              self.broadcast("loaded");
            } else if ( e.data.type === "play" ) {
              self.broadcast("play", e.data.currentTime);
            } else if ( e.data.type === "pause" ) {
              self.broadcast("pause", e.data.currentTime);
            } else if ( e.data.type === "trackend" ) {
              self.broadcast("eventend", e.data.plugin);
            } else if ( e.data.type === "trackstart" ) {
              self.broadcast("eventstart", e.data.plugin);
            } else if ( e.data.type === "ended" ) {
              self.broadcast("finished");
            } else if ( e.data.type === "timeupdate" ) {
              self.broadcast("timeupdate", e.data.currentTime);
            }
          }, false );
          if (this.make.slice( -1 ) !== "_") {
            this.make = this.make + "_";
          }
          iframe.src = this.make;
        },
        play: function() {
          this.$["make-iframe"].contentWindow.postMessage({type: "play"}, this.make);
        },
        pause: function() {
          this.$["make-iframe"].contentWindow.postMessage({type: "pause"}, this.make);
        },
        rewind: function() {
          this.$["make-iframe"].contentWindow.postMessage({
            type: 'currentTime',
            currentTime: 0
          }, this.make);
        }
      });
    </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-random" extends="ceci-element" attributes="allowsame min max value" min="0" max="9" allowsame="false" assetpath="component-random-number/">
  <ceci-definition>
    {
      "name": "Random Number Generator",
      "thumbnail": "./thumbnail.png",
      "description": "Generates a random number for other bricks to use.",
      "broadcasts": {
        "send": {
          "label": "Random number",
          "description": "Sends the random number if explicitly asked to.",
          "default" : "true"
        }
      },
      "listeners": {
        "generate": {
          "description": "Generate a random number between min and max",
          "label": "Generate",
          "default" : "true"
        }
      },
      "attributes": {
        "min": {
          "label": "Min",
          "editable": "number"
        },
        "max": {
          "label": "Max",
          "editable": "number"
        },
        "allowsame": {
          "description": "Allow same number twice",
          "label": "Allow same number twice",
          "editable": "boolean"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .counter {
  text-align: center;
  font-size: 14px;
  padding: 8px 0px;
  background: #DDD;
  color: #666;
}

:host .counter .count-wrapper {
  display: inline-block;
  background: white;
  padding: 5px 12px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  border: solid 1px #CCC;
  border-width: 1px 1px 2px 1px;
}
</style>
    <div class="counter">
        Random between {{min}} and {{max}} &rarr;
      <div class="count-wrapper">
 {{value}}
      </div>
    </div>
    <shadow></shadow>
  </template>
  <tags>starter,math</tags>
    <script>
      Polymer("ceci-random", {
        ready: function() {
          this.value = Number(this.value) || 0;
          this.super();
        },
        value: 0,
        valueChanged: function() {
          this.broadcast("changed", this.value);
        },
        generate: function() {
          var max = Number(this.max);
          var min = Number(this.min);
          var random = Math.floor(Math.random() * (max - min + 1)) + min;

          if(this.allowsame == "false") {
            while(this.value == random){
              random = Math.floor(Math.random() * (max - min + 1)) + min;
            }
          }
          this.value = random;
          this.send();
        },
        send: function() {
          this.broadcast("send", this.value);
        }
      });
    </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-sequencer" attributes="playbeats" extends="ceci-element" assetpath="component-sequencer/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
  padding: 20px 10px 16px 10px;
  background: #555;
  text-align: center;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

:host .output-channel {
  padding: 5px 10px;
  background: #999;
  margin: 0 3px;
  display: block;
  border: solid 2px #555;
}

:host .beats {
  display: inline-block;
}

:host .next-up {
  background: white;
  border: solid 2px white;
  font-weight: bold;
}

:host #channels {
  display: inline-block;
  position: relative;
}



:host .channelrow {
  overflow: auto;
  margin-bottom: 4px;
}

:host .channelrow:last-child {
  margin-bottom: 0;
}

:host .channelrow .beat,
:host .channelrow .label
{
  display:block;
  float: left;
}

:host .channelrow .label:after {
  content: "1";
}

:host .channelrow .beat {
  background: #DDD;
  margin: 0;
  height: 40px;
  width: 68px;
  opacity: .2;
  margin: 0 4px 0px 0;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  position: relative;
}

:host .overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  background: white;
  opacity: 0;
}

:host .channelrow .beat:last-child {
  margin-right: 0px;
}

:host .channelrow .beat:hover {
  opacity: .8;
}

:host [data-beat="0"] .beat:first-child,
:host [data-beat="1"] .beat:nth-child(2),
:host [data-beat="2"] .beat:nth-child(3),
:host [data-beat="3"] .beat:nth-child(4)
{
  opacity: .25;
}

:host [data-beat="0"] .beat.on:first-child,
:host [data-beat="1"] .beat.on:nth-child(2),
:host [data-beat="2"] .beat.on:nth-child(3),
:host [data-beat="3"] .beat.on:nth-child(4)
{
  opacity: 1;
}


:host .indicator.top {
  top: -8px;
}

:host .indicator {
  position: absolute;
  width: 68px;
  height: 5px;
  background: white;
  opacity: .4;
  -webkit-transform: scaleX(.2);
  -webkit-transform-origin: center;
  -moz-transform: scaleX(.2);
  -moz-transform-origin: center;
}

:host .indicator.bottom {
  bottom: -8px;
}

:host [data-beat="0"] .indicator { left: 0px; }
:host [data-beat="1"] .indicator { left: 72px; }
:host [data-beat="2"] .indicator { left: 144px; }
:host [data-beat="3"] .indicator { left: 216px; }

:host .channelrow .beat.on {
  opacity: 1;
}

[data-color="a"] .beat {
  background: #de0310;
}
[data-color="b"] .beat {
  background: #e82f0a;
}
[data-color="c"] .beat {
  background: #ef5106;
}
[data-color="d"] .beat {
  background: #f87303;
}
[data-color="e"] .beat {
  background: #f89200;
}
[data-color="f"] .beat {
  background: #cca108;
}
[data-color="g"] .beat {
  background: #a0af0e;
}
[data-color="h"] .beat {
  background: #78bc13;
}
[data-color="i"] .beat {
  background: #56bb2d;
}
[data-color="j"] .beat {
  background: #3dac5d;
}
[data-color="k"] .beat {
  background: #259c8b;
}
[data-color="l"] .beat {
  background: #0d8bb8;
}
[data-color="m"] .beat {
  background: #1373d2;
}
[data-color="n"] .beat {
  background: #3951d2;
}
[data-color="o"] .beat {
  background: #5f30d2;
}
[data-color="p"] .beat {
  background: #8a0bd;
}
</style>
    <div id="channels" data-beat="{{currentBeat}}">
      <div class="indicator top"></div>
      <div class="indicator bottom"></div>
      <template repeat="{{item, i in activebroadcasts}}">
        <div data-color="{{item.channelcolor}}" data-channel="{{item.channelname}}" class="channelrow">
          <div on-click="{{beattap}}" data-beat="0" class="beat"></div>
          <div on-click="{{beattap}}" data-beat="1" class="beat"></div>
          <div on-click="{{beattap}}" data-beat="2" class="beat"></div>
          <div on-click="{{beattap}}" data-beat="3" class="beat"></div>
        </div>
      </template>
    </div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": [""],
      "thumbnail": "./thumbnail.png",
      "name": "Sequencer",
      "description": "Sends messages signals to other bricks according to a pattern.",
      "broadcasts": {
        "A": {
          "label": "Beat A",
          "description": "The first broadcast in the rotation.",
          "default": "green"
        },
        "B": {
          "label": "Beat B",
          "description": "The second broadcast in the rotation.",
          "default": "yellow"
        },
        "C": {
          "label": "Beat C",
          "description": "The third broadcast in the rotation."
        },
        "D": {
          "label": "Beat D",
          "description": "The fourth broadcast in the rotation."
        },
        "E": {
          "label": "Beat E",
          "description": "The fifth broadcast in the rotation."
        }
      },
      "listeners": {
        "input": {
          "description": "Plays the next beat in the sequence.",
          "label": "Play Beat",
          "default": true
        }
      },
      "attributes": {}
    }
  </ceci-definition>
  <script>
    Polymer('ceci-sequencer', {
      beattap: function(e){
        var self = this;
        var beatEl = e.target;

        if (beatEl.classList.contains("on")){
          beatEl.classList.remove("on");
        }
        else{
          beatEl.classList.add("on");
        }

        self.playbeats = [[],[],[],[]];

        Array.prototype.forEach.call(this.shadowRoot.querySelectorAll(".channelrow"), function(chan) {
          var channel = chan.getAttribute("data-channel");
          var beat = 0;
          Array.prototype.forEach.call(chan.querySelectorAll(".beat"), function(beatEl) {
            if(beatEl.classList.contains("on")) {
              self.playbeats[beat].push(channel);
            }
            beat++;
          });
        });
        this.setAttribute("playbeats",JSON.stringify(this.playbeats));
      },
      currentBeat: -1,
      ready: function() {
        this.super();
        this.lastBroadcast = null;
        var self = this;
        this.playbeats = JSON.parse(this.getAttribute("playbeats")) || [["A"],["B"],["A"],["B"]];
      },
      colorSquares : function(){
        if (this.activebroadcasts.length > 0){
          for(var i = 0; i < this.playbeats.length; i++){
            var beatCount = i + 1;
            var beats = this.playbeats[i];
            for(var j = 0; j < beats.length; j++) {
              var channel = beats[j];

              this.shadowRoot.querySelector(".channelrow[data-channel=" + channel +"] .beat:nth-child(" + beatCount + ")").classList.add("on");
            }
          }
        }
      },
      attached : function(){
        this.super();

        this.addEventListener("CeciChannelUpdated", function(){
          this.updateChannels();
        });

        this.async(function(){
          this.colorSquares()
        });

        this.updateChannels();
      },
      updateChannels: function(){
        var self = this;
        this.activebroadcasts = [];

        Array.prototype.forEach.call(this.querySelectorAll("ceci-broadcast"), function(broadcast) {
          var item = {};
          item.channelcolor = broadcast.getAttribute("on");
          item.channelname = broadcast.getAttribute("from");

          self.activebroadcasts.push(item);
        });

        this.async(function(){
          this.colorSquares();
        });
      },
      input: function(value) {
        this.currentBeat += 1;

        if(this.currentBeat > 3) {
          this.currentBeat = 0;
        }
        var playChannels = this.playbeats[this.currentBeat];
        for(var i = 0; i < playChannels.length; i++){
          this.broadcast(playChannels[i], "tick");
        }
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><script src="component-sheet/scripts/tabletop.js"></script>
<polymer-element name="ceci-component-sheet" extends="ceci-element" attributes="url" assetpath="component-sheet/">
  <ceci-definition>
    {
      "name": "Sheet",
      "tags": "ceci-component-sheet",
      "thumbnail": "./thumbnail.png",
      "description": "A canvas for drawing and sharing",
      "broadcasts": {
        "sendvalue": {
          "label": "send value",
          "description": "A cell was tapped"
        },
        "sendheading": {
          "label": "send heading",
          "description": "A cell was tapped"
        }
      },
      "listeners": {
      },
      "attributes": {
        "url": {
          "label": "Google Docs URL",
          "description": "URL",
          "editable": "text"
        }
      }
    }
  </ceci-definition>
  <template>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>/*
 * HTML5 Boilerplate
 *
 * What follows is the result of much research on cross-browser styling.
 * Credit left inline and big thanks to Nicolas Gallagher, Jonathan Neal,
 * Kroc Camen, and the H5BP dev community and team.
 */

/* ==========================================================================
   Base styles: opinionated defaults
   ========================================================================== */

html,
button,
input,
select,
textarea {
  color: #222;
}

body {
  font-size: 1em;
  line-height: 1.4;
}

a {
  color: #00e;
}

a:visited {
  color: #551a8b;
}

a:hover {
  color: #06e;
}

/*
 * Remove the gap between images and the bottom of their containers: h5bp.com/i/440
 */

img {
  vertical-align: middle;
}

/*
 * Remove default fieldset styles.
 */

fieldset {
  border: 0;
  margin: 0;
  padding: 0;
}

/*
 * Allow only vertical resizing of textareas.
 */

textarea {
  resize: vertical;
}

/* ==========================================================================
   Author's custom styles
   ========================================================================== */


















/* ==========================================================================
   Helper classes
   ========================================================================== */

/* Prevent callout */

.nocallout {
  -webkit-touch-callout: none;
}

.pressed {
  background-color: rgba(0, 0, 0, 0.7);
}

/* A hack for HTML5 contenteditable attribute on mobile */

textarea[contenteditable] {
  -webkit-appearance: none;
}

/* A workaround for S60 3.x and 5.0 devices which do not animated gif images if
   they have been set as display: none */

.gifhidden {
  position: absolute;
  left: -100%;
}

/*
 * Image replacement
 */

.ir {
  background-color: transparent;
  background-repeat: no-repeat;
  border: 0;
  direction: ltr;
  display: block;
  overflow: hidden;
  text-align: left;
  text-indent: -999em;
}

.ir br {
  display: none;
}

/*
 * Hide from both screenreaders and browsers: h5bp.com/u
 */

.hidden {
  display: none !important;
  visibility: hidden;
}

/*
 * Hide only visually, but have it available for screenreaders: h5bp.com/v
 */

.visuallyhidden {
  border: 0;
  clip: rect(0 0 0 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

/*
 * Extends the .visuallyhidden class to allow the element to be focusable
 * when navigated to via the keyboard: h5bp.com/p
 */

.visuallyhidden.focusable:active,
.visuallyhidden.focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

/*
 * Hide visually and from screenreaders, but maintain layout
 */

.invisible {
  visibility: hidden;
}

/**
 * Clearfix helper
 * Used to contain floats: h5bp.com/q
 */

.clearfix::before,
.clearfix::after {
  content: "";
  display: table;
}

.clearfix::after {
  clear: both;
}

/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   Theses examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 800px) {
  /* Style adjustments for viewports that meet the condition */
}

@media only screen and (-webkit-min-device-pixel-ratio: 1.5),
     only screen and (min-resolution: 144dpi) {
  /* Style adjustments for viewports that meet the condition */
}
</style>
    <style>/*
 * Web Starter Kit
 *
 * Multi-screen layout styles for your page. Brought to you by the
 * Web Starter Kit team.
 *
 */

html,
body {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
}

body {
  position: relative;
  font-family: 'Roboto Condensed', 'Helvetica', 'Arial', sans-serif;
  font-weight: 300;
  background-color: #FFFFFF;
  box-sizing: border-box;
  min-height: 100%;
}

body.open {
  overflow: hidden;
}

.app-bar {
  display: block;
  width: 100%;
  position: fixed;
  top: 0;
  left: 0;
  background-color: #4285f4;
  overflow: hidden;
  z-index: 1;
}

.app-bar-container {
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  width: 100%;
  height: 60px;
  position: relative;
  -webkit-flex-direction: row;
      -ms-flex-direction: row;
          flex-direction: row;
  margin: 0 auto;
}

.app-bar.open,
.app-bar.open ~ main {
  -webkit-transform: translate(250px, 0);
          transform: translate(250px, 0);
}

.app-bar .logo {
  -webkit-flex: 1;
      -ms-flex: 1;
          flex: 1;
  font-size: 2em;
  line-height: 60px;
  margin: 0 16px;
  padding: 0;
  color: #fefefe;
  float: none;
  max-width: none;
  font-weight: 300;
  line-height: 60px;
}

.app-bar .logo a {
  text-decoration: none;
  color: inherit;
  font-weight: normal;
}

.app-bar-actions {
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-flex-direction: row;
      -ms-flex-direction: row;
          flex-direction: row;
  z-index: 2;
}

.app-bar button {
  width: 60px;
  height: 60px;
  background-image: none;
  background-color: transparent;
  border: none;
  padding: 0;
  -webkit-transition: background-color 0.2s ease-out;
          transition: background-color 0.2s ease-out;
  -webkit-tap-highlight-color: transparent;
}

.app-bar button img {
  width: 60px;
  height: 60px;
}

.app-bar button:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

.app-bar button:focus {
  background-color: rgba(255, 255, 255, 0.2);
  outline: 0;
}

.app-bar button:active {
  background-color: rgba(255, 255, 255, 0.4);
}

button.menu img {
  height:24px;
  width: 24px;
}

.promote-layer {
  /*
  This may promote the layer to a composited
  layer.

  Replace with will-change when available

  #perfmatters
  */
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

.base, p, ul, ol {
  font-size: 19px;
}

.navdrawer-container {
  z-index: 1;
  position: fixed;
  top: 0;
  bottom: 0;
  width: 250px;
  height: 100%;
  background-color: #3367D6;
  color: #fefefe;
  -webkit-transform: translate(-250px, 0);
          transform: translate(-250px, 0);
  overflow-y: auto;
}

.navdrawer-container.open {
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}

.app-bar, .navdrawer-container, main {
  -webkit-transition: -webkit-transform 0.3s ease-out;
          transition: transform 0.3s ease-out;
}

.navdrawer-container h4,
.navdrawer-container ul li a {
  height: auto;
  padding: 17px 20px;
  line-height: 1.4;
}

.navdrawer-container h4 {
  background-color: white;
  color: #3367D6;
}

.navdrawer-container ul {
  padding: 0;
  margin: 0;
  list-style-type: none;
}

.navdrawer-container ul li a {
  display: block;
  text-decoration: none;
  color: white;
  -webkit-transition: background-color 0.2s ease-out;
          transition: background-color 0.2s ease-out;
  white-space: nowrap;
}

.navdrawer-container ul li {
  border-bottom-style: solid;
  border-width: 1px;
  border-color: white;
  padding: 0;
}

.navdrawer-container ul li::before {
  content: none;
}

.navdrawer-container ul li a:hover {
  background-color: rgba(255, 255, 255, 0.2);
}

.navdrawer-container ul li a:focus {
  background-color: rgba(255, 255, 255, 0.3);
  outline: 0;
}

.navdrawer-container ul li a:active {
  background-color: rgba(255, 255, 255, 0.4);
}

main {
  margin: 0 auto;
  /* Height of the header */
  padding: 60px 16px 16px 16px;
  min-height: 100%;
}

/** Larger Screens - desktops and tablets **/
@media all and (min-width: 990px) {
  .app-bar {
    position: relative;
  }

  .app-bar.open,
  .app-bar.open ~ main {
    -webkit-transform: translate(0px, 0);
            transform: translate(0px, 0);
  }

  .app-bar-container {
    display: block;
    height: 130px;
    max-width: 864px;
    padding: 0 16px;
    box-sizing: border-box;
    background-color: #4285f4;
  }

  .app-bar .logo {
    float: left;
    margin: 0;
    padding: 0;
    line-height: 130px;
    font-size: 46px;
  }

  .app-bar-actions {
    float: right;
  }

  .app-bar::after {
    content: ' ';
    display: block;
    height: 0;
    overflow: hidden;
    clear: both;
  }

  button.menu {
    display: none;
  }

  nav {
    display: block;
    margin-top: 130px;
  }

  .navdrawer-container {
    position: relative;
    width: 100%;
    height: auto;
    margin-top: 130px;
    -webkit-transform: translate(0, 0);
            transform: translate(0, 0);
    -webkit-transition: none;
            transition: none;
    overflow-y: auto;
  }

  .navdrawer-container h4 {
    display: none;
  }

  .navdrawer-container ul {
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    max-width: 864px;
    margin: 0 auto;
    -webkit-flex-direction: row;
        -ms-flex-direction: row;
            flex-direction: row;
  }

  .navdrawer-container ul li {
    border: none;
  }

  main {
    max-width: 864px;
    padding-top: 0;
    min-height: initial;
  }

  body {
    overflow-y: scroll;
  }

  .navdrawer-container {
    position: relative;
    margin-top: 0;
  }
}
</style>
    <style>/**
*
* Main Stylesheet For Visual Style Guide
*
**/
/**
*
* Utils
*
**/
/*==========  VARIABLES  ==========*/
/*==========  FUNCTIONS  ==========*/
/*==========  MIXINS  ==========*/
/*! normalize.css v3.0.1 | MIT License | git.io/normalize */
/**
 * 1. Set default font family to sans-serif.
 * 2. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */
html {
  font-family: sans-serif;
  /* 1 */
  -ms-text-size-adjust: 100%;
  /* 2 */
  -webkit-text-size-adjust: 100%;
  /* 2 */
}

/**
 * Remove default margin.
 */
body {
  margin: 0;
}

/* HTML5 display definitions
   ========================================================================== */
/**
 * Correct `block` display not defined for any HTML5 element in IE 8/9.
 * Correct `block` display not defined for `details` or `summary` in IE 10/11 and Firefox.
 * Correct `block` display not defined for `main` in IE 11.
 */
article,
aside,
details,
figcaption,
figure,
footer,
header,
main,
nav,
section,
summary {
  display: block;
}

/**
 * 1. Correct `inline-block` display not defined in IE 8/9.
 * 2. Normalize vertical alignment of `progress` in Chrome, Firefox, and Opera.
 */
audio,
canvas,
progress,
video {
  display: inline-block;
  /* 1 */
  vertical-align: baseline;
  /* 2 */
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */
audio:not([controls]) {
  display: none;
  height: 0;
}

/**
 * Address `[hidden]` styling not present in IE 8/9/10.
 * Hide the `template` element in IE 8/9/11, Safari, and Firefox < 22.
 */
[hidden],
template {
  display: none;
}

/* Links
   ========================================================================== */
/**
 * Remove the gray background color from active links in IE 10.
 */
a {
  background: transparent;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */
a:active,
a:hover {
  outline: 0;
}

/* Text-level semantics
   ========================================================================== */
/**
 * Address styling not present in IE 8/9/10/11, Safari, and Chrome.
 */
abbr[title] {
  border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 4+, Safari, and Chrome.
 */
b,
strong {
  font-weight: bold;
}

/**
 * Address styling not present in Safari and Chrome.
 */
dfn {
  font-style: italic;
}

/**
 * Address styling not present in IE 8/9.
 */
mark {
  background: #ff0;
  color: #000;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */
sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

sup {
  top: -0.5em;
}

sub {
  bottom: -0.25em;
}

/* Embedded content
   ========================================================================== */
/**
 * Remove border when inside `a` element in IE 8/9/10.
 */
img {
  border: 0;
}

/**
 * Correct overflow not hidden in IE 9/10/11.
 */
svg:not(:root) {
  overflow: hidden;
}

/* Grouping content
   ========================================================================== */
/**
 * Remove margin
 */
figure {
  margin: 0;
}

/**
 * Address differences between Firefox and other browsers.
 */
hr {
  box-sizing: content-box;
  height: 0;
}

/**
 * Contain overflow in all browsers.
 */
pre {
  overflow: auto;
}

/**
 * Address odd `em`-unit font size rendering in all browsers.
 */
code,
kbd,
pre,
samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

/* Forms
   ========================================================================== */
/**
 * Known limitation: by default, Chrome and Safari on OS X allow very limited
 * styling of `select`, unless a `border` property is set.
 */
/**
 * 1. Correct color not being inherited.
 *    Known issue: affects color of disabled elements.
 * 2. Correct font properties not being inherited.
 * 3. Address margins set differently in Firefox 4+, Safari, and Chrome.
 */
button,
input,
optgroup,
select,
textarea {
  color: inherit;
  /* 1 */
  font: inherit;
  /* 2 */
  margin: 0;
  /* 3 */
}

/**
 * Address `overflow` set to `hidden` in IE 8/9/10/11.
 */
button {
  overflow: visible;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Firefox, IE 8/9/10/11, and Opera.
 * Correct `select` style inheritance in Firefox.
 */
button,
select {
  text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 */
button,
html input[type="button"],
input[type="reset"],
input[type="submit"] {
  -webkit-appearance: button;
  /* 2 */
  cursor: pointer;
  /* 3 */
}

/**
 * Re-set default cursor for disabled elements.
 */
button[disabled],
html input[disabled] {
  cursor: default;
}

/**
 * Remove inner padding and border in Firefox 4+.
 */
button::-moz-focus-inner,
input::-moz-focus-inner {
  border: 0;
  padding: 0;
}

/**
 * Address Firefox 4+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */
input {
  line-height: normal;
}

/**
 * It's recommended that you don't attempt to style these elements.
 * Firefox's implementation doesn't respect box-sizing, padding, or width.
 *
 * 1. Address box sizing set to `content-box` in IE 8/9/10.
 * 2. Remove excess padding in IE 8/9/10.
 */
input[type="checkbox"],
input[type="radio"] {
  box-sizing: border-box;
  /* 1 */
  padding: 0;
  /* 2 */
}

/**
 * Fix the cursor style for Chrome's increment/decrement buttons. For certain
 * `font-size` values of the `input`, it causes the cursor style of the
 * decrement button to change from `default` to `text`.
 */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  height: auto;
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari and Chrome
 *    (include `-moz` to future-proof).
 */
input[type="search"] {
  -webkit-appearance: textfield;
  /* 1 */
  /* 2 */
  box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari and Chrome on OS X.
 * Safari (but not Chrome) clips the cancel button when the search input has
 * padding (and `textfield` appearance).
 */
input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}

/**
 * 1. Correct `color` not being inherited in IE 8/9/10/11.
 * 2. Remove padding so people aren't caught out if they zero out fieldsets.
 */
legend {
  border: 0;
  /* 1 */
  padding: 0;
  /* 2 */
}

/**
 * Remove default vertical scrollbar in IE 8/9/10/11.
 */
textarea {
  overflow: auto;
}

/**
 * Don't inherit the `font-weight` (applied by a rule above).
 * NOTE: the default cannot safely be changed in Chrome and Safari on OS X.
 */
optgroup {
  font-weight: bold;
}

/* Tables
   ========================================================================== */
/**
 * Remove most spacing between table cells.
 */
table {
  border-collapse: collapse;
  border-spacing: 0;
}

td,
th {
  padding: 0;
}

/* Blockquote
   ========================================================================== */
blockquote {
  margin: 0;
}

/**
*
* Global
*
**/
*, *::before, *::after {
  box-sizing: border-box;
}

html, body, button {
  -webkit-font-smoothing: antialiased;
  font-smoothing: antialiased;
}

body {
  font-family: Helvetica, Arial, sans-serif;
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  font-weight: 300;
  color: #404040;
  position: relative;
}
body::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  width: 100%;
  z-index: 9;
  display: none;
  background-image: -webkit-linear-gradient(top, rgba(0, 0, 0, 0.15) 95%, rgba(0, 0, 0, 0.15) 100%);
  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.15) 95%, rgba(0, 0, 0, 0.15) 100%);
  background-size: 100% 26px;
}
body.debug::after {
  display: block;
  pointer-events: none;
}

pre {
  background: #f0f0f0;
  padding: 13px;
}

.main-container {
  box-sizing: content-box;
  position: relative;
  padding-left: 5%;
  padding-right: 5%;
  margin-left: auto;
  margin-right: auto;
}
@media only screen and (min-width: 1620px) {
  .main-container {
    padding-left: 4.8%;
    padding-right: 4.8%;
    max-width: 688px;
  }
}
@media only screen and (min-width: 1800px) {
  .main-container {
    padding-left: 4.4%;
    padding-right: 4.4%;
    max-width: 864px;
  }
}

.container {
  box-sizing: content-box;
  position: relative;
  padding-left: 5%;
  padding-right: 5%;
  margin-left: auto;
  margin-right: auto;
}
@media only screen and (min-width: 1620px) {
  .container {
    padding-left: 4.8%;
    padding-right: 4.8%;
    max-width: 688px;
  }
}
@media only screen and (min-width: 800px) {
  .container {
    padding-left: 4.4%;
    padding-right: 4.4%;
    max-width: 864px;
  }
}

@media only screen and (min-width: 1620px) {
  .container-medium {
    box-sizing: content-box;
    position: relative;
    padding-left: 5%;
    padding-right: 5%;
    margin-left: auto;
    margin-right: auto;
  }
}
@media only screen and (min-width: 1620px) and (min-width: 1620px) {
  .container-medium {
    padding-left: 4.8%;
    padding-right: 4.8%;
    max-width: 688px;
  }
}
@media only screen and (min-width: 1620px) and (min-width: 800px) {
  .container-medium {
    padding-left: 4.4%;
    padding-right: 4.4%;
    max-width: 864px;
  }
}

@media only screen and (max-width: 619px) {
  .container-small {
    box-sizing: content-box;
    position: relative;
    padding-left: 5%;
    padding-right: 5%;
    margin-left: auto;
    margin-right: auto;
  }
}
@media only screen and (max-width: 619px) and (min-width: 1620px) {
  .container-small {
    padding-left: 4.8%;
    padding-right: 4.8%;
    max-width: 688px;
  }
}
@media only screen and (max-width: 619px) and (min-width: 800px) {
  .container-small {
    padding-left: 4.4%;
    padding-right: 4.4%;
    max-width: 864px;
  }
}

@media only screen and (min-width: 800px) {
  .content {
    margin-right: 25.9%;
  }
  .content pre {
    margin-right: -25.9%;
  }
}

@font-face {
  font-family: "icons";
  src: url(component-sheet/images/icons/icons.eot);
  src: url(component-sheet/images/icons/icons.eot?#iefix) format("embedded-opentype"), url(component-sheet/images/icons/icons.woff2) format("woff2"), url(component-sheet/images/icons/icons.woff) format("woff"), url(component-sheet/images/icons/icons.ttf) format("truetype"), url(component-sheet/images/icons/icons.svg?#icons) format("svg");
  font-weight: normal;
  font-style: normal;
}
.icon {
  font-family: "icons";
  display: inline-block;
  vertical-align: top;
  line-height: 1;
  font-weight: normal;
  font-style: normal;
  speak: none;
  text-decoration: inherit;
  text-transform: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.icon-bullet::before, ul li::before, ul.list-links a::before, .list-anchor a::before {
  content: "\e001";
}

.icon-chevron-down::before {
  content: "\e002";
}

.icon-chevron-large::before {
  content: "\e003";
}

.icon-chevron-left::before, .article-nav-link--prev::before {
  content: "\e004";
}

.icon-chevron-right::before, .article-nav-link--next::before, ul.list-links.list-links--primary a::before {
  content: "\e005";
}

.icon-chevron-up::before {
  content: "\e006";
}

.icon-close::before {
  content: "\e007";
}

.icon-cog::before {
  content: "\e008";
}

.icon-diamond::before {
  content: "\e009";
}

.icon-exclamation::before {
  content: "\e00a";
}

.icon-google-dev::before {
  content: "\e00b";
}

.icon-hash::before {
  content: "\e00c";
}

.icon-introduction-to-media::before {
  content: "\e00d";
}

.icon-lessons::before {
  content: "\e00e";
}

.icon-menu::before {
  content: "\e00f";
}

.icon-minus::before {
  content: "\e010";
}

.icon-multi-device-layouts::before {
  content: "\e011";
}

.icon-performance::before {
  content: "\e012";
}

.icon-plus::before {
  content: "\e013";
}

.icon-question::before {
  content: "\e014";
}

.icon-slash::before {
  content: "\e015";
}

.icon-star::before {
  content: "\e016";
}

.icon-tick::before {
  content: "\e017";
}

.icon-user-input::before {
  content: "\e018";
}

/**
*
* Highlight
*
**/
.highlight-module {
  overflow: hidden;
  margin-top: 52px;
  margin-bottom: 26px;
  position: relative;
}
.highlight-module::after {
  background: #f0f0f0;
  content: "";
  height: 100%;
  position: absolute;
  top: 0;
  bottom: 0;
  z-index: 0;
  width: 100%;
  right: 0;
  left: 0;
}
.highlight-module ul,
.highlight-module ol {
  padding-left: 0;
}

.highlight-module__container {
  box-sizing: content-box;
  padding-left: 5%;
  padding-right: 5%;
  margin-left: auto;
  margin-right: auto;
  padding-bottom: 78px;
  z-index: 1;
  position: relative;
}
@media only screen and (min-width: 1620px) {
  .highlight-module__container {
    padding-left: 4.8%;
    padding-right: 4.8%;
    max-width: 688px;
  }
}
@media only screen and (min-width: 800px) {
  .highlight-module__container {
    padding-left: 4.4%;
    padding-right: 4.4%;
    max-width: 864px;
  }
}
.highlight-module__container::before {
  display: none;
}
@media only screen and (min-width: 1620px) {
  .highlight-module__container::before {
    display: block;
    position: absolute;
    top: 106px;
    right: 45px;
    font-family: "icons";
    font-size: 130px;
    line-height: 1px;
    text-align: center;
    height: 100%;
    width: 30.3%;
    color: #ffffff;
  }
}
.highlight-module--left .highlight-module__container::before {
  right: auto;
  left: 45px;
}
@media only screen and (min-width: 800px) {
  .highlight-module__container::before {
    top: 134px;
    width: 22.2%;
    font-size: 180px;
  }
  .highlight-module--large .highlight-module__container::before {
    font-size: 430px;
  }
}
@media only screen and (min-width: 1620px) {
  .highlight-module__container {
    padding-bottom: 52px;
  }
}
@media only screen and (min-width: 800px) {
  .highlight-module__container {
    min-height: 208px;
  }
}

.highlight-module__title {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 68px;
  font-weight: 300;
  line-height: 1.1471em;
  /* 78px */
  padding-top: 0.3824em;
  padding-bottom: 0;
  padding-top: 26px;
}
@media only screen and (min-width: 800px) {
  .highlight-module__title {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 110px;
    font-weight: 300;
    line-height: 1.19em;
    /* 130px */
    padding-top: 0.2364em;
    padding-bottom: 0;
  }
}
@media only screen and (min-width: 800px) {
  .highlight-module__title {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 42px;
    font-weight: 300;
    line-height: 1.2381em;
    /* 52px */
    padding-top: 0.6190em;
    padding-bottom: 0;
  }
}
@media only screen and (min-width: 800px) and (min-width: 800px) {
  .highlight-module__title {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 68px;
    font-weight: 300;
    line-height: 1.1471em;
    /* 78px */
    padding-top: 0.3824em;
    padding-bottom: 0;
  }
}

.highlight-module__cta {
  display: block;
}

/*==========  LEARNING  ==========*/
.highlight-module--learning {
  color: #ffffff;
}
.highlight-module--learning::after {
  background-color: #da2e75;
}
.highlight-module--learning a {
  color: #ffffff;
  text-decoration: underline;
}

/*==========  REMEMBER  ==========*/
.highlight-module--remember {
  color: #ffffff;
}
.highlight-module--remember::after {
  background-color: #09829a;
}
.highlight-module--remember a {
  color: #ffffff;
  text-decoration: underline;
}

/*==========  CODE  ==========*/
.highlight-module--code {
  overflow: visible;
  margin-bottom: 52px;
}
.highlight-module--code pre {
  margin: 0;
  padding-top: 26px;
  font-size: 14px;
  line-height: 26px;
  padding-bottom: 0;
  padding-left: 0;
  padding-right: 0;
}
.highlight-module--code pre span {
  margin: 0;
  padding: 0;
  display: inline-block;
}
.highlight-module--code code {
  margin: 0;
  padding: 0;
  word-spacing: -2px;
  display: block;
}
.highlight-module--code .highlight-module__container {
  padding-bottom: 0;
}
.highlight-module--code .highlight-module__cta {
  position: absolute;
  bottom: -26px;
}

/*==========  LEFT  ==========*/
@media only screen and (min-width: 800px) {
  .highlight-module--left::after {
    width: 80%;
    right: 20%;
  }
}

/*==========  RIGHT  ==========*/
@media only screen and (min-width: 800px) {
  .highlight-module--right::after {
    width: 80%;
    left: 20%;
  }
}
@media only screen and (min-width: 800px) {
  .highlight-module--right.highlight-module--code::after {
    width: 100%;
    left: 0;
  }
}

/*==========  INLINE  ==========*/
.highlight-module--inline {
  color: #404040;
  overflow: visible;
  margin: 26px 0 0;
}
.highlight-module--inline .highlight-module__container {
  padding-bottom: 0;
}
.highlight-module--inline .highlight-module__container::before {
  display: none;
}
.highlight-module--inline .highlight-module__content {
  border-color: #e0e0e0;
  border-style: solid;
  border-width: 1px;
  border-left-width: 0;
  border-right-width: 0;
  margin-bottom: -2px;
  padding: 0 0 26px;
}
.highlight-module--inline .highlight-module__title {
  font-size: 20px;
  font-weight: 300;
  line-height: 1.3000em;
  /* 26px */
  padding-top: 1.3000em;
  padding-bottom: 0;
}
@media only screen and (min-width: 800px) {
  .highlight-module--inline .highlight-module__title {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 26px;
    font-weight: 300;
    line-height: 1.0000em;
    /* 26px */
    padding-top: 1.0000em;
    padding-bottom: 0;
  }
}
.highlight-module--inline.highlight-module--remember .highlight-module__title, .highlight-module--inline.highlight-module--remember li::before {
  color: #09829a;
}
.highlight-module--inline.highlight-module--learning .highlight-module__title, .highlight-module--inline.highlight-module--learning li::before {
  color: #da2e75;
}
.highlight-module--inline::after {
  display: none !important;
}

/*==========  COLORS  ==========*/
div.highlight > pre > code, code .highlight {
  background: transparent;
}

div.highlight > pre > code .c, code .highlight .c {
  color: #999988;
  font-style: italic;
}

/* Comment */
div.highlight > pre > code .err, code .highlight .err {
  color: #a61717;
  background-color: #e3d2d2;
}

/* Error */
/* Keyword */
/* Operator */
div.highlight > pre > code .cm, code .highlight .cm {
  color: #999988;
  font-style: italic;
}

/* Comment.Multiline */
div.highlight > pre > code .cp, code .highlight .cp {
  color: #737373;
}

/* Comment.Preproc */
div.highlight > pre > code .c1, code .highlight .c1 {
  color: #999988;
  font-style: italic;
}

/* Comment.Single */
div.highlight > pre > code .cs, code .highlight .cs {
  color: #737373;
  font-style: italic;
}

/* Comment.Special */
div.highlight > pre > code .gs, code .highlight .gd {
  color: #000000;
  background-color: #ffdddd;
}

/* Generic.Deleted */
div.highlight > pre > code .gd .x, code .highlight .gd .x {
  color: #000000;
  background-color: #ffaaaa;
}

/* Generic.Deleted.Specific */
div.highlight > pre > code .ge, code .highlight .ge {
  font-style: italic;
}

/* Generic.Emph */
div.highlight > pre > code .gr, code .highlight .gr {
  color: #aa0000;
}

/* Generic.Error */
div.highlight > pre > code .gh, code .highlight .gh {
  color: #737373;
}

/* Generic.Heading */
div.highlight > pre > code .gi, code .highlight .gi {
  color: #000000;
  background-color: #ddffdd;
}

/* Generic.Inserted */
div.highlight > pre > code .gi .x, code .highlight .gi .x {
  color: #000000;
  background-color: #aaffaa;
}

/* Generic.Inserted.Specific */
div.highlight > pre > code .go, code .highlight .go {
  color: #888888;
}

/* Generic.Output */
div.highlight > pre > code .gp, code .highlight .gp {
  color: #555555;
}

/* Generic.Prompt */
/* Generic.Strong */
div.highlight > pre > code .gu, code .highlight .gu {
  color: #aaaaaa;
}

/* Generic.Subheading */
div.highlight > pre > code .gt, code .highlight .gt {
  color: #aa0000;
}

/* Generic.Traceback */
/* Keyword.Constant */
/* Keyword.Declaration */
/* Keyword.Pseudo */
/* Keyword.Reserved */
div.highlight > pre > code .kt, code .highlight .kt {
  color: #445588;
}

/* Keyword.Type */
div.highlight > pre > code .m, code .highlight .m {
  color: #009999;
}

/* Literal.Number */
div.highlight > pre > code .s, code .highlight .s {
  color: #da2e75;
}

/* Literal.String */
div.highlight > pre > code .na, code .highlight .na {
  color: teal;
}

/* Name.Attribute */
div.highlight > pre > code .nb, code .highlight .nb {
  color: #0086b3;
}

/* Name.Builtin */
div.highlight > pre > code .nc, code .highlight .nc {
  color: #445588;
}

/* Name.Class */
div.highlight > pre > code .no, code .highlight .no {
  color: teal;
}

/* Name.Constant */
div.highlight > pre > code .ni, code .highlight .ni {
  color: purple;
}

/* Name.Entity */
div.highlight > pre > code .ne, code .highlight .ne {
  color: #990000;
}

/* Name.Exception */
div.highlight > pre > code .nf, code .highlight .nf {
  color: #990000;
}

/* Name.Function */
div.highlight > pre > code .nn, code .highlight .nn {
  color: #555555;
}

/* Name.Namespace */
div.highlight > pre > code .nt, code .highlight .nt {
  color: #09829a;
}

/* Name.Tag */
div.highlight > pre > code .nv, code .highlight .nv {
  color: teal;
}

/* Name.Variable */
/* Operator.Word */
div.highlight > pre > code .w, code .highlight .w {
  color: #bbbbbb;
}

/* Text.Whitespace */
div.highlight > pre > code .mf, code .highlight .mf {
  color: #009999;
}

/* Literal.Number.Float */
div.highlight > pre > code .mh, code .highlight .mh {
  color: #009999;
}

/* Literal.Number.Hex */
div.highlight > pre > code .mi, code .highlight .mi {
  color: #009999;
}

/* Literal.Number.Integer */
div.highlight > pre > code .mo, code .highlight .mo {
  color: #009999;
}

/* Literal.Number.Oct */
div.highlight > pre > code .sb, code .highlight .sb {
  color: #da2e75;
}

/* Literal.String.Backtick */
div.highlight > pre > code .sc, code .highlight .sc {
  color: #da2e75;
}

/* Literal.String.Char */
div.highlight > pre > code .sd, code .highlight .sd {
  color: #da2e75;
}

/* Literal.String.Doc */
div.highlight > pre > code .s2, code .highlight .s2 {
  color: #da2e75;
}

/* Literal.String.Double */
div.highlight > pre > code .se, code .highlight .se {
  color: #da2e75;
}

/* Literal.String.Escape */
div.highlight > pre > code .sh, code .highlight .sh {
  color: #da2e75;
}

/* Literal.String.Heredoc */
div.highlight > pre > code .si, code .highlight .si {
  color: #da2e75;
}

/* Literal.String.Interpol */
div.highlight > pre > code .sx, code .highlight .sx {
  color: #da2e75;
}

/* Literal.String.Other */
div.highlight > pre > code .sr, code .highlight .sr {
  color: #009926;
}

/* Literal.String.Regex */
div.highlight > pre > code .s1, code .highlight .s1 {
  color: #da2e75;
}

/* Literal.String.Single */
div.highlight > pre > code .ss, code .highlight .ss {
  color: #990073;
}

/* Literal.String.Symbol */
div.highlight > pre > code .bp, code .highlight .bp {
  color: #737373;
}

/* Name.Builtin.Pseudo */
div.highlight > pre > code .vc, code .highlight .vc {
  color: teal;
}

/* Name.Variable.Class */
div.highlight > pre > code .vg, code .highlight .vg {
  color: teal;
}

/* Name.Variable.Global */
div.highlight > pre > code .vi, code .highlight .vi {
  color: teal;
}

/* Name.Variable.Instance */
div.highlight > pre > code .il, code .highlight .il {
  color: #009999;
}

/* Literal.Number.Integer.Long */
/**
*
* Editorial Header
*
**/
.editorial-header {
  overflow: hidden;
}
.editorial-header .breadcrumbs {
  color: #3372df;
}
.editorial-header .breadcrumbs a {
  color: #3372df;
}
@media only screen and (min-width: 1620px) {
  .editorial-header .container {
    position: relative;
  }
  .editorial-header .container::before {
    content: "\e003";
    font-family: "icons";
    font-size: 1000px;
    line-height: 0;
    display: block;
    position: absolute;
    top: 0;
    right: 100%;
    color: #f0f0f0;
    margin: 168px -35px 0 0;
  }
}

.editorial-header__excerpt {
  font-size: 20px;
  font-weight: 300;
  line-height: 1.3000em;
  /* 26px */
  padding-top: 1.3000em;
  padding-bottom: 0;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
}

.editorial-header .tag {
  padding-top: 52px;
}

.editorial-header__subtitle {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 42px;
  font-weight: 300;
  line-height: 1.2381em;
  /* 52px */
  padding-top: 0.6190em;
  padding-bottom: 0;
  padding-top: 0;
  color: #3372df;
}
@media only screen and (min-width: 800px) {
  .editorial-header__subtitle {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 68px;
    font-weight: 300;
    line-height: 1.1471em;
    /* 78px */
    padding-top: 0.3824em;
    padding-bottom: 0;
  }
}
@media only screen and (min-width: 1620px) {
  .editorial-header__subtitle {
    padding-top: 0;
    padding-bottom: 26px;
  }
}

.editorial-header__toc {
  margin-top: 26px;
}
.editorial-header__toc ol {
  padding-top: 0;
}
@media only screen and (min-width: 1620px) {
  .editorial-header__toc ol {
    padding-top: 0;
  }
}

.editorial-header__toc-title {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  border-bottom: 1px solid #e0e0e0;
  margin-bottom: 13px;
  padding-bottom: 13px !important;
  color: #3372df;
}

/**
*
* Editorial Header
*
**/
.summary-header {
  background-color: #3372df;
  padding-bottom: 78px;
  color: #ffffff;
  margin-bottom: 26px;
  box-shadow: inset 0 2px 0 0 #fff;
}
.summary-header .breadcrumbs__link {
  color: #ffffff;
}

.summary-header__anchor-list {
  margin-top: 52px;
}

.summary-header__anchors-item a {
  color: #ffffff;
}

/**
*
* Related items
*
**/
.related-guides {
  margin-top: 78px;
  padding-bottom: 50px;
  border-top: 2px solid #e0e0e0;
  padding-top: 50px;
}

.related-guides__list .list-links {
  padding-top: 0;
}
.related-guides__list a {
  display: block;
}

.related-guides__title {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 26px;
  font-weight: 300;
  line-height: 1.0000em;
  /* 26px */
  padding-top: 1.0000em;
  padding-bottom: 0;
  padding-top: 0;
}
@media only screen and (min-width: 800px) {
  .related-guides__title {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 42px;
    font-weight: 300;
    line-height: 1.2381em;
    /* 52px */
    padding-top: 0.6190em;
    padding-bottom: 0;
  }
}
@media only screen and (min-width: 1620px) {
  .related-guides__title {
    padding-top: 0;
  }
}

.related-guides__main-link {
  text-transform: uppercase;
}
.related-guides__main-link::before {
  content: "#";
  display: inline-block;
  padding-right: 2px;
}

/**
*
* In this guide
*
**/
.in-this-guide {
  margin-top: -78px;
}

.in-this-guide__title {
  font-size: 20px;
  font-weight: 300;
  line-height: 1.3000em;
  /* 26px */
  padding-top: 1.3000em;
  padding-bottom: 0;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  margin-bottom: 26px;
}

/**
*
* Articles section
*
**/
.articles-section {
  background: #f0f0f0;
  text-align: center;
  padding: 26px 0 104px;
}

.articles-count {
  color: #3372df;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-weight: 400;
}

.article-section__icon {
  top: -26px;
}
@media only screen and (min-width: 1620px) {
  .article-section__icon {
    top: -39px;
  }
}

.guides-section {
  background: #f0f0f0;
  text-align: center;
  padding: 26px 0 104px;
}

/**
*
* Page header
*
**/
.page-header {
  text-align: center;
}
.page-header .breadcrumbs {
  text-align: left;
  color: #3372df;
}
.page-header .breadcrumbs a {
  color: #3372df;
}
.page-header h3 {
  color: #404040;
  padding-top: 52px;
}

.page-header__excerpt {
  position: relative;
  padding-top: 0;
}
.page-header__excerpt:last-child {
  padding-bottom: 78px;
}

/**
*
* Editorial Header
*
**/
.featured-section {
  background: #f0f0f0;
}

/**
*
* Editorial Header
*
**/
.featured-spotlight {
  background: #404040;
  color: #ffffff;
  overflow: hidden;
  padding-bottom: 77px;
  margin-top: 52px;
}
.featured-spotlight p {
  padding-bottom: 26px;
}
.featured-spotlight .cta--primary {
  color: #ffffff;
}
.featured-spotlight .cta--primary:hover {
  color: #ffffff;
}

.featured-spotlight__container {
  position: relative;
}

@media only screen and (max-width: 619px) {
  .featured-spotlight__img {
    padding-top: 58.4%;
    padding-bottom: 0;
    height: 0;
    overflow: hidden;
    position: relative;
    width: 100%;
  }
}
.featured-spotlight__img img {
  margin: 0 auto;
  display: block;
  width: 100%;
  position: absolute;
  left: 0;
  top: 0;
  margin: 0;
}
@media only screen and (min-width: 1620px) {
  .featured-spotlight__img img {
    width: auto;
    max-width: none;
    left: 109%;
  }
}
@media only screen and (min-width: 800px) {
  .featured-spotlight__img img {
    left: 107.4%;
  }
}

/**
*
* Quote
*
**/
.quote__content {
  position: relative;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  padding-top: 1.6250em;
  padding-bottom: 0;
  padding-top: 104px;
  padding-left: 26px;
}
@media only screen and (min-width: 800px) {
  .quote__content {
    font-size: 20px;
    font-weight: 300;
    line-height: 1.3000em;
    /* 26px */
    padding-top: 1.3000em;
    padding-bottom: 0;
  }
}
@media only screen and (min-width: 1620px) {
  .quote__content {
    padding-top: 52px;
    padding-left: 0;
  }
}
.quote__content p {
  border-top: 1px solid #e0e0e0;
  text-align: right;
  font-weight: 500;
  margin-top: 12px;
  padding-top: 13px;
}
.quote__content::before {
  content: open-quote;
  display: block;
  position: absolute;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-weight: 700;
  color: #f0f0f0;
  top: 90px;
  left: 26px;
  font-size: 260px;
}
@media only screen and (min-width: 1620px) {
  .quote__content::before {
    top: 225px;
    left: -210px;
    font-size: 540px;
  }
}

/**
*
* Article nav
*
**/
.article-nav {
  overflow: hidden;
  position: relative;
}
.article-nav::before {
  content: "";
  border-left: 2px solid #e0e0e0;
  height: 100%;
  position: absolute;
  top: 0;
  left: 50%;
}

.article-nav-link {
  padding: 26px 32px;
  float: left;
  width: 50%;
  position: relative;
}
.article-nav-link::before {
  position: absolute;
  top: 21px;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 20px;
  font-weight: 400;
}
@media only screen and (min-width: 1620px) {
  .article-nav-link::before {
    top: 25px;
    font-size: 26px;
    display: block;
    padding: 13px 10px;
    color: #ffffff;
    background: #3372df;
  }
}

.article-nav p {
  padding: 0;
  margin: 0;
}

.article-nav-link--prev {
  text-align: right;
}
.article-nav-link--prev::before {
  font-family: "icons";
  left: 32px;
}
@media only screen and (min-width: 1620px) {
  .article-nav-link--prev p {
    padding-left: 52px;
  }
}

.article-nav-link--next::before {
  font-family: "icons";
  right: 32px;
}
@media only screen and (min-width: 1620px) {
  .article-nav-link--next p {
    padding-right: 52px;
  }
}

.article-nav-count {
  font-size: 20px;
  font-weight: 300;
  line-height: 1.3000em;
  /* 26px */
  padding-top: 1.3000em;
  padding-bottom: 0;
  font-weight: 700;
}
@media only screen and (min-width: 800px) {
  .article-nav-count {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 26px;
    font-weight: 300;
    line-height: 1.0000em;
    /* 26px */
    padding-top: 1.0000em;
    padding-bottom: 0;
  }
}
@media only screen and (min-width: 1620px) {
  .article-nav-count {
    font-weight: 400;
  }
}

/**
*
* Text module
*
**/
@media only screen and (min-width: 1620px) {
  .did-you-know ol {
    padding-top: 0 !important;
  }
}
.did-you-know .cta--primary {
  margin-top: 26px;
  font-weight: 500;
}
.did-you-know > .g--half {
  position: relative;
  padding-left: 0;
}
@media only screen and (min-width: 1620px) {
  .did-you-know > .g--half {
    padding-left: 32px;
  }
}

.did-you-know__symbol {
  padding-bottom: 312px;
}
@media only screen and (min-width: 1620px) {
  .did-you-know__symbol {
    padding-bottom: 26px;
  }
}
.did-you-know__symbol::after {
  content: "\e014";
  color: #3372df;
  font-family: "icons";
  font-size: 300px;
  top: 150px;
  left: 30%;
  position: relative;
  display: block;
  width: 0;
}
@media only screen and (min-width: 1620px) {
  .did-you-know__symbol::after {
    position: absolute;
    font-size: 400px;
    top: 200px;
    left: 110%;
  }
}
@media only screen and (min-width: 800px) {
  .did-you-know__symbol::after {
    position: absolute;
    font-size: 400px;
    top: 200px;
    left: 124%;
  }
}

/**
*
* Table of contents
*
**/
.toc__title {
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  padding-top: 1.6250em;
  padding-bottom: 0;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  padding-bottom: 13px;
  margin-bottom: 12px;
  border-bottom: 1px solid #e0e0e0;
}
@media only screen and (min-width: 800px) {
  .toc__title {
    font-size: 20px;
    font-weight: 300;
    line-height: 1.3000em;
    /* 26px */
    padding-top: 1.3000em;
    padding-bottom: 0;
  }
}
@media only screen and (min-width: 1620px) {
  .toc__title {
    padding-bottom: 13px;
    margin-bottom: 13px;
  }
}

.toc__list {
  padding-top: 0;
  border-bottom: 1px solid #e0e0e0;
  padding-bottom: 12px;
  margin-bottom: 13px;
}
.toc__list a {
  display: block;
}

.toc__sublist {
  padding-top: 0;
}

/**
*
* Next Lessons
*
**/
.next-lessons {
  background: #404040;
  padding: 26px 26px 52px;
  margin-top: 26px;
  color: #ffffff;
  position: relative;
}
@media only screen and (min-width: 1620px) {
  .next-lessons h3 i {
    display: none;
  }
}
.next-lessons::before, .next-lessons::after {
  color: rgba(255, 255, 255, 0.5);
  position: absolute;
  display: none;
}
@media only screen and (min-width: 1620px) {
  .next-lessons::before, .next-lessons::after {
    display: inline-block;
  }
}
@media only screen and (min-width: 1620px) {
  .next-lessons::before {
    content: attr(data-current-lesson);
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 16px;
    font-weight: 400;
    line-height: 1;
    background: #404040;
    display: inline-block;
    padding: 5px 7px;
    right: 127px;
    top: 143px;
    z-index: 1;
    color: rgba(255, 255, 255, 0.5);
  }
}
@media only screen and (min-width: 800px) {
  .next-lessons::before {
    font-size: 20px;
    padding-left: 15px;
    padding-right: 15px;
    top: 126px;
    right: 230px;
  }
}
@media only screen and (min-width: 1620px) {
  .next-lessons::after {
    content: "\e00e";
    font-family: "icons";
    font-size: 150px;
    right: 40px;
    top: 185px;
  }
}
@media only screen and (min-width: 800px) {
  .next-lessons::after {
    font-size: 210px;
    right: 120px;
  }
}

/**
*
* Grid
*
**/
@media only screen and (min-width: 1620px) and (max-width: 799px) {
  .g-medium--1 {
    float: left;
    margin-right: 4.5%;
    width: 30.3%;
  }

  .g-medium--push-1 {
    margin-left: 34.8%;
  }

  .g-medium--pull-1 {
    margin-right: 34.8%;
  }

  .g-medium--2 {
    float: left;
    margin-right: 4.5%;
    width: 65.1%;
  }

  .g-medium--push-2 {
    margin-left: 69.6%;
  }

  .g-medium--pull-2 {
    margin-right: 69.6%;
  }

  .g-medium--3 {
    float: left;
    margin-right: 4.5%;
    width: 99.9%;
    margin-right: 0;
  }

  .g-medium--full {
    float: left;
    margin-right: 4.5%;
    margin-right: 0;
    width: 100%;
  }

  .g--third {
    float: left;
    margin-right: 4.5%;
    width: 30.3%;
  }

  .g--half,
  .g-medium--half {
    float: left;
    margin-right: 4.5%;
    width: 47.75%;
  }

  .g-medium--last {
    margin-right: 0;
  }

  .g-medium--last + .g-medium--half {
    clear: left;
  }

  .g--pull-half {
    margin-right: 52.25%;
  }
}
@media only screen and (min-width: 800px) {
  .g-wide--1 {
    float: left;
    margin-right: 3.7%;
    width: 22.2%;
  }

  .g-wide--push-1 {
    margin-left: 25.9%;
  }

  .g-wide--pull-1 {
    margin-right: 25.9%;
  }

  .g-wide--2 {
    float: left;
    margin-right: 3.7%;
    width: 48.1%;
  }

  .g-wide--push-2 {
    margin-left: 51.8%;
  }

  .g-wide--pull-2 {
    margin-right: 51.8%;
  }

  .g-wide--3 {
    float: left;
    margin-right: 3.7%;
    width: 74%;
  }

  .g-wide--push-3 {
    margin-left: 77.7%;
  }

  .g-wide--pull-3 {
    margin-right: 77.7%;
  }

  .g-wide--4 {
    float: left;
    margin-right: 3.7%;
    width: 99.9%;
    margin-right: 0;
  }

  .g-wide--last {
    margin-right: 0;
  }

  .g-wide--full {
    float: left;
    margin-right: 3.7%;
    margin-right: 0;
    width: 100%;
  }

  .g--third {
    float: left;
    margin-right: 3.7%;
    width: 30.8%;
  }

  .g--half,
  .g-wide--half {
    float: left;
    margin-right: 3.7%;
    width: 48.15%;
  }

  .g--pull-half {
    margin-right: 51.85%;
  }
}
.g--last {
  margin-right: 0;
}

.g--centered {
  float: none;
  margin-left: auto;
  margin-right: auto;
}

.grid-overlay {
  display: none;
  pointer-events: none;
}
.debug .grid-overlay {
  box-sizing: content-box;
  position: relative;
  padding-left: 5%;
  padding-right: 5%;
  margin-left: auto;
  margin-right: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  height: 100%;
  display: block;
}
@media only screen and (min-width: 1620px) {
  .debug .grid-overlay {
    padding-left: 4.8%;
    padding-right: 4.8%;
    max-width: 688px;
  }
}
@media only screen and (min-width: 800px) {
  .debug .grid-overlay {
    padding-left: 4.4%;
    padding-right: 4.4%;
    max-width: 864px;
  }
}
.debug .grid-overlay [class*="g-"] {
  height: 100%;
  background-color: rgba(89, 89, 89, 0.2);
}
@media only screen and (min-width: 1620px) and (max-width: 799px) {
  .debug .grid-overlay .g-wide--last {
    display: none;
  }
}
@media only screen and (max-width: 619px) {
  .debug .grid-overlay {
    display: none;
  }
}

/**
*
* Typography
*
**/
h1, h2, h3, h4, h5, p {
  margin: 0;
}

.small,
small {
  font-size: 13px;
  line-height: 2.0000em;
  /* 26px */
  padding-top: 2.0000em;
  padding-bottom: 0;
}

.base,
p,
ul,
ol {
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  padding-top: 1.6250em;
  padding-bottom: 0;
}

.medium,
h4 {
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  padding-top: 1.6250em;
  padding-bottom: 0;
}
@media only screen and (min-width: 1800px) {
  .medium,
  h4 {
    font-size: 20px;
    font-weight: 300;
    line-height: 1.3000em;
    /* 26px */
    padding-top: 1.3000em;
    padding-bottom: 0;
  }
}

.large,
h3 {
  font-size: 20px;
  font-weight: 300;
  line-height: 1.3000em;
  /* 26px */
  padding-top: 1.3000em;
  padding-bottom: 0;
}
@media only screen and (min-width: 1800px) {
  .large,
  h3 {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 26px;
    font-weight: 300;
    line-height: 1.0000em;
    /* 26px */
    padding-top: 1.0000em;
    padding-bottom: 0;
  }
}

.xlarge,
h2 {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 26px;
  font-weight: 300;
  line-height: 1.0000em;
  /* 26px */
  padding-top: 1.0000em;
  padding-bottom: 0;
}
@media only screen and (min-width: 1800px) {
  .xlarge,
  h2 {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 42px;
    font-weight: 300;
    line-height: 1.2381em;
    /* 52px */
    padding-top: 0.6190em;
    padding-bottom: 0;
  }
}

.xxlarge,
h1 {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 42px;
  font-weight: 300;
  line-height: 1.2381em;
  /* 52px */
  padding-top: 0.6190em;
  padding-bottom: 0;
}
@media only screen and (min-width: 1800px) {
  .xxlarge,
  h1 {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 68px;
    font-weight: 300;
    line-height: 1.1471em;
    /* 78px */
    padding-top: 0.3824em;
    padding-bottom: 0;
  }
}

.huge {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 68px;
  font-weight: 300;
  line-height: 1.1471em;
  /* 78px */
  padding-top: 0.3824em;
  padding-bottom: 0;
}
@media only screen and (min-width: 2800px) {
  .huge {
    font-family: "Roboto Condensed", Helvetica, sans-serif;
    font-size: 110px;
    font-weight: 300;
    line-height: 1.19em;
    /* 130px */
    padding-top: 0.2364em;
    padding-bottom: 0;
  }
}

li > p {
  padding-top: 0;
}

/**
*
* Button
*
**/
.button, .button--primary, .button--secondary, .button--secondary-variation {
  display: inline-block;
  padding: 12px 32px;
  margin-bottom: 13px;
  margin-top: 13px;
  min-height: 26px;
  text-align: center;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-weight: 600;
  text-decoration: none;
  outline: 0;
  -webkit-transition: none;
          transition: none;
}
.button:hover, .button--primary:hover, .button--secondary:hover, .button--secondary-variation:hover {
  background: #4d4d4d;
  color: #ffffff;
  border: 1px solid #4d4d4d;
  text-decoration: none;
}

.button--primary {
  background: #4285f4;
  color: white;
  border: 1px solid #1266f1;
}

.button--secondary {
  background: white;
  color: #3372df;
  border: 1px solid #e6e6e6;
}

.button--secondary-variation {
  background: white;
  color: #3372df;
  border: 1px solid #e6e6e6;
  border-color: transparent;
}

/**
*
* List
*
**/
ul,
ol {
  list-style: none;
  margin: 0;
}
@media only screen and (max-width: 619px) {
  ul,
  ol {
    padding-left: 0;
  }
}

ul li {
  position: relative;
  padding-left: 16px;
}
ul li::before {
  font-family: "icons";
  font-size: 13px;
  display: block;
  font-weight: 400;
  position: absolute;
  top: 0;
  left: 0;
  line-height: 26px;
}
ul li::before {
  font-size: 4px;
}

ol {
  counter-reset: list;
}
ol > li {
  position: relative;
  padding-left: 32px;
}
ol > li::before {
  counter-increment: list;
  content: "0" counter(list);
  color: inherit;
  font-weight: 400;
  display: inline-block;
  position: absolute;
  left: 0;
}
ol > li:nth-child(10n) ~ li::before, ol > li:nth-child(10n)::before {
  content: counter(list);
}

ul ol,
ol ul {
  padding-top: 0;
}

/*==========  LIST LINKS  ==========*/
ul.list-links li::before {
  display: none;
}
ul.list-links a {
  font-weight: 400;
}
ul.list-links a::before {
  font-family: "icons";
  font-size: 13px;
  display: block;
  font-weight: 400;
  position: absolute;
  top: 0;
  left: 0;
  line-height: 26px;
}
ul.list-links a::before {
  font-size: 4px;
}
ul.list-links.list-links--primary a {
  font-weight: 400;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  line-height: 1;
  text-decoration: none;
}
ul.list-links.list-links--primary a::before {
  font-family: "icons";
  font-size: 13px;
  display: block;
  font-weight: 400;
  position: absolute;
  top: 0;
  left: 0;
  line-height: 26px;
}

ol.list-links li::before {
  display: none;
}
ol.list-links li a {
  display: inline-block;
  font-weight: 300;
}
ol.list-links li a::before {
  counter-increment: list;
  content: "0" counter(list);
  color: inherit;
  font-weight: 400;
  display: inline-block;
  position: absolute;
  left: 0;
}
ol.list-links li:nth-child(10n) ~ li a::before, ol.list-links li:nth-child(10n) a::before {
  content: counter(list);
}
ol.list-links.list-links--secondary a::before {
  display: none;
}

.list-links--secondary {
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  padding-top: 1.6250em;
  padding-bottom: 0;
  padding-left: 0;
}
.list-links--secondary li {
  padding-left: 0;
}

/*==========  ANCHOR LIST  ==========*/
.list-anchor {
  padding-left: 0;
}
.list-anchor li {
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  padding-top: 1.6250em;
  padding-bottom: 0;
  padding-top: 0;
  padding-left: 0;
}
.list-anchor li::before {
  display: none;
}
.list-anchor a {
  line-height: 1;
  display: inline-block;
  padding-left: 16px;
}
.list-anchor a::before {
  font-family: "icons";
  font-size: 13px;
  display: block;
  font-weight: 400;
  position: absolute;
  top: 0;
  left: 0;
  line-height: 26px;
}
.list-anchor a::before {
  font-size: 4px;
}

/*==========  SMALL LIST  ==========*/
@media only screen and (min-width: 1620px) {
  .list-small li {
    font-size: 13px;
    line-height: 2.0000em;
    /* 26px */
    padding-top: 2.0000em;
    padding-bottom: 0;
    padding-top: 0;
  }
}

/*==========  CENTERED LIST  ==========*/
.list-centered {
  text-align: center;
  padding-left: 0;
}

/*==========  FEATURED LIST  ==========*/
.featured-list {
  padding-top: 78px;
  padding-bottom: 78px;
}

.featured-list__item {
  background: #ffffff;
  padding-left: 0;
  padding-top: 26px;
  padding-bottom: 26px;
  margin-top: 26px;
}
@media only screen and (min-width: 1620px) {
  .featured-list__item {
    min-height: 338px;
    padding: 52px 32px;
  }
}
.featured-list__item:first-child {
  margin-top: 0;
}
.featured-list__item p {
  margin-bottom: 26px;
}

.featured-list__img-wrapper {
  display: none;
  position: relative;
  padding-top: 26px;
  margin: 0 -5%;
}
@media only screen and (min-width: 1620px) {
  .featured-list__img-wrapper {
    display: block;
    padding-top: 0;
    margin: 0;
  }
}

@media only screen and (min-width: 1620px) {
  .featured-list__img {
    padding-top: 60.8%;
    padding-bottom: 0;
    height: 0;
    overflow: hidden;
    position: absolute;
    width: 100%;
  }
}
.featured-list__img img {
  display: block;
  margin: 0 auto;
  max-width: 100%;
}
@media only screen and (min-width: 1620px) {
  .featured-list__img img {
    margin: 0;
    position: absolute;
    top: 0;
    height: 100%;
    width: 100%;
    left: 0;
  }
}

/*==========  RELATED GUIDES LIST  ==========*/
.related-guides-list {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  padding-top: 0;
  padding-left: 0;
}
@media only screen and (min-width: 1620px) {
  .related-guides-list {
    padding-top: 26px;
  }
}
@media only screen and (min-width: 800px) {
  .related-guides-list {
    padding-top: 0;
  }
}
.related-guides-list p {
  padding-top: 0;
}
.related-guides-list .tag {
  padding-top: 0;
}
.related-guides-list li {
  padding-top: 26px;
  padding-bottom: 25px;
  border-bottom: 1px solid #e0e0e0;
}
.related-guides-list li:last-child {
  border-color: transparent;
}
@media only screen and (min-width: 1620px) {
  .related-guides-list li {
    padding-top: 0;
    padding-bottom: 0;
    border-color: transparent;
  }
}

/*==========  LIST RESET  ==========*/
.list--reset {
  padding-left: 0;
}
.list--reset li {
  padding-left: 0;
}
.list--reset.list-links a::before, .list--reset li::before {
  display: none !important;
}

/*==========  LESSONS  ==========*/
.list-lessons {
  padding-left: 0;
}
.list-lessons a {
  color: #ffffff;
}
.list-lessons .current,
.list-lessons .current a {
  text-decoration: none;
  cursor: default;
}
.list-lessons .current .icon {
  font-size: 13px;
  display: inline-block;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 100%;
  width: 26px;
  line-height: 26px;
  text-align: center;
  margin-left: 7px;
}

/*==========  GUIDES INTO - used on homepage  ==========*/
.list-guides-intro {
  margin-bottom: 52px;
}
@media only screen and (max-width: 619px) {
  .list-guides-intro {
    padding-top: 52px;
  }
}
.list-guides-intro li {
  border-bottom: 1px solid #e0e0e0;
  padding-bottom: 51px;
  margin-bottom: 52px;
}
@media only screen and (min-width: 1620px) {
  .list-guides-intro li {
    border-color: transparent;
    padding-bottom: 0;
  }
}
.list-guides-intro li:last-child {
  border-bottom: transparent;
  margin-bottom: 0;
}

/**
*
* Link
*
**/
a {
  color: #3372df;
}

a:hover {
  text-decoration: none;
}

.cta--primary {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  color: #3372df;
  font-weight: 400;
  display: inline-block;
  line-height: 1;
  text-decoration: none;
}
.cta--primary:hover {
  color: #404040;
}
.cta--primary::before {
  display: inline-block;
  padding-right: 10px;
  font-family: "icons";
  line-height: 25px;
  font-size: 13px;
  content: "\e005";
}

.cta--secondary {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  color: #3372df;
  font-weight: 400;
  display: inline-block;
  line-height: 1;
}
.cta--secondary:hover {
  color: #404040;
}

/**
*
* Table
*
**/
table {
  margin-top: 26px;
  width: 100%;
}
table thead {
  background: #3372df;
  color: #ffffff;
}
table th {
  text-align: center;
  display: none;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  padding-top: 1.6250em;
  padding-bottom: 0;
}
@media only screen and (min-width: 800px) {
  table th {
    font-size: 20px;
    font-weight: 300;
    line-height: 1.3000em;
    /* 26px */
    padding-top: 1.3000em;
    padding-bottom: 0;
  }
}
@media only screen and (min-width: 1620px) {
  table tr {
    border-bottom: 1px solid #ffffff;
  }
}
table tbody {
  background: #f0f0f0;
}
table td {
  display: block;
  padding-top: 13px;
  padding-bottom: 13px;
}
table td::before {
  content: attr(data-th) " :";
  display: inline-block;
  color: #ffffff;
  background: #3372df;
  border-right: 2px solid #ffffff;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  width: 100px;
  max-height: 100%;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 16px;
  font-weight: 400;
  padding-left: 13px;
  padding-top: 13px;
}
@media only screen and (min-width: 1620px) {
  table td::before {
    display: none;
  }
}
table th,
table td {
  position: relative;
  padding-left: 140px;
}
@media only screen and (min-width: 1620px) {
  table th,
  table td {
    display: table-cell;
  }
}
@media only screen and (min-width: 1620px) {
  table th {
    padding: 26px;
    padding-top: 13px;
    padding-bottom: 12px;
  }
}
@media only screen and (min-width: 1620px) {
  table td {
    padding: 26px;
    padding-bottom: 25px;
  }
}

td:last-child::after {
  content: "";
  display: block;
  background: #ffffff;
  height: 1px;
  left: 0;
  position: absolute;
  bottom: 0;
  width: 100%;
}
@media only screen and (min-width: 1620px) {
  td:last-child::after {
    display: none;
  }
}

.table-2 col {
  width: 344px;
}
@media only screen and (min-width: 800px) {
  .table-2 col {
    width: 432px;
  }
}
@media only screen and (min-width: 1620px) {
  .table-2 th:first-child,
  .table-2 td:first-child {
    border-right: 2px solid #ffffff;
  }
}

.table-3 col {
  width: 229.3333333333px;
}
@media only screen and (min-width: 800px) {
  .table-3 col {
    width: 288px;
  }
}
@media only screen and (min-width: 1620px) {
  .table-3 th:nth-child(2),
  .table-3 td:nth-child(2) {
    border-left: 2px solid #ffffff;
    border-right: 2px solid #ffffff;
  }
}

.table-4 col {
  width: 172px;
}
@media only screen and (min-width: 800px) {
  .table-4 col {
    width: 216px;
  }
}
@media only screen and (min-width: 1620px) {
  .table-4 th:nth-child(2), .table-4 th:nth-child(3),
  .table-4 td:nth-child(2),
  .table-4 td:nth-child(3) {
    border-left: 2px solid #ffffff;
    border-right: 2px solid #ffffff;
  }
}

/**
*
* Media - imgs/videos
*
**/
img,
video,
object {
  max-width: 100%;
}

.content img {
  margin-top: 26px;
  margin-bottom: 26px;
}

/**
*
* Breadcrumb
*
**/
.breadcrumbs {
  display: none;
  position: relative;
  z-index: 1;
}
@media only screen and (min-width: 1620px) {
  .breadcrumbs {
    display: block;
  }
}

.breadcrumbs p {
  font-size: 13px;
  line-height: 2.0000em;
  /* 26px */
  padding-top: 2.0000em;
  padding-bottom: 0;
  padding-top: 26px;
}

.breadcrumbs__link {
  font-size: 13px;
  line-height: 2.0000em;
  /* 26px */
  padding-top: 2.0000em;
  padding-bottom: 0;
  color: black;
  font-weight: 400;
  padding-top: 0;
}
@media only screen and (min-width: 1620px) {
  .breadcrumbs__link {
    padding-top: 0;
  }
}

/**
*
* subsection__title
*
**/
.subsection-title {
  color: #404040;
  margin-top: 52px;
}

.subsection-number {
  font-size: 16px;
  line-height: 1.6250em;
  /* 26px */
  padding-top: 1.6250em;
  padding-bottom: 0;
  padding-top: 0;
  display: block;
}

/**
*
* Articles list
*
**/
.articles-list {
  padding-left: 0;
}

.articles-list__item {
  padding-bottom: 52px;
  padding-left: 0;
}
.articles-list__item:last-child {
  padding-bottom: 53px;
}
.articles-list__item::before {
  content: "";
  display: block;
  width: 40%;
  height: 1px;
  box-shadow: inset 0 1px 0 0 #e0e0e0;
  margin-right: 0;
  margin-left: 30%;
}
.articles-list__item h3 a:hover {
  text-decoration: none;
}
.articles-list__item p {
  margin-top: 26px;
  margin-bottom: 26px;
}
.articles-list__item:first-child {
  padding-top: 0;
}
@media only screen and (min-width: 1620px) {
  .articles-list__item:first-child {
    padding-top: 24px;
  }
}
.articles-list__item:first-child::before {
  display: none;
}

/**
*
* Guides List
*
**/
.guides-list {
  overflow: hidden;
}
@media only screen and (min-width: 1620px) {
  .guides-list {
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-justify-content: space-between;
        -ms-flex-pack: justify;
            justify-content: space-between;
    -webkit-flex-wrap: wrap;
        -ms-flex-wrap: wrap;
            flex-wrap: wrap;
    padding-top: 52px;
  }
}

.guides-list__item {
  padding: 0;
  background: #ffffff;
  margin-top: 26px;
  margin-bottom: 0;
}
@media only screen and (min-width: 1620px) {
  .guides-list__item {
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-flex-direction: column;
        -ms-flex-direction: column;
            flex-direction: column;
    -webkit-flex-wrap: wrap;
        -ms-flex-wrap: wrap;
            flex-wrap: wrap;
  }
}
.guides-list__item h3 {
  margin: 0 32px;
}
.guides-list__item p {
  margin: 26px 32px 0;
}
@media only screen and (min-width: 1620px) {
  .guides-list__item .primary-content {
    -webkit-flex: 1;
        -ms-flex: 1;
            flex: 1;
  }
}
.guides-list__item .secondary-content {
  position: relative;
  margin-top: 51px;
  border-top: 1px solid #e0e0e0;
}
@media only screen and (min-width: 1620px) {
  .guides-list__item .secondary-content {
    width: 100%;
  }
}
.guides-list__item .secondary-content .icon-circle {
  position: absolute;
  top: -28px;
  left: 50%;
  margin-left: -21px;
  border: 2px solid #ffffff;
}
.guides-list__item .secondary-content .icon-circle i {
  font-size: 23px;
}
.guides-list__item ol {
  margin: 26px 0 0;
  padding: 52px 0 52px;
  margin-top: 0;
}
.guides-list__item::before {
  display: none;
}

/**
*
* Icon Circle
*
**/
.icon-circle,
.icon-circle--large {
  height: 0;
  width: 0;
  background: #737373;
  display: block;
  position: relative;
  border-radius: 100%;
  font-size: 0;
  padding: 22px;
  margin: 4px auto;
}
.icon-circle i,
.icon-circle span,
.icon-circle--large i,
.icon-circle--large span {
  position: absolute;
  line-height: 0px;
  top: 50%;
  width: 100%;
  left: 0;
  text-align: center;
  color: #ffffff;
  font-size: 26px;
}
.icon-circle span,
.icon-circle--large span {
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  font-size: 26px;
  font-weight: 700;
}
@media only screen and (min-width: 1620px) {
  .icon-circle span,
  .icon-circle--large span {
    font-size: 42px;
  }
}

.icon-circle--large {
  margin-top: 0;
  margin-bottom: 0;
  padding: 26px;
  position: relative;
}
.icon-circle--large i {
  font-size: 26px;
}
@media only screen and (min-width: 1620px) {
  .icon-circle--large i {
    font-size: 42px;
  }
}
@media only screen and (min-width: 1620px) {
  .icon-circle--large {
    padding: 37px;
    border: 2px solid #ffffff;
  }
  a .icon-circle--large {
    padding: 38px;
    box-shadow: inset 0px 0px 0px 1px rgba(255, 255, 255, 0.42);
    border: 1px solid;
    -webkit-transition: all 100ms linear;
            transition: all 100ms linear;
    -webkit-transform: translateZ(0);
            transform: translateZ(0);
  }
  .no-touch a:hover .icon-circle--large {
    box-shadow: inset 0px 0px 0px 1px #ffffff;
    -webkit-transform: scale(1.1);
            transform: scale(1.1);
  }
}

.icon-circle--nav {
  height: 0;
  width: 0;
  background: #737373;
  display: block;
  position: relative;
  border-radius: 100%;
  font-size: 0;
  padding: 13px;
  margin: 0 auto;
}
@media only screen and (min-width: 1620px) {
  .icon-circle--nav {
    padding: 22px;
    margin-top: 4px;
    margin-bottom: 4px;
  }
}
.icon-circle--nav i {
  position: absolute;
  line-height: 1px;
  top: 50%;
  width: 100%;
  left: 0;
  text-align: center;
  color: #ffffff;
  font-size: 16px;
}
@media only screen and (min-width: 1620px) {
  .icon-circle--nav i {
    font-size: 26px;
  }
}

/**
*
* Themed styles
*
**/
.theme--multi-device-layouts .themed {
  color: #297ea9;
}
.theme--introduction-to-media .themed {
  color: #cf423a;
}
.theme--user-input .themed {
  color: #2c8566;
}
.theme--performance .themed {
  color: #7b5294;
}

.theme--multi-device-layouts .themed--background, .theme--multi-device-layouts .themed--background.next-lessons::before {
  background-color: #297ea9;
}
.theme--introduction-to-media .themed--background, .theme--introduction-to-media .themed--background.next-lessons::before {
  background-color: #cf423a;
}
.theme--user-input .themed--background, .theme--user-input .themed--background.next-lessons::before {
  background-color: #2c8566;
}
.theme--performance .themed--background, .theme--performance .themed--background.next-lessons::before {
  background-color: #7b5294;
}

.theme--multi-device-layouts .themed--hover:hover {
  color: #297ea9;
}
.theme--introduction-to-media .themed--hover:hover {
  color: #cf423a;
}
.theme--user-input .themed--hover:hover {
  color: #2c8566;
}
.theme--performance .themed--hover:hover {
  color: #7b5294;
}

.theme--multi-device-layouts .themed--hover-secondary:hover {
  color: #89c4e2;
}
.theme--introduction-to-media .themed--hover-secondary:hover {
  color: #edb8b5;
}
.theme--user-input .themed--hover-secondary:hover {
  color: #78d2b3;
}
.theme--performance .themed--hover-secondary:hover {
  color: #c4add2;
}

.article--multi-device-layouts .article-container h1, .article--multi-device-layouts
.article-container h2 {
  color: #297ea9;
}
.article--introduction-to-media .article-container h1, .article--introduction-to-media
.article-container h2 {
  color: #cf423a;
}
.article--user-input .article-container h1, .article--user-input
.article-container h2 {
  color: #2c8566;
}
.article--performance .article-container h1, .article--performance
.article-container h2 {
  color: #7b5294;
}

.nav-theme--multi-device-layouts .themed--hover:hover {
  color: #297ea9;
}
.nav-theme--introduction-to-media .themed--hover:hover {
  color: #cf423a;
}
.nav-theme--user-input .themed--hover:hover {
  color: #2c8566;
}
.nav-theme--performance .themed--hover:hover {
  color: #7b5294;
}

.nav-theme--multi-device-layouts .themed {
  color: #297ea9;
}
.nav-theme--introduction-to-media .themed {
  color: #cf423a;
}
.nav-theme--user-input .themed {
  color: #2c8566;
}
.nav-theme--performance .themed {
  color: #7b5294;
}

.nav-theme--multi-device-layouts .themed--background {
  background-color: #297ea9;
}
.nav-theme--introduction-to-media .themed--background {
  background-color: #cf423a;
}
.nav-theme--user-input .themed--background {
  background-color: #2c8566;
}
.nav-theme--performance .themed--background {
  background-color: #7b5294;
}

/**
*
* Styleguide
*
**/
.page--styleguide .styleguide__module-title {
  margin-bottom: 26px;
}
.page--styleguide section {
  margin-bottom: 52px;
  border-bottom: 1px solid #ccc;
  padding-bottom: 77px;
}
.page--styleguide .styleguide__color-list {
  text-align: center;
}
.page--styleguide .styleguide__color-list li {
  border-bottom: 52px solid;
  margin-bottom: 26px;
  position: relative;
}
.page--styleguide .styleguide__breadcrumb .breadcrumbs {
  display: block;
}
.page--styleguide .styleguide__lists ul,
.page--styleguide .styleguide__lists ol {
  margin-bottom: 26px;
}
.page--styleguide .styleguide__inverted-block {
  background: #e8e8e8;
  padding: 0 13px;
}
.page--styleguide .styleguide__theme-block {
  background: #297ea9;
  padding: 0 13px;
}

.demo {
  margin-bottom: 26px;
  margin-top: 26px;
}

.demo [class*="g-"] {
  background-color: #eeeeee;
  position: relative;
  margin-bottom: 26px;
  min-height: 156px;
}
.demo [class*="g-"]::before, .demo [class*="g-"]::after {
  font-size: 13px;
  line-height: 2.0000em;
  /* 26px */
  padding-top: 2.0000em;
  padding-bottom: 0;
  display: block;
  margin: 0 10px;
}
.demo [class*="g-"]::before {
  content: "HTML classes: ";
  font-weight: 700;
}
.demo [class*="g-"]::after {
  content: attr(class);
  word-spacing: 15px;
}

/**
*
* Resources page
*
**/
.page--resources .article-section__icon, .page--resources .articles-count, .page--resources .guides-list__item .secondary-content {
  display: none;
}
.page--resources .primary-content {
  padding-top: 26px;
  padding-bottom: 52px;
}
.page--resources .primary-content p {
  margin-top: 0;
}

/**
*
* Helper
*
**/
.clear::before, .clear::after {
  content: "";
  display: table;
}
.clear::after {
  clear: both;
}

/*==========  COLORS  ==========*/
.color--blue {
  color: #3372df;
}

.color--red {
  color: #cb4437;
}

.color--green {
  color: #0f9d58;
}

.color--yellow {
  color: #f4b400;
}

.color--blue-secondary {
  color: #b7cdf4;
}

.color--red-secondary {
  color: #ebb6b0;
}

.color--green-secondary {
  color: #56efa5;
}

.color--yellow-secondary {
  color: #ffd45b;
}

.color--gray-background {
  color: #f0f0f0;
}

.color--gray-keyline {
  color: #e0e0e0;
}

.color--gray {
  color: #737373;
}

.color--gray-dark {
  color: #404040;
}

.color--text {
  color: #404040;
}

.color--highlight {
  color: #3372df;
}

.color--warning {
  color: #ffd45b;
}

.color--danger {
  color: #cb4437;
}

.color--muted {
  color: #737373;
}

.color--remember {
  color: #09829a;
}

.color--learning {
  color: #da2e75;
}

.color--layouts {
  color: #297ea9;
}

.color--user {
  color: #2c8566;
}

.color--media {
  color: #cf423a;
}

.color--performance {
  color: #7b5294;
}

.color--layouts-secondary {
  color: #89c4e2;
}

.color--user-secondary {
  color: #78d2b3;
}

.color--media-secondary {
  color: #edb8b5;
}

.color--performance-secondary {
  color: #c4add2;
}

/*==========  TEXT DIVIDER  ==========*/
.text-divider {
  position: relative;
  margin-bottom: 26px;
}
.text-divider::after {
  content: "";
  display: block;
  position: absolute;
  width: 40%;
  height: 1px;
  box-shadow: 0 1px 0 0 #e0e0e0;
  left: 30%;
  bottom: -13px;
}
.text-divider.xlarge {
  margin-bottom: 52px;
}
.text-divider.xlarge::after {
  bottom: -26px;
}
.text-divider.xxlarge {
  margin-bottom: 78px;
}
.text-divider.xxlarge::after {
  bottom: -39px;
}
.text-divider.huge {
  margin-bottom: 78px;
}
.text-divider.huge::after {
  bottom: -39px;
}

/*==========  GENERIC  ==========*/
.centered {
  text-align: center;
}

/*==========  TAG  ==========*/
.tag {
  font-size: 13px;
  line-height: 2.0000em;
  /* 26px */
  padding-top: 2.0000em;
  padding-bottom: 0;
  font-family: "Roboto Condensed", Helvetica, sans-serif;
  text-transform: uppercase;
  font-weight: 700;
  display: inline-block;
  text-decoration: none;
}
.tag:hover {
  color: #404040;
}
.tag::before {
  content: "# ";
  display: inline-block;
}
</style>
    <style>:host {
  display: block;
  width: 100%;
  position: relative;
  background-color: #fff;
}

:host table {
  width: 320;
  display: block;
  max-width: 100% !important;
  max-height: 400px;
  cursor: pointer;
  overflow: scroll;
}

:host table td.large {
  word-wrap: normal;
  word-break: normal;
  padding-left: 120px;
  padding-top: .6em;
}
:host table td a {
  word-wrap: normal;
  word-break: break-all;
}

:host #cursor {
  background: #000;
  position: absolute;
  cursor: none;
  pointer-events: none;
}
</style>
    <table id="table">
      <thead id="thead">
      </thead>
      <tbody id="tbody">
      </tbody>
    </table>
    <shadow></shadow>
  </template>
    <script>
require(['jquery'], function($) {
      Polymer("ceci-component-sheet", {
        onCellTap: function(heading, value) {
          this.broadcast("sendvalue", value);
          this.broadcast("sendheading", heading);
        },
        ready: function() {
          this.super();

          var that = this;
          var key = "1nNDHnDvMPUZM7IAiHTNM3XLh2NRrWVDIDenkXe7i2C0";
          Tabletop.init( { key: key,
                           callback: function(data, tabletop) { 
                            var model_names = tabletop.model_names;
                            var cells = [];
                           var headings = [];
                            $.each( data[0], function( key, val ) {
                              if (key != 'rowNumber') {
                                cells.push("<th>" + key + "</th>");
                                headings.push(key);
                              }
                            });
                            $("<tr/>", {id:"header", html: cells.join("")}).appendTo($(that.$.thead));
                            var items = [];
                            var cells = [];
                            $.each( data, function( key, val ) {
                              cells = [];
                              $.each(val, function(key, cell) {
                              if (key != 'rowNumber') {
//                                if (key == 'email') {
//                                  cell = "<a Xhref='mailto:" + cell + "'>"+cell+"</a>";
//                                } else if (key == 'phone') {
//                                  cell = "<a Xhref='tel:" + cell + "'>"+cell+"</a>";
//                                }
                                cells.push("<td class='large' data-th='"+key+"'>" + cell + "</td>");
                              }
                            });
                            var bits = $("<tr/>", {html: cells.join("")});
                            bits.appendTo($(that.$.tbody));
                          });
                            $(that.$.tbody).on('click', 'td', function(evt) {
                              console.log(evt.target);
                              that.onCellTap(evt.target.getAttribute('data-th'), evt.target.textContent);
                            });
//                          console.log("body", $(that.$.tbody));
//                          var links = that.$.tbody.querySelectorAll('a');
//                          console.log("LINKS", links);
//                          Array.prototype.forEach.call(links, function(link) {
//                            link.on('click', function(evt) {
//                              console.log(evt);
//                            });
//                          });
                            console.log(data) 
                           },
                           simpleSheet: true } )
          
//          $.getJSON("http://localhost:4000/data", function(payload) {
//            var items = [];
//            var cells = [];
//            var title = payload.title;
//            var data = payload.data;
//            $.each( data[0], function( key, val ) {
//              cells.push("<th>" + val + "</th>");
//            });
//            $("<tr/>", {id:"header", html: cells.join("")}).appendTo($(that.$.thead));
//            $.each( data.slice(1), function( key, val ) {
//              cells = [];
//              $.each(val, function(key, cell) {
//                if (data[0][key] == 'Email') {
//                  cell = "<a Xhref='mailto:" + cell + "'>"+cell+"</a>";
//                } else if (data[0][key] == 'Phone') {
//                  cell = "<a Xhref='tel:" + cell + "'>"+cell+"</a>";
//                }
//                cells.push("<td class='large' data-th='"+data[0][key]+"'>" + cell + "</td>");
//              });
//              var bits = $("<tr/>", {html: cells.join("")});
//              bits.appendTo($(that.$.tbody));
//            });
//            console.log("body", $(that.$.tbody));
//            var links = that.$.tbody.querySelectorAll('a');
//            console.log("LINKS", links);
//            Array.prototype.forEach.call(links, function(link) {
//              link.on('click', function(evt) {
//                console.log(evt);
//              });
//            });
//          });
          this.super();
        }
      });
});
    </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-snaredrum" attributes="drumcolor backgroundcolor stickcolor volume" drumcolor="#FFFFFF" stickcolor="#000000" backgroundcolor="#ff9900" extends="ceci-element" volume=".5" assetpath="component-snaredrum/">
  <ceci-definition>
    {
      "tags": ["music", "instrument", "audio"],
      "thumbnail": "./thumbnail.png",
      "description": "Plays a snare drum.",
      "name": "Snare Drum",
      "broadcasts": {},
      "listeners": {
        "kick": {
          "description": "Causes a fake click event to occur.",
          "label": "Hit",
          "default": true
        }
      },
      "attributes": {
        "stickcolor": {
          "label": "Stick Color",
          "editable": "color"
        },
        "volume": {
          "label": "Volume",
          "editable": "number",
          "min" : 0,
          "max" : 1
        },
        "backgroundcolor": {
          "label": "Background Color",
          "editable": "color"
        },
        "drumcolor": {
          "label": "Drum Color",
          "description": "Color of the drum.",
          "editable": "color"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  background: orange;
}

:host #kick {
  height: 75px;
  display: block;
  cursor: pointer;
  overflow: hidden;
  width: 100%;
  position: relative;
}

:host #kick, :host #kick * {

}

:host #drum {
  height: 200px;
  width: 200px;
  background: white;
  position: absolute;
  left: calc(50% - 100px);
  border-radius: 150px;
  top: -20px;
  -webkit-transform: scaleY(.4);
  -moz-transform: scaleY(.4);
  transform: scaleY(.4);
}

:host #stick {
  height: 8px;
  width: 120px;
  background: black;
  position: absolute;
  left: 40px;
  top: 20px;
  border-radius: 100px;
  -webkit-transform-origin: left;
  -moz-transform-origin: left;
  transform-origin: left;
}

:host .hit #stick {
  top: 25px;
  -webkit-transform: rotate(15deg);
  -moz-transform: rotate(15deg);
  transform: rotate(15deg);
}

:host .hit #drum {
  top: -15px;
}

:host audio {
  display: none;
}
</style>
    <div id="kick" class="off" on-ceci-pressdown="{{kickon}}" on-ceci-pressup="{{kickoff}}">
      <div id="drum"></div>
      <div id="stick"></div>
    </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-snaredrum', {
      audioBuffer: null,
      ready: function () {
        this.super();

        this.ctx = window.AudioContext || window.webkitAudioContext;

        if (!this.ctx) {
          console.error('Could not get AudioContext for kickdrum.');
          return;
        }

        this.ctx = new this.ctx();
        var that = this;
        var xhr = new XMLHttpRequest();
        xhr.open("GET", this.resolvePath('sounds/snare.mp3'), true);
        xhr.responseType = "arraybuffer";
        xhr.onload = function () {
          if (xhr.response.byteLength) {
            that.ctx.decodeAudioData(xhr.response, function(data) {
              that.audioBuffer = data;
            },
            function (e) {
              console.error('Error decoding the audio buffer for kickdrum.', arguments);
            });
          }
        };
        xhr.send();
      },
      kickon: function () {
        var src = this.ctx.createBufferSource();
        var gain = this.ctx.createGain();
        gain.gain.value = this.volume;
        src.buffer = this.audioBuffer;
        src.loop = false;
        src.connect(gain);
        gain.connect(this.ctx.destination);
        src.start(0);
        this.$.kick.classList.add("hit");
      },
      kick : function(){
        this.kickon();
        var that = this;
        window.setTimeout(function(){
          that.kickoff();
        },100);
      },
      kickoff : function(){
        this.$.kick.classList.remove("hit");
      },
      stickcolorChanged: function (oldValue, newValue) {
        this.$.stick.style.background = newValue;
      },
      drumcolorChanged: function (oldValue, newValue) {
        this.$.drum.style.background = newValue;
      },
      backgroundcolorChanged: function (oldValue, newValue) {
        this.$.kick.style.background = newValue;
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-spacer" attributes="height background" extends="ceci-element" height="30" background="#FFFFFF" assetpath="component-spacer/">
  <template>
    <style>:host {
  display: block;
  width: 100%;
}
</style>
    <div style="background: {{background}}; height: {{height}}px;" id="spacer"></div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["starter", "layout"],
      "thumbnail": "./thumbnail.png",
      "name": "Spacer",
      "description": "Adds blank space to separate your bricks.",
      "broadcasts": {},
      "listeners": {},
      "attributes": {
        "height": {
          "label": "Height",
          "description": "The height of the spacer.",
          "editable": "number",
          "min" : 5
        },
        "background": {
          "label": "Background Color",
          "description": "The background color of the spacer.",
          "editable": "color"
        }
      }
    }
  </ceci-definition>
  <script>
    Polymer('ceci-spacer', {
      ready: function () {
        this.super();
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-splitter" extends="ceci-element" assetpath="component-splitter/">
  <template>
    <style>:host, :host .splitter {
  display: block;
  width: 100%;
  height: 50px;
}

:host .splitter {
  background: url(component-splitter/thumbnail.png) black no-repeat center;
}
</style>
    <div class="splitter">
    </div>
    <shadow></shadow>
  </template>
  <ceci-definition>
    {
      "tags": ["channel", "splitter"],
      "thumbnail": "./thumbnail.png",
      "description": "Splits an input on one channel into broadcasts on multiple channels.",
      "name": "Channel Splitter",
      "broadcasts": {
        "splitter1": {
          "label": "Output 1",
          "description": "repeats input",
          "default": true
        },
        "splitter2": {
          "label": "Output 2",
          "description": "repeats input"
        },
        "splitter3": {
          "label": "Output 3",
          "description": "repeats input"
        },
        "splitter4": {
          "label": "Output 4",
          "description": "repeats input"
        },
        "splitter5": {
          "label": "Output 5",
          "description": "repeats input"
        },
        "splitter6": {
          "label": "Output 6",
          "description": "repeats input"
        }
      },
      "listeners": {
        "input": {
          "description": "input 1",
          "label": "Input",
          "default": true
        }
      },
      "attributes": {}
    }
  </ceci-definition>
  <script>
    Polymer('ceci-splitter', {
      ready: function () {
        this.super();
      },
      input: function(val) {
        this.broadcast("splitter1", val );
        this.broadcast("splitter2", val );
        this.broadcast("splitter3", val );
        this.broadcast("splitter4", val );
        this.broadcast("splitter5", val );
        this.broadcast("splitter6", val );
      }
    });
  </script>
</polymer-element>

</div>
<div hidden><polymer-element name="ceci-text-input" attributes="resetonsubmit buttonlabel inputname placeholdertext emitonchange label" extends="ceci-element" placeholdertext="Placeholder" buttonlabel="Submit" inputname="Text Input" resetonsubmit="true" assetpath="component-text-input/">
  <ceci-definition>
    {
      "tags": ["input", "form", "button"],
      "thumbnail": "./thumbnail.png",
      "name": "Text Input with Button",
      "description": "Sends text you've entered when you press the button.",
      "broadcasts": {
        "sendData": {
          "label": "Send Data",
          "description": "Sends the current value of the input field.",
          "default": true
        }
      },
      "listeners": {
        "click": {
          "description": "Causes a fake click event to occur.",
          "label": "Send Data"
        },
        "setvalue": {
          "description": "Set the value of the field.",
          "label": "Set Value"
        }
      },
      "attributes": {
        "inputname": {
          "label": "Input Name",
          "description": "The name of this field, helpful when saving data.",
          "editable": "text"
        },
        "buttonlabel": {
          "label": "Button Label",
          "description": "The label on the button.",
          "editable": "text"
        },
        "placeholdertext": {
          "label": "Placeholder Text",
          "description": "The text you want your input field to show by default.",
          "editable": "text"
        },
        "resetonsubmit": {
          "label": "Reset on Submit",
          "description": "Reset the input field after submitting the value.",
          "editable": "boolean"
        },
        "emitonchange": {
          "label": "Emit on change",
          "description": "Background color of the button while it is being clicked or tapped.",
          "editable": "boolean"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host input[type=text]{
  padding: 10px 5px;
  height: 100%;
  border: none;
  color: #000;
  font-weight: 500;
  font-size: 1.6rem;
  background-color: #FFF;
  background-size: auto 100%;
  width: 70%;
  border-radius: 0;
  margin: 0;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border: 0.1rem solid rgb(204, 204, 204);
  border-right: none;
  text-indent: 0.6rem;
  outline: none;
  font-weight: 400;
  font-size: 1.6rem;
  font-family: "FiraSans", sans-serif;
}

:host .onchange input[type=text]{
  width: 100%;
}

:host .onchange button {
  display: none;
}

:host #wrapper {
  position: relative;
}

:host button {
  background: linear-gradient(to top, #f8f8f8, #ddd);
  background: -webkit-linear-gradient(top, #f8f8f8, #ddd);
  border: 0.1rem solid #a6a6a6;
  border-radius: 0 0.2rem 0.2rem 0;
  right: 0px;

  width: 30%;
  padding: 0;
  height: 100%;
  font-weight: 500;
  font-size: 1.6rem;
  font-family: "FiraSans", sans-serif;
  position: absolute;
}

:host button:active {
  background: linear-gradient(to top, #ddd, #ddd);
  background: -webkit-linear-gradient(top, #ddd, #ddd);
}</style>
    <div id="wrapper">
      <input id="inputText" type="text" on-input="{{input}}" on-keypress="{{keypress}}">
      <button id="button" on-click="{{submit}}">{{buttonlabel}}</button>
    </div>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-text-input', {
      emitonchange:false,
      ready: function () {
        this.super();
        var that = this;
        this.$.button.textContent = this.gettext("ceci-text-input/button") || this.$.button.textContent;
      },
      submit: function () {
        this.broadcast('sendData', this.$.inputText.value);
        if(this.resetonsubmit ===  "true"){
          this.$.inputText.value = "";
        }
      },
      click : function(){
        this.submit();
      },
      input: function (e) {
        if (!this.emitonchange) {
          return;
        }
        this.broadcast('sendData', this.$.inputText.value);
      },
      keypress: function (e) {
        if (!this.emitonchange) {
          if (e.keyCode == 13) {
            this.broadcast('sendData', this.$.inputText.value);
            this.$.inputText.value = '';
          }
        }
      },
      setvalue: function(v) {
        this.$.inputText.value = v;
      },
      emitonchangeChanged: function(oldValue, newValue) {
        this.$.wrapper.classList.toggle('onchange');
      },
      placeholdertextChanged: function(oldValue, newValue) {
        if (this.$.inputText.hasAttribute('placeholder')) {
          this.$.inputText.setAttribute("placeholder", newValue);
        }
        else {
          this.$.inputText.setAttribute("placeholder", newValue);
        }
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-textbox" attributes="text fontsize textalign textcolor backgroundcolor" extends="ceci-element" textalign="left" fontsize="16" textcolor="#666666" backgroundcolor="#FFFFFF" text="I&apos;m a textbox!" assetpath="component-textbox/">
  <ceci-definition>
    {
      "tags": ["form", "input", "text"],
      "thumbnail": "./thumbnail.png",
      "description": "Displays entered or incoming text.",
      "name": "Text",
      "broadcasts": {},
      "listeners": {
        "setValue": {
          "description": "Set value text box",
          "label": "Set Text"
        }
      },
      "attributes": {
        "text": {
          "label": "Text",
          "description": "A text for your label to show up in your app.",
          "editable": "text"
        },
        "textalign": {
          "label": "Text Alignment",
          "description": "Text Alignment",
          "editable": "select",
          "options": ["Left","Center","Right"]
        },
        "fontsize": {
          "label": "Font Size",
          "description": "Font Size",
          "editable": "number",
          "min" : "4",
          "max" : "50"
        },
        "backgroundcolor": {
          "label": "Background Color",
          "description": "Background Color",
          "editable": "color"
        },
        "textcolor": {
          "label": "Text Color",
          "description": "Text Color",
          "editable": "color"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}

:host p {
  padding: 10px;
  word-wrap: break-word;
  overflow: hidden;
  margin: 0;
  font-size: 15px;
  font-family: "FiraSans", sans-serif;
  font-weight: 500;
  line-height: auto;
}
</style>
      <p style="text-align: {{textalign}}; font-size: {{fontsize}}px; background: {{backgroundcolor}}; color: {{textcolor}}" id="textBox">{{text}}</p>
    <shadow></shadow>
  </template>
  <script>
    Polymer('ceci-textbox', {
      ready: function () {
        this.super();
      },
      setValue: function(e) {
        this.text = e;
      }
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-timer" extends="ceci-element" attributes="time" assetpath="component-timer/">
  <ceci-definition>
    {
      "name": "Timer",
      "thumbnail": "./thumbnail.png",
      "description": "Keeps track of time and broadcasts when time is up.",
      "tags": ["timer", "time"],
      "broadcasts": {
        "timeup": {
          "label": "Time is Up",
          "description": "Time is up!"
        }
      },
      "listeners": {
        "start": {
          "label": "Start",
          "description": "Starts the timer."
        },
        "pause": {
          "label": "Pause",
          "description": "Pauses the timer."
        },
        "reset": {
          "label": "Reset",
          "description": "Resets the timer."
        }
      },
      "attributes": {
        "time": {
          "label": "Time",
          "description": "Amount of time to elapse",
          "editable": "number"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>
      :host {
        display: block;
        height: 3.5em;
        padding-top: 5px;
        padding-bottom: 5px;
      }
      :host .timer, :host .elapsed-time {
        margin-left: 10px;
      }

      @-webkit-keyframes flashing {
        from {
          background-color: darkred;
          color: white;
        }
        to {
          background-color: transparent;
          color: darkred;
        }
      }

      @keyframes flashing {
        from {
          background-color: darkred;
          color: white;
        }
        to {
          background-color: transparent;
          color: darkred;
        }
      }

      :host #timerTime.timeup {
        -webkit-animation: flashing 2s infinite;
        animation: flashing 2s infinite;
        -webkit-animation-timing-function: steps(2, end);
        animation-timing-function: steps(2, end);
        font-weight: bold;
      }
    </style>
    <template if="{{time &gt; 0}}">
      <div class="timer"><strong>Time Left:</strong> <span id="timerTime">{{_timeLeftString}}</span></div>
    </template>
    <div class="elapsed-time"><strong>Elapsed Time:</strong> {{_elapsedTimeString}}</div>
    <shadow></shadow>
  </template>
  <script>
    function timeFromSeconds (milliseconds) {
      milliseconds = parseInt(milliseconds, 10);

      var hours = Math.floor(milliseconds / 3600000);
      var minutes = Math.floor((milliseconds - (hours * 3600000)) / 60000);
      var seconds = Math.floor((milliseconds - (hours * 3600000) - (minutes * 60000)) / 1000);

      milliseconds = milliseconds - (seconds * 1000) - (hours * 3600000) - (minutes * 60000);

      if (hours < 10) hours = "0" + hours;
      if (minutes < 10) minutes = "0" + minutes;
      if (seconds < 10) seconds = "0" + seconds;
      if (milliseconds < 10) milliseconds = "00" + milliseconds;
      else if (milliseconds < 100) milliseconds = "0" + milliseconds;

      return hours + ':' + minutes + ':' + seconds + '.' + milliseconds;
    }

    Polymer("ceci-timer", {
      time: 10,
      _timeLeft: 0,
      _elapsedTime: 0,
      _lastElapsedTime: 0,
      _timeUp: false,
      ready: function() {
        this.super();
        this._timeLeft = this.time * 1000;
        this._elapsedTimeString = timeFromSeconds(this._elapsedTime);
        this._timeLeftString = timeFromSeconds(this._timeLeft);
      },
      start: function() {
        if (this._timeUp || this._timerInterval) {
          this.reset();
        }
        this._startTime = Date.now();
        this._startTimer();
      },
      pause: function () {
        this._lastElapsedTime = this._elapsedTime;
        clearInterval(this._timerInterval);
        this._timerInterval = null;
      },
      reset: function () {
        clearInterval(this._timerInterval);
        this._timerInterval = null;
        this._timeUp = false;
        this._timeLeft = this.time * 1000;
        this._elapsedTime = 0;
        this._lastElapsedTime = 0;
        this._elapsedTimeString = timeFromSeconds(this._elapsedTime);
        this._timeLeftString = timeFromSeconds(this._timeLeft);
        this.$.timerTime.classList.remove('timeup');
      },
      _startTimer: function () {
        this._timerInterval = setInterval(function () {
          this._elapsedTime = Date.now() - this._startTime + this._lastElapsedTime;
          this._timeLeft = (this.time * 1000) - this._elapsedTime;
          this._elapsedTimeString = timeFromSeconds(this._elapsedTime);

          if (this._timeLeft <= 0) {
            this._timeLeftString = timeFromSeconds(0);
            if (!this._timeUp) {
              this._timeUp = true;
              this.$.timerTime.classList.add('timeup');
              this.broadcast('timeup');
            }
          }
          else {
            this._timeLeftString = timeFromSeconds(this._timeLeft);
          }
        }.bind(this), 50);
      },
    });
  </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-todo-list" extends="ceci-element" attributes="collection" collection="" assetpath="component-todo/">
  <ceci-definition>
    {
      "name": "To-Do List",
      "thumbnail": "./thumbnail.png",
      "description": "A list of things to do",
      "broadcasts": {
        "itemcompleted": {
          "label": "Item done",
          "description": "Sends a message that an item in the list was completed."
        },
        "allitemscompleted": {
          "label": "All items done",
          "description": "Sends a message that the todo list was completed."
        }
      },
      "listeners": {
        "additem": {
          "description": "Adds a todo list item.",
          "label": "Add Item",
          "default" : true
        }
      },
      "attributes": {
        "collection": {
          "description": "",
          "label": "Collection",
          "editable": "collection"
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
  background: white;
}

:host .hidden {
  display: none;
}

:host .list-container {
  padding: 10px;
}

:host .item {
  font-size: 16px;
  border-bottom: solid 1px #DDD;
}

:host .item:last-child {
  border: none;
}

:host .remove-column {
  text-align: center;
  cursor: pointer;
}

:host .remove-column:hover {
  color: #212429;
  background: #fff;
}

:host .remove-item {
  display: none;
  float: right;
  color: #639ccd;
}

:host .first-run-container {
  padding: 10px;
}

:host .first-run-container p {
  margin: 0;
  padding: 0;
  font-size: 16px;
  margin-bottom: 8px;
  color: #999;
}

:host .first-run-container h3 {
  margin: 0;
  padding: 0;
  font-size: 16px;
  font-weight: bold;
}

:host .first-run-container input {
  font-size: 16px;
  padding: 6px 3px;
}

:host .completed .remove-item {
  display: inline-block;
  float: right;
  color: #639ccd;
  cursor: pointer;
  padding: 10px 0;
}

:host label {
  display: block;
  padding: 10px 0;
  width: 240px;
}

:host .completed .remove-item:hover {
  text-decoration: underline;
}

:host .completed label {
  text-decoration: line-through;

  color: #999;
}

:host .no-items {
  font-size: 16px;
  margin: 0;
}

:host button {
  background: #6eba1d;
  border: none;
  font-size: 16px;
  color: white;
  padding: 8px 8px;
  cursor: pointer;

}
</style>
    <div class="first-run-container">
      <h3>Choose or Create a Collection</h3>
      <p>This Brick will store your items in a Collection with this name.</p>
      <input placeholder="Ex. &apos;todos&apos;" value="todos" type="text">
      <button on-click="{{addNewCollection}}">Done</button>
    </div>
    <div class="list-container hidden">
      <template if="{{ items.length == 0 }}">
      <p class="no-items">0 To-do Items</p>
      </template>
      <template repeat="{{item, itemindex in items}}">
        <div class="item {{item.completed | applyClassName}}">
          <a on-click="{{removeItem}}" data-item-index="{{itemindex}}" class="remove-item">Clear</a>
          <label>
            <input data-item-index="{{itemindex}}" on-change="{{onCheckboxChange}}" type="checkbox" checked="{{item.completed}}">
            {{item.description}}
          </label>
        </div>
      </template>
    </div>
    <shadow></shadow>
  </template>
    <script>
      Polymer("ceci-todo-list", {
        ready: function() {
          this.super();
          this.collections = document.querySelector("ceci-collections");
          this.items = [];
          this.onItemChange = null;
          this.completed = 0;
        },
        collectionReady: function() {
          var self = this;
          var collection = this.collections.getCollection(this.collection);
          var completedField = collection.getField("completed");
          var descriptionField = collection.getField("description");
          if (!completedField) {
            collection.addField("completed", "checkbox");
          }
          if (!descriptionField) {
            collection.addField("description", "text");
          }
          this.shadowRoot.querySelector(".list-container").classList.remove("hidden");
          this.shadowRoot.querySelector(".first-run-container").classList.add("hidden");
          this.items = [];
          this.completed = 0;
          for (var i = 0; i < collection.data.length; i++) {
            this.items.push(collection.data[i]);
            if (collection.data[i].completed) {
              this.completed++;
            }
          }
          this.onItemChange = function(e) {
            var detail = e.detail;
            if (detail.removed) {
              self.items.splice(detail.index, 1);
            }
            if (detail.added) {
              self.items.splice(detail.index, 0, detail.added);
            }
          };
          collection.addEventListener("itemchange", this.onItemChange);
          this.lastCollection = this.collection;
        },
        addNewCollection: function() {
          this.collection = this.shadowRoot.querySelector(".first-run-container input").value;
        },
        additem: function(item) {
          if(item){
            var collection = this.collections.getCollection(this.collection);
            collection.addItem({
              description: item
            });
          }
        },
        collectionChanged: function() {
          // Clean up any events on the old collection if we change collections.
          if (this.lastCollection && this.onItemChange) {
            var lastCollection = this.collections.getCollection(this.lastCollection);
            lastCollection.removeEventListener("itemchange", this.onItemChange);
            this.onItemChange = null;
          }
          this.shadowRoot.querySelector(".first-run-container input").value = this.collection;
          if (this.collection === "") {
            return;
          }
          var collection = this.collections.getCollection(this.collection);
          if (!collection) {
            this.collections.addCollection(this.collection);
          }
          this.async(this.collectionReady);
        },
        onCheckboxChange: function(event, detail, sender) {
          var collection = this.collections.getCollection(this.collection);
          var index = parseInt(sender.getAttribute('data-item-index'));
          var dataItem = collection.data[index];
          dataItem.completed = sender.checked;
          collection.updateItem(index, dataItem);
          if (sender.checked) {
            this.completed++;
            this.broadcast("itemcompleted", dataItem.description);
            if (this.completed >= this.items.length) {
              this.broadcast("allitemscompleted", this.completed);
            }
          } else {
            this.completed--;
          }
        },
        removeItem: function(event, detail, sender) {
          var collection = this.collections.getCollection(this.collection);
          var index = parseInt(sender.getAttribute('data-item-index'));
          var dataItem = collection.data[index];
          collection.removeItem(index);
          this.completed--;
        },
        applyClassName: function(value) {
          if (value) {
            return "completed";
          }
          return;
        }
      });
    </script>
</polymer-element>
</div>
<div hidden><polymer-element name="ceci-transformer" extends="ceci-element" attributes="message" assetpath="component-transformer/">
  <ceci-definition>
    {
      "name": "Signal Transformer",
      "thumbnail": "./thumbnail.png",
      "description": "Transforms an incoming signal to a value you set and broadcasts it.",
      "broadcasts": {
        "transformedMessage": {
          "label": "Transformed Message"
        }
      },
      "listeners": {
        "incomingMessage": {
          "label": "Incoming Message",
          "default" : true
        }
      },
      "attributes": {
        "message": {
          "label": "Message",
          "editable": "Text",
          "default" : true
        }
      }
    }
  </ceci-definition>
  <template>
    <style>:host {
  display: block;
  width: 100%;
}

:host .counter {
  text-align: center;
  font-size: 16px;
  padding: 8px 0px;
  background: #DDD;
  color: #666;
}

:host .counter .count-wrapper {
  display: inline-block;
  background: white;
  padding: 5px 12px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  border: solid 1px #CCC;
  border-width: 1px 1px 2px 1px;
}
</style>
    <div class="counter">
      <div class="count-wrapper">
        Transform to "<span class="count">{{message}}</span>"
      </div>
    </div>
    <shadow></shadow>
  </template>
  <tags>starter,math</tags>
    <script>
      Polymer("ceci-transformer", {
        ready: function() {
          this.super();
        },
        incomingMessage : function(){
          this.broadcast("transformedMessage", this.message);
        },
        message: 'Sprocket',
        unitChanged: function() {
          this.updateUnit();
        },
        resetCount: function() {
          this.value = 0;
        }
      });
    </script>
</polymer-element>
</div>

</body>
</html>
